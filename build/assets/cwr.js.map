{"version":3,"file":"cwr.js","mappings":"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","sources":["webpack://aws-rum-web/./node_modules/@aws-crypto/sha256-js/build/RawSha256.js","webpack://aws-rum-web/./node_modules/@aws-crypto/sha256-js/build/constants.js","webpack://aws-rum-web/./node_modules/@aws-crypto/sha256-js/build/index.js","webpack://aws-rum-web/./node_modules/@aws-crypto/sha256-js/build/jsSha256.js","webpack://aws-rum-web/./node_modules/@aws-crypto/util/build/convertToBuffer.js","webpack://aws-rum-web/./node_modules/@aws-crypto/util/build/index.js","webpack://aws-rum-web/./node_modules/@aws-crypto/util/build/isEmptyData.js","webpack://aws-rum-web/./node_modules/@aws-crypto/util/build/numToUint8.js","webpack://aws-rum-web/./node_modules/@aws-crypto/util/build/uint32ArrayFrom.js","webpack://aws-rum-web/./node_modules/@aws-sdk/util-utf8-browser/dist-es/index.js","webpack://aws-rum-web/./node_modules/@aws-sdk/util-utf8-browser/dist-es/whatwgEncodingApi.js","webpack://aws-rum-web/./node_modules/@aws-sdk/util-utf8-browser/dist-es/pureJs.js","webpack://aws-rum-web/./node_modules/shimmer/index.js","webpack://aws-rum-web/./node_modules/tslib/tslib.es6.js","webpack://aws-rum-web/./node_modules/ua-parser-js/src/ua-parser.js","webpack://aws-rum-web/webpack/bootstrap","webpack://aws-rum-web/webpack/runtime/define property getters","webpack://aws-rum-web/webpack/runtime/hasOwnProperty shorthand","webpack://aws-rum-web/webpack/runtime/make namespace object","webpack://aws-rum-web/./node_modules/@aws-sdk/protocol-http/node_modules/tslib/tslib.es6.js","webpack://aws-rum-web/./node_modules/@aws-sdk/protocol-http/dist-es/httpRequest.js","webpack://aws-rum-web/./node_modules/@aws-sdk/protocol-http/dist-es/httpResponse.js","webpack://aws-rum-web/./src/dispatch/CognitoIdentityClient.ts","webpack://aws-rum-web/./node_modules/@aws-sdk/fetch-http-handler/node_modules/tslib/tslib.es6.js","webpack://aws-rum-web/./node_modules/@aws-sdk/querystring-builder/node_modules/tslib/tslib.es6.js","webpack://aws-rum-web/./node_modules/@aws-sdk/util-uri-escape/dist-es/escape-uri.js","webpack://aws-rum-web/./node_modules/@aws-sdk/querystring-builder/dist-es/index.js","webpack://aws-rum-web/./node_modules/@aws-sdk/util-base64-browser/dist-es/index.js","webpack://aws-rum-web/./node_modules/@aws-sdk/fetch-http-handler/dist-es/fetch-http-handler.js","webpack://aws-rum-web/./node_modules/@aws-sdk/fetch-http-handler/dist-es/request-timeout.js","webpack://aws-rum-web/./src/dispatch/StsClient.ts","webpack://aws-rum-web/./src/plugins/event-plugins/DomEventPlugin.ts","webpack://aws-rum-web/./src/utils/constants.ts","webpack://aws-rum-web/./src/dispatch/Authentication.ts","webpack://aws-rum-web/./src/dispatch/EnhancedAuthentication.ts","webpack://aws-rum-web/./src/plugins/utils/constant.ts","webpack://aws-rum-web/./src/plugins/InternalPlugin.ts","webpack://aws-rum-web/./src/plugins/PluginManager.ts","webpack://aws-rum-web/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://aws-rum-web/./src/plugins/utils/js-error-utils.ts","webpack://aws-rum-web/./node_modules/uuid/dist/esm-browser/rng.js","webpack://aws-rum-web/./src/plugins/event-plugins/JsErrorPlugin.ts","webpack://aws-rum-web/./src/utils/cookies-utils.ts","webpack://aws-rum-web/./node_modules/uuid/dist/esm-browser/regex.js","webpack://aws-rum-web/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://aws-rum-web/./node_modules/uuid/dist/esm-browser/validate.js","webpack://aws-rum-web/./node_modules/@aws-sdk/util-hex-encoding/dist-es/index.js","webpack://aws-rum-web/./node_modules/uuid/dist/esm-browser/v4.js","webpack://aws-rum-web/./src/sessions/SessionManager.ts","webpack://aws-rum-web/./src/plugins/MonkeyPatched.ts","webpack://aws-rum-web/./src/sessions/VirtualPageLoadTimer.ts","webpack://aws-rum-web/./src/sessions/PageManager.ts","webpack://aws-rum-web/./src/event-cache/EventCache.ts","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/node_modules/tslib/tslib.es6.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/node_modules/@aws-sdk/util-hex-encoding/dist-es/index.js","webpack://aws-rum-web/./node_modules/@aws-sdk/util-middleware/dist-es/normalizeProvider.js","webpack://aws-rum-web/./src/utils/common-utils.ts","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/constants.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/credentialDerivation.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/getCanonicalHeaders.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/getPayloadHash.js","webpack://aws-rum-web/./node_modules/@aws-sdk/is-array-buffer/dist-es/index.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/cloneRequest.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/prepareRequest.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/utilDate.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/SignatureV4.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/moveHeadersToQuery.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/headerUtil.js","webpack://aws-rum-web/./node_modules/@aws-sdk/signature-v4/dist-es/getCanonicalQuery.js","webpack://aws-rum-web/./src/dispatch/DataPlaneClient.ts","webpack://aws-rum-web/./src/dispatch/BeaconHttpHandler.ts","webpack://aws-rum-web/./src/dispatch/FetchHttpHandler.ts","webpack://aws-rum-web/./src/dispatch/request-timeout.ts","webpack://aws-rum-web/./src/dispatch/RetryHttpHandler.ts","webpack://aws-rum-web/./src/dispatch/Dispatch.ts","webpack://aws-rum-web/./src/plugins/event-plugins/NavigationPlugin.ts","webpack://aws-rum-web/./src/plugins/utils/http-utils.ts","webpack://aws-rum-web/./node_modules/web-vitals/dist/web-vitals.js","webpack://aws-rum-web/./src/plugins/event-plugins/ResourcePlugin.ts","webpack://aws-rum-web/./src/plugins/event-plugins/WebVitalsPlugin.ts","webpack://aws-rum-web/./src/utils/random.ts","webpack://aws-rum-web/./src/orchestration/Orchestration.ts","webpack://aws-rum-web/./src/errors/XhrError.ts","webpack://aws-rum-web/./src/plugins/event-plugins/XhrPlugin.ts","webpack://aws-rum-web/./src/plugins/event-plugins/FetchPlugin.ts","webpack://aws-rum-web/./src/plugins/event-plugins/PageViewPlugin.ts","webpack://aws-rum-web/./src/remote-config/remote-config.ts","webpack://aws-rum-web/./src/CommandQueue.ts","webpack://aws-rum-web/./src/index-browser.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RawSha256 = void 0;\nvar constants_1 = require(\"./constants\");\n/**\n * @internal\n */\nvar RawSha256 = /** @class */ (function () {\n    function RawSha256() {\n        this.state = Int32Array.from(constants_1.INIT);\n        this.temp = new Int32Array(64);\n        this.buffer = new Uint8Array(64);\n        this.bufferLength = 0;\n        this.bytesHashed = 0;\n        /**\n         * @internal\n         */\n        this.finished = false;\n    }\n    RawSha256.prototype.update = function (data) {\n        if (this.finished) {\n            throw new Error(\"Attempted to update an already finished hash.\");\n        }\n        var position = 0;\n        var byteLength = data.byteLength;\n        this.bytesHashed += byteLength;\n        if (this.bytesHashed * 8 > constants_1.MAX_HASHABLE_LENGTH) {\n            throw new Error(\"Cannot hash more than 2^53 - 1 bits\");\n        }\n        while (byteLength > 0) {\n            this.buffer[this.bufferLength++] = data[position++];\n            byteLength--;\n            if (this.bufferLength === constants_1.BLOCK_SIZE) {\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n        }\n    };\n    RawSha256.prototype.digest = function () {\n        if (!this.finished) {\n            var bitsHashed = this.bytesHashed * 8;\n            var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n            var undecoratedLength = this.bufferLength;\n            bufferView.setUint8(this.bufferLength++, 0x80);\n            // Ensure the final block has enough room for the hashed length\n            if (undecoratedLength % constants_1.BLOCK_SIZE >= constants_1.BLOCK_SIZE - 8) {\n                for (var i = this.bufferLength; i < constants_1.BLOCK_SIZE; i++) {\n                    bufferView.setUint8(i, 0);\n                }\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n            for (var i = this.bufferLength; i < constants_1.BLOCK_SIZE - 8; i++) {\n                bufferView.setUint8(i, 0);\n            }\n            bufferView.setUint32(constants_1.BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n            bufferView.setUint32(constants_1.BLOCK_SIZE - 4, bitsHashed);\n            this.hashBuffer();\n            this.finished = true;\n        }\n        // The value in state is little-endian rather than big-endian, so flip\n        // each word into a new Uint8Array\n        var out = new Uint8Array(constants_1.DIGEST_LENGTH);\n        for (var i = 0; i < 8; i++) {\n            out[i * 4] = (this.state[i] >>> 24) & 0xff;\n            out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\n            out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\n            out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\n        }\n        return out;\n    };\n    RawSha256.prototype.hashBuffer = function () {\n        var _a = this, buffer = _a.buffer, state = _a.state;\n        var state0 = state[0], state1 = state[1], state2 = state[2], state3 = state[3], state4 = state[4], state5 = state[5], state6 = state[6], state7 = state[7];\n        for (var i = 0; i < constants_1.BLOCK_SIZE; i++) {\n            if (i < 16) {\n                this.temp[i] =\n                    ((buffer[i * 4] & 0xff) << 24) |\n                        ((buffer[i * 4 + 1] & 0xff) << 16) |\n                        ((buffer[i * 4 + 2] & 0xff) << 8) |\n                        (buffer[i * 4 + 3] & 0xff);\n            }\n            else {\n                var u = this.temp[i - 2];\n                var t1_1 = ((u >>> 17) | (u << 15)) ^ ((u >>> 19) | (u << 13)) ^ (u >>> 10);\n                u = this.temp[i - 15];\n                var t2_1 = ((u >>> 7) | (u << 25)) ^ ((u >>> 18) | (u << 14)) ^ (u >>> 3);\n                this.temp[i] =\n                    ((t1_1 + this.temp[i - 7]) | 0) + ((t2_1 + this.temp[i - 16]) | 0);\n            }\n            var t1 = ((((((state4 >>> 6) | (state4 << 26)) ^\n                ((state4 >>> 11) | (state4 << 21)) ^\n                ((state4 >>> 25) | (state4 << 7))) +\n                ((state4 & state5) ^ (~state4 & state6))) |\n                0) +\n                ((state7 + ((constants_1.KEY[i] + this.temp[i]) | 0)) | 0)) |\n                0;\n            var t2 = ((((state0 >>> 2) | (state0 << 30)) ^\n                ((state0 >>> 13) | (state0 << 19)) ^\n                ((state0 >>> 22) | (state0 << 10))) +\n                ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) |\n                0;\n            state7 = state6;\n            state6 = state5;\n            state5 = state4;\n            state4 = (state3 + t1) | 0;\n            state3 = state2;\n            state2 = state1;\n            state1 = state0;\n            state0 = (t1 + t2) | 0;\n        }\n        state[0] += state0;\n        state[1] += state1;\n        state[2] += state2;\n        state[3] += state3;\n        state[4] += state4;\n        state[5] += state5;\n        state[6] += state6;\n        state[7] += state7;\n    };\n    return RawSha256;\n}());\nexports.RawSha256 = RawSha256;\n//# sourceMappingURL=RawSha256.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MAX_HASHABLE_LENGTH = exports.INIT = exports.KEY = exports.DIGEST_LENGTH = exports.BLOCK_SIZE = void 0;\n/**\n * @internal\n */\nexports.BLOCK_SIZE = 64;\n/**\n * @internal\n */\nexports.DIGEST_LENGTH = 32;\n/**\n * @internal\n */\nexports.KEY = new Uint32Array([\n    0x428a2f98,\n    0x71374491,\n    0xb5c0fbcf,\n    0xe9b5dba5,\n    0x3956c25b,\n    0x59f111f1,\n    0x923f82a4,\n    0xab1c5ed5,\n    0xd807aa98,\n    0x12835b01,\n    0x243185be,\n    0x550c7dc3,\n    0x72be5d74,\n    0x80deb1fe,\n    0x9bdc06a7,\n    0xc19bf174,\n    0xe49b69c1,\n    0xefbe4786,\n    0x0fc19dc6,\n    0x240ca1cc,\n    0x2de92c6f,\n    0x4a7484aa,\n    0x5cb0a9dc,\n    0x76f988da,\n    0x983e5152,\n    0xa831c66d,\n    0xb00327c8,\n    0xbf597fc7,\n    0xc6e00bf3,\n    0xd5a79147,\n    0x06ca6351,\n    0x14292967,\n    0x27b70a85,\n    0x2e1b2138,\n    0x4d2c6dfc,\n    0x53380d13,\n    0x650a7354,\n    0x766a0abb,\n    0x81c2c92e,\n    0x92722c85,\n    0xa2bfe8a1,\n    0xa81a664b,\n    0xc24b8b70,\n    0xc76c51a3,\n    0xd192e819,\n    0xd6990624,\n    0xf40e3585,\n    0x106aa070,\n    0x19a4c116,\n    0x1e376c08,\n    0x2748774c,\n    0x34b0bcb5,\n    0x391c0cb3,\n    0x4ed8aa4a,\n    0x5b9cca4f,\n    0x682e6ff3,\n    0x748f82ee,\n    0x78a5636f,\n    0x84c87814,\n    0x8cc70208,\n    0x90befffa,\n    0xa4506ceb,\n    0xbef9a3f7,\n    0xc67178f2\n]);\n/**\n * @internal\n */\nexports.INIT = [\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19\n];\n/**\n * @internal\n */\nexports.MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n//# sourceMappingURL=constants.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./jsSha256\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sha256 = void 0;\nvar tslib_1 = require(\"tslib\");\nvar constants_1 = require(\"./constants\");\nvar RawSha256_1 = require(\"./RawSha256\");\nvar util_1 = require(\"@aws-crypto/util\");\nvar Sha256 = /** @class */ (function () {\n    function Sha256(secret) {\n        this.hash = new RawSha256_1.RawSha256();\n        if (secret) {\n            this.outer = new RawSha256_1.RawSha256();\n            var inner = bufferFromSecret(secret);\n            var outer = new Uint8Array(constants_1.BLOCK_SIZE);\n            outer.set(inner);\n            for (var i = 0; i < constants_1.BLOCK_SIZE; i++) {\n                inner[i] ^= 0x36;\n                outer[i] ^= 0x5c;\n            }\n            this.hash.update(inner);\n            this.outer.update(outer);\n            // overwrite the copied key in memory\n            for (var i = 0; i < inner.byteLength; i++) {\n                inner[i] = 0;\n            }\n        }\n    }\n    Sha256.prototype.update = function (toHash) {\n        if ((0, util_1.isEmptyData)(toHash) || this.error) {\n            return;\n        }\n        try {\n            this.hash.update((0, util_1.convertToBuffer)(toHash));\n        }\n        catch (e) {\n            this.error = e;\n        }\n    };\n    /* This synchronous method keeps compatibility\n     * with the v2 aws-sdk.\n     */\n    Sha256.prototype.digestSync = function () {\n        if (this.error) {\n            throw this.error;\n        }\n        if (this.outer) {\n            if (!this.outer.finished) {\n                this.outer.update(this.hash.digest());\n            }\n            return this.outer.digest();\n        }\n        return this.hash.digest();\n    };\n    /* The underlying digest method here is synchronous.\n     * To keep the same interface with the other hash functions\n     * the default is to expose this as an async method.\n     * However, it can sometimes be useful to have a sync method.\n     */\n    Sha256.prototype.digest = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                return [2 /*return*/, this.digestSync()];\n            });\n        });\n    };\n    return Sha256;\n}());\nexports.Sha256 = Sha256;\nfunction bufferFromSecret(secret) {\n    var input = (0, util_1.convertToBuffer)(secret);\n    if (input.byteLength > constants_1.BLOCK_SIZE) {\n        var bufferHash = new RawSha256_1.RawSha256();\n        bufferHash.update(input);\n        input = bufferHash.digest();\n    }\n    var buffer = new Uint8Array(constants_1.BLOCK_SIZE);\n    buffer.set(input);\n    return buffer;\n}\n//# sourceMappingURL=jsSha256.js.map","\"use strict\";\n// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertToBuffer = void 0;\nvar util_utf8_browser_1 = require(\"@aws-sdk/util-utf8-browser\");\n// Quick polyfill\nvar fromUtf8 = typeof Buffer !== \"undefined\" && Buffer.from\n    ? function (input) { return Buffer.from(input, \"utf8\"); }\n    : util_utf8_browser_1.fromUtf8;\nfunction convertToBuffer(data) {\n    // Already a Uint8, do nothing\n    if (data instanceof Uint8Array)\n        return data;\n    if (typeof data === \"string\") {\n        return fromUtf8(data);\n    }\n    if (ArrayBuffer.isView(data)) {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n    }\n    return new Uint8Array(data);\n}\nexports.convertToBuffer = convertToBuffer;\n//# sourceMappingURL=convertToBuffer.js.map","\"use strict\";\n// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uint32ArrayFrom = exports.numToUint8 = exports.isEmptyData = exports.convertToBuffer = void 0;\nvar convertToBuffer_1 = require(\"./convertToBuffer\");\nObject.defineProperty(exports, \"convertToBuffer\", { enumerable: true, get: function () { return convertToBuffer_1.convertToBuffer; } });\nvar isEmptyData_1 = require(\"./isEmptyData\");\nObject.defineProperty(exports, \"isEmptyData\", { enumerable: true, get: function () { return isEmptyData_1.isEmptyData; } });\nvar numToUint8_1 = require(\"./numToUint8\");\nObject.defineProperty(exports, \"numToUint8\", { enumerable: true, get: function () { return numToUint8_1.numToUint8; } });\nvar uint32ArrayFrom_1 = require(\"./uint32ArrayFrom\");\nObject.defineProperty(exports, \"uint32ArrayFrom\", { enumerable: true, get: function () { return uint32ArrayFrom_1.uint32ArrayFrom; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\n// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isEmptyData = void 0;\nfunction isEmptyData(data) {\n    if (typeof data === \"string\") {\n        return data.length === 0;\n    }\n    return data.byteLength === 0;\n}\nexports.isEmptyData = isEmptyData;\n//# sourceMappingURL=isEmptyData.js.map","\"use strict\";\n// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numToUint8 = void 0;\nfunction numToUint8(num) {\n    return new Uint8Array([\n        (num & 0xff000000) >> 24,\n        (num & 0x00ff0000) >> 16,\n        (num & 0x0000ff00) >> 8,\n        num & 0x000000ff,\n    ]);\n}\nexports.numToUint8 = numToUint8;\n//# sourceMappingURL=numToUint8.js.map","\"use strict\";\n// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uint32ArrayFrom = void 0;\n// IE 11 does not support Array.from, so we do it manually\nfunction uint32ArrayFrom(a_lookUpTable) {\n    if (!Uint32Array.from) {\n        var return_array = new Uint32Array(a_lookUpTable.length);\n        var a_index = 0;\n        while (a_index < a_lookUpTable.length) {\n            return_array[a_index] = a_lookUpTable[a_index];\n            a_index += 1;\n        }\n        return return_array;\n    }\n    return Uint32Array.from(a_lookUpTable);\n}\nexports.uint32ArrayFrom = uint32ArrayFrom;\n//# sourceMappingURL=uint32ArrayFrom.js.map","import { fromUtf8 as jsFromUtf8, toUtf8 as jsToUtf8 } from \"./pureJs\";\nimport { fromUtf8 as textEncoderFromUtf8, toUtf8 as textEncoderToUtf8 } from \"./whatwgEncodingApi\";\nexport var fromUtf8 = function (input) {\n    return typeof TextEncoder === \"function\" ? textEncoderFromUtf8(input) : jsFromUtf8(input);\n};\nexport var toUtf8 = function (input) {\n    return typeof TextDecoder === \"function\" ? textEncoderToUtf8(input) : jsToUtf8(input);\n};\n","export function fromUtf8(input) {\n    return new TextEncoder().encode(input);\n}\nexport function toUtf8(input) {\n    return new TextDecoder(\"utf-8\").decode(input);\n}\n","export var fromUtf8 = function (input) {\n    var bytes = [];\n    for (var i = 0, len = input.length; i < len; i++) {\n        var value = input.charCodeAt(i);\n        if (value < 0x80) {\n            bytes.push(value);\n        }\n        else if (value < 0x800) {\n            bytes.push((value >> 6) | 192, (value & 63) | 128);\n        }\n        else if (i + 1 < input.length && (value & 0xfc00) === 0xd800 && (input.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {\n            var surrogatePair = 0x10000 + ((value & 1023) << 10) + (input.charCodeAt(++i) & 1023);\n            bytes.push((surrogatePair >> 18) | 240, ((surrogatePair >> 12) & 63) | 128, ((surrogatePair >> 6) & 63) | 128, (surrogatePair & 63) | 128);\n        }\n        else {\n            bytes.push((value >> 12) | 224, ((value >> 6) & 63) | 128, (value & 63) | 128);\n        }\n    }\n    return Uint8Array.from(bytes);\n};\nexport var toUtf8 = function (input) {\n    var decoded = \"\";\n    for (var i = 0, len = input.length; i < len; i++) {\n        var byte = input[i];\n        if (byte < 0x80) {\n            decoded += String.fromCharCode(byte);\n        }\n        else if (192 <= byte && byte < 224) {\n            var nextByte = input[++i];\n            decoded += String.fromCharCode(((byte & 31) << 6) | (nextByte & 63));\n        }\n        else if (240 <= byte && byte < 365) {\n            var surrogatePair = [byte, input[++i], input[++i], input[++i]];\n            var encoded = \"%\" + surrogatePair.map(function (byteValue) { return byteValue.toString(16); }).join(\"%\");\n            decoded += decodeURIComponent(encoded);\n        }\n        else {\n            decoded += String.fromCharCode(((byte & 15) << 12) | ((input[++i] & 63) << 6) | (input[++i] & 63));\n        }\n    }\n    return decoded;\n};\n","'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/*!@license\n * UAParser.js v0.7.28\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright  2012-2021 Faisal Salman <f@faisalman.com>\n * Licensed under MIT License\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.28',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 255;\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        has : function (str1, str2) {\n            return typeof str1 === STR_TYPE ? str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1 : false;\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str, len) {\n            str = str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n            return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            // Safari < 3.0\n            oldSafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            },\n            oldEdge : {\n                version : {\n                    '0.1'   : '12.',\n                    '21'    : '13.',\n                    '31'    : '14.',\n                    '39'    : '15.',\n                    '41'    : '16.',\n                    '42'    : '17.',\n                    '44'    : '18.'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n            // breaking change (reserved for next major release):\n            ///edge\\/([\\w\\.]+)/i                                                  // Old Edge (Trident)\n            //], [[VERSION, mapper.str, maps.browser.oldEdge.version], [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]{3,6})\\b.+version\\/([\\w\\.-]+)/i,                // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/\\s]+)([\\w\\.]+)/i,                         // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/\\s]+([\\w\\.]+)/i                                            // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, 'Opera Mini']], [\n            /\\sopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, 'Opera']], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]*)/i,     // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant\\s|iemobile|slim)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,             // Avant/IEMobile/SlimBrowser\n            /(ba?idubrowser)[\\/\\s]?([\\w\\.]+)/i,                                 // Baidu Browser\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\\/([\\w\\.-]+)/i,\n                                                                                // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([\\w\\.]+)/i,         // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:[\\s\\/]uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w\\.]+)/i           // UCBrowser\n            ], [VERSION, [NAME, 'UCBrowser']], [\n            /(?:windowswechat)?\\sqbcore\\/([\\w\\.]+)\\b.*(?:windowswechat)?/i      // WeChat Desktop for Windows Built-in Browser\n            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[:\\s]([\\w\\.]{1,9})\\b.+like\\sgecko/i                     // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /yabrowser\\/([\\w\\.]+)/i                                             // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure Browser'], VERSION], [\n            /focus\\/([\\w\\.]+)/i                                                 // Firefox Focus\n            ], [VERSION, [NAME, 'Firefox Focus']], [\n            /opt\\/([\\w\\.]+)/i                                                   // Opera Touch\n            ], [VERSION, [NAME, 'Opera Touch']], [\n            /coc_coc_browser\\/([\\w\\.]+)/i                                       // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, 'Opera Coast']],\n            [/xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                  // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n            /(qihu|qhbrowser|qihoobrowser|360browser)/i                         // 360\n            ], [[NAME, '360 Browser']], [\n            /(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 Browser'], VERSION], [                       // Oculus/Samsung/Sailfish Browser\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /\\s(electron)\\/([\\w\\.]+)\\ssafari/i,                                 // Electron-based App\n            /(tesla)(?:\\sqtcarbrowser|\\/(20[12]\\d\\.[\\w\\.-]+))/i,                // Tesla\n            /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/\\s]?([\\w\\.]+)/i           // QQBrowser/Baidu App/2345 Browser\n            ], [NAME, VERSION], [\n            /(MetaSr)[\\/\\s]?([\\w\\.]+)/i,                                        // SouGouBrowser\n            /(LBBROWSER)/i                                                      // LieBao Browser\n            ], [NAME], [\n\n            // WebView\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android with version\n            ], [VERSION, [NAME, 'Facebook']], [\n            /FBAN\\/FBIOS|FB_IAB\\/FB4A/i                                         // Facebook App for iOS & Android without version\n            ], [[NAME, 'Facebook']], [\n            /safari\\s(line)\\/([\\w\\.]+)/i,                                       // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(chromium|instagram)[\\/\\s]([\\w\\.-]+)/i                             // Chromium/Instagram\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+)\\s.*safari\\//i                                     // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)|\\s)/i                                 // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, 'Chrome WebView'], VERSION], [\n\n            /droid.+\\sversion\\/([\\w\\.]+)\\b.+(?:mobile\\ssafari|safari)/i         // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i      // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.]+)\\s.*mobile\\/\\w+\\s(safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w\\.]+)\\s.*(mobile\\s?safari|safari)/i                   // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldSafari.version]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /ile\\svr;\\srv:([\\w\\.]+)\\).+firefox/i                                // Firefox Reality\n            ], [VERSION, [NAME, 'Firefox Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([\\w\\.-]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)\\s[\\w\\s\\-]+\\/[\\w\\.]+$/i,                       // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+)\\s.+rv\\:.+gecko\\/\\d+/i,                        // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]*)/i,                                         // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|armv?8e?l?)\\b/i                                         // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            // Ordered by popularity\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus\\s10)/i\n            ], [MODEL, [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy\\snexus)/i,\n            /\\ssamsung[\\s-]([\\w-]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n\n            // Apple\n            /\\((ip(?:hone|od)[\\s\\w]*);/i                                        // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n            /\\((ipad);[\\w\\s\\),;-]+apple/i,                                      // iPad\n            /applecoremedia\\/[\\w\\.]+\\s\\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            // Huawei\n            /\\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\\d{2})/i,\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, TABLET]], [\n            /d\\/huawei([\\w\\s-]+)[;\\)]/i,\n            /\\b(nexus\\s6p|vog-[at]?l\\d\\d|ane-[at]?l[x\\d]\\d|eml-a?l\\d\\da?|lya-[at]?l\\d[\\dc]|clt-a?l\\d\\di?|ele-l\\d\\d)/i,\n            /\\b(\\w{2,4}-[atu][ln][01259][019])[;\\)\\s]/i\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\s\\w]+)(?:\\sbuild|\\))/i,                                   // Xiaomi POCO\n            /\\b;\\s(\\w+)\\sbuild\\/hm\\1/i,                                         // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[\\s\\-_]?note?[\\s_]?(?:\\d\\w)?)\\sbuild/i,                       // Xiaomi Hongmi\n            /\\b(redmi[\\s\\-_]?(?:note|k)?[\\w\\s_]+)(?:\\sbuild|\\))/i,              // Xiaomi Redmi\n            /\\b(mi[\\s\\-_]?(?:a\\d|one|one[\\s_]plus|note lte)?[\\s_]?(?:\\d?\\w?)[\\s_]?(?:plus)?)\\sbuild/i  // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n            /\\b(mi[\\s\\-_]?(?:pad)(?:[\\w\\s_]+))(?:\\sbuild|\\))/i                  // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, TABLET]], [\n\n            // OPPO\n            /;\\s(\\w+)\\sbuild.+\\soppo/i,\n            /\\s(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /\\svivo\\s(\\w+)(?:\\sbuild|\\))/i,\n            /\\s(v[12]\\d{3}\\w?[at])(?:\\sbuild|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\s(rmx[12]\\d{3})(?:\\sbuild|;)/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?:?(\\s4g)?)\\b[\\w\\s]+build\\//i,\n            /\\smot(?:orola)?[\\s-](\\w*)/i,\n            /((?:moto[\\s\\w\\(\\)]+|xt\\d{3,4}|nexus\\s6)(?=\\sbuild|\\)))/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3})\\sbuild|\\s3\\.[\\s\\w;-]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, TABLET]], [\n            /(lm-?f100[nv]?|nexus\\s[45])/i,\n            /lg[e;\\s\\/-]+((?!browser|netcast)\\w+)/i,\n            /\\blg(\\-?[\\d\\w]+)\\sbuild/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[\\w\\-\\s]+)/i,\n            /lenovo\\s?(s(?:5000|6000)(?:[\\w-]+)|tab(?:[\\s\\w]+)|yt[\\d\\w-]{6}|tb[\\d\\w-]{6})/i        // Lenovo tablets\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia\\s\\d+)/i,\n            /nokia[\\s_-]?([\\w\\.-]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /droid.+;\\s(pixel\\sc)[\\s)]/i                                        // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n            /droid.+;\\s(pixel[\\s\\daxl]{0,6})(?:\\sbuild|\\))/i                    // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+\\s([c-g]\\d{4}|so[-l]\\w+|xq-a\\w[4-7][12])(?=\\sbuild\\/|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /sony\\stablet\\s[ps]\\sbuild\\//i,\n            /(?:sony)?sgp\\w+(?:\\sbuild\\/|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, 'Sony'], [TYPE, TABLET]], [\n\n            // OnePlus\n            /\\s(kb2005|in20[12]5|be20[12][59])\\b/i,\n            /\\ba000(1)\\sbuild/i,                                                // OnePlus\n            /\\boneplus\\s(a\\d{4})[\\s)]/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi)(\\sbuild\\/|\\))/i,                                    // Kindle Fire without Silk\n            /(kf[a-z]+)(\\sbuild\\/|\\)).+silk\\//i                                 // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+(\\sbuild\\/|\\)).+silk\\//i                    // Fire Phone\n            ], [[MODEL, 'Fire Phone'], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /\\((playbook);[\\w\\s\\),;-]+(rim)/i                                   // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus\\s7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, 'ASUS'], [TYPE, TABLET]], [\n            /\\s(z[es]6[027][01][km][ls]|zenfone\\s\\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, 'ASUS'], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[;_\\s-]{1,2}([\\w\\s]+(?=\\)|\\sbuild)|\\w+)/i,                    // HTC\n\n            // ZTE\n            /(zte)-(\\w*)/i,\n            /(alcatel|geeksphone|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]*)/i // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid[x\\d\\.\\s;]+\\s([ab][1-7]\\-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+;\\s(m[1-5]\\snote)\\sbuild/i,\n            /\\bmz-([\\w-]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\\s_-]?([\\w-]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft);\\s(lumia[\\s\\w]+)/i,                                    // Microsoft Lumia\n            /(lenovo)[_\\s-]?([\\w-]+)/i,                                         // Lenovo\n            /linux;.+(jolla);/i,                                                // Jolla\n            /droid.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                              // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i,                                 // Dell Streak\n            /[;\\/]\\s?(le[\\s\\-]+pan)[\\s\\-]+(\\w{1,9})\\sbuild/i,                   // Le Pan Tablets\n            /[;\\/]\\s?(trinity)[\\-\\s]*(t\\d{3})\\sbuild/i,                         // Trinity Tablets\n            /\\b(gigaset)[\\s\\-]+(q\\w{1,9})\\sbuild/i,                             // Gigaset Tablets\n            /\\b(vodafone)\\s([\\w\\s]+)(?:\\)|\\sbuild)/i                            // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /\\s(surface\\sduo)\\s/i                                               // Surface Duo\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, TABLET]], [\n            /droid\\s[\\d\\.]+;\\s(fp\\du?)\\sbuild/i\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /\\s(u304aa)\\sbuild/i                                                // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /sie-(\\w*)/i                                                        // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /[;\\/]\\s?(rct\\w+)\\sbuild/i                                          // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /[;\\/\\s](venue[\\d\\s]{2,7})\\sbuild/i                                 // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /[;\\/]\\s?(q(?:mv|ta)\\w+)\\sbuild/i                                   // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /[;\\/]\\s(?:barnes[&\\s]+noble\\s|bn[rt])([\\w\\s\\+]*)\\sbuild/i          // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /[;\\/]\\s(tm\\d{3}\\w+)\\sbuild/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /;\\s(k88)\\sbuild/i                                                  // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /;\\s(nx\\d{3}j)\\sbuild/i                                             // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /[;\\/]\\s?(gen\\d{3})\\sbuild.*49h/i                                   // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /[;\\/]\\s?(zur\\d{3})\\sbuild/i                                        // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /[;\\/]\\s?((zeki)?tb.*\\b)\\sbuild/i                                   // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /[;\\/]\\s([yr]\\d{2})\\sbuild/i,\n            /[;\\/]\\s(dragon[\\-\\s]+touch\\s|dt)(\\w{5})\\sbuild/i                   // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /[;\\/]\\s?(ns-?\\w{0,9})\\sbuild/i                                     // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /[;\\/]\\s?((nxa|Next)-?\\w{0,9})\\sbuild/i                             // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /[;\\/]\\s?(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05]))\\sbuild/i\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [                    // Voice Xtreme Phones\n            /[;\\/]\\s?(lvtel\\-)?(v1[12])\\sbuild/i                                // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /;\\s(ph-1)\\s/i\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [                // Essential PH-1\n            /[;\\/]\\s?(v(100md|700na|7011|917g).*\\b)\\sbuild/i                    // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /[;\\/]\\s?(trio[\\s\\w\\-\\.]+)\\sbuild/i                                 // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /[;\\/]\\s?tu_(1491)\\sbuild/i                                         // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w\\s]+)\\sbuild/i                                           // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint)\\s(\\w+)/i                                                  // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n            /droid\\s[\\d\\.]+;\\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i     // Zebra\n            ], [MODEL, [VENDOR, 'Zebra'], [TYPE, TABLET]], [\n            /droid\\s[\\d\\.]+;\\s(ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, 'Zebra'], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3utch]+)/i                                       // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+;\\s(shield)\\sbuild/i                                        // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation\\s[345portablevi]+)/i                                  // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n            /[\\s\\(;](xbox(?:\\sone)?(?!;\\sxbox))[\\s\\);]/i                        // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n            /(?:linux;\\snetcast.+smarttv|lg\\snetcast\\.tv-201\\d)/i,              // LG SmartTV\n            ], [[VENDOR, 'LG'], [TYPE, SMARTTV]], [\n            /(apple)\\s?tv/i                                                     // Apple TV\n            ], [VENDOR, [MODEL, 'Apple TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google'], [TYPE, SMARTTV]], [\n            /droid.+aft([\\w])(\\sbuild\\/|\\))/i                                   // Fire TV\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n            /[\\s\\/\\(](android\\s|smart[-\\s]?|opera\\s)tv[;\\)\\s]/i                 // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /droid.+;\\s(glass)\\s\\d/i                                            // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n            /droid\\s[\\d\\.]+;\\s(wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, 'Zebra'], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?:\\sqtcarbrowser|\\/20[12]\\d\\.[\\w\\.-]+)/i                   // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: build|\\) applewebkit).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?;\\s([^;]+?)(?: build|\\) applewebkit).+?(?! mobile) safari/i  // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\s(tablet|tab)[;\\/]/i,                                             // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize]], [\n            /(android[\\w\\.\\s\\-]{0,9});.+build/i                                 // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']], [\n            /(phone)/i\n            ], [[TYPE, MOBILE]]\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s\\w]*)/i,                   // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)(?!.+xbox)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os\\s([\\w]+)\\slike\\smac|;\\sopera)/i,          // iOS\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]*)/i,\n            /(macintosh|mac(?=_powerpc)\\s)(?!.+haiku)/i                         // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes                                                      // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki/Sailfish OS\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|sailfish|contiki)[\\/\\s-]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/\\s]([\\w\\.]+)/i,                                    // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, 'BlackBerry']], [\n            /(?:symbian\\s?os|symbos|s60(?=;)|series60)[\\/\\s-]?([\\w\\.]*)/i       // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, 'Chromecast']], [\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Console\n            /(nintendo|playstation)\\s([wids345portablevuch]+)/i,                // Nintendo/Playstation\n            /(xbox);\\s+xbox\\s([^\\);]+)/i,                                       // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(\\)]?(\\w*)/i,                                          // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\\sgnu\\/linux)?(?:\\slinux)?[\\/\\s-]?(?!chrom|package)([\\w\\.-]*)/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]*)/i,                                        // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]*)/i,                                               // GNU\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,  // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            /(haiku)\\s(\\w+)/i                                                   // Haiku\n            ], [NAME, VERSION], [\n\n            // Other\n            /(sunos)\\s?([\\w\\.\\d]*)/i                                            // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]*)/i,                             // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.])*/i,                                // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms|fuchsia)/i,  // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS/Fuchsia\n            /(unix)\\s?([\\w\\.]*)/i                                               // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === 'object') {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _ua = ua || ((typeof window !== 'undefined' && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var _rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n\n        this.getBrowser = function () {\n            var _browser = { name: undefined, version: undefined };\n            mapper.rgx.call(_browser, _ua, _rgxmap.browser);\n            _browser.major = util.major(_browser.version); // deprecated\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = { architecture: undefined };\n            mapper.rgx.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = { vendor: undefined, model: undefined, type: undefined };\n            mapper.rgx.call(_device, _ua, _rgxmap.device);\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = { name: undefined, version: undefined };\n            mapper.rgx.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = { name: undefined, version: undefined };\n            mapper.rgx.call(_os, _ua, _rgxmap.os);\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? util.trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === 'function' && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== 'undefined') {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== 'undefined' && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { __assign, __read, __spreadArray } from \"tslib\";\nvar HttpRequest = (function () {\n    function HttpRequest(options) {\n        this.method = options.method || \"GET\";\n        this.hostname = options.hostname || \"localhost\";\n        this.port = options.port;\n        this.query = options.query || {};\n        this.headers = options.headers || {};\n        this.body = options.body;\n        this.protocol = options.protocol\n            ? options.protocol.slice(-1) !== \":\"\n                ? \"\".concat(options.protocol, \":\")\n                : options.protocol\n            : \"https:\";\n        this.path = options.path ? (options.path.charAt(0) !== \"/\" ? \"/\".concat(options.path) : options.path) : \"/\";\n    }\n    HttpRequest.isInstance = function (request) {\n        if (!request)\n            return false;\n        var req = request;\n        return (\"method\" in req &&\n            \"protocol\" in req &&\n            \"hostname\" in req &&\n            \"path\" in req &&\n            typeof req[\"query\"] === \"object\" &&\n            typeof req[\"headers\"] === \"object\");\n    };\n    HttpRequest.prototype.clone = function () {\n        var cloned = new HttpRequest(__assign(__assign({}, this), { headers: __assign({}, this.headers) }));\n        if (cloned.query)\n            cloned.query = cloneQuery(cloned.query);\n        return cloned;\n    };\n    return HttpRequest;\n}());\nexport { HttpRequest };\nfunction cloneQuery(query) {\n    return Object.keys(query).reduce(function (carry, paramName) {\n        var _a;\n        var param = query[paramName];\n        return __assign(__assign({}, carry), (_a = {}, _a[paramName] = Array.isArray(param) ? __spreadArray([], __read(param), false) : param, _a));\n    }, {});\n}\n","var HttpResponse = (function () {\n    function HttpResponse(options) {\n        this.statusCode = options.statusCode;\n        this.headers = options.headers || {};\n        this.body = options.body;\n    }\n    HttpResponse.isInstance = function (response) {\n        if (!response)\n            return false;\n        var resp = response;\n        return typeof resp.statusCode === \"number\" && typeof resp.headers === \"object\";\n    };\n    return HttpResponse;\n}());\nexport { HttpResponse };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { HttpRequest } from '@aws-sdk/protocol-http';\nvar METHOD = 'POST';\nvar CONTENT_TYPE = 'application/x-amz-json-1.1';\nvar PROTOCOL = 'https:';\n// Targets\nvar GET_ID_TARGET = 'AWSCognitoIdentityService.GetId';\nvar GET_TOKEN_TARGET = 'AWSCognitoIdentityService.GetOpenIdToken';\nvar GET_CREDENTIALS_TARGET = 'AWSCognitoIdentityService.GetCredentialsForIdentity';\nexport var fromCognitoIdentityPool = function (params) {\n    return function () { return params.client.getCredentialsForIdentity(params.identityPoolId); };\n};\nvar CognitoIdentityClient = /** @class */ (function () {\n    function CognitoIdentityClient(config) {\n        var _this = this;\n        this.getId = function (request) { return __awaiter(_this, void 0, void 0, function () {\n            var requestPayload, idRequest;\n            return __generator(this, function (_a) {\n                requestPayload = JSON.stringify(request);\n                idRequest = this.getHttpRequest(GET_ID_TARGET, requestPayload);\n                return [2 /*return*/, this.fetchRequestHandler\n                        .handle(idRequest)\n                        .then(function (_a) {\n                        var response = _a.response;\n                        return response.body\n                            .getReader()\n                            .read()\n                            .then(function (_a) {\n                            var value = _a.value;\n                            return JSON.parse(String.fromCharCode.apply(null, value));\n                        });\n                    })\n                        .catch(function () {\n                        throw new Error('CWR: Failed to retrieve Cognito identity');\n                    })];\n            });\n        }); };\n        this.getOpenIdToken = function (request) { return __awaiter(_this, void 0, void 0, function () {\n            var requestPayload, tokenRequest;\n            return __generator(this, function (_a) {\n                requestPayload = JSON.stringify(request);\n                tokenRequest = this.getHttpRequest(GET_TOKEN_TARGET, requestPayload);\n                return [2 /*return*/, this.fetchRequestHandler\n                        .handle(tokenRequest)\n                        .then(function (_a) {\n                        var response = _a.response;\n                        return response.body\n                            .getReader()\n                            .read()\n                            .then(function (_a) {\n                            var value = _a.value;\n                            return JSON.parse(String.fromCharCode.apply(null, value));\n                        });\n                    })\n                        .catch(function () {\n                        throw new Error('CWR: Failed to retrieve Cognito OpenId token');\n                    })];\n            });\n        }); };\n        this.getCredentialsForIdentity = function (identityId) { return __awaiter(_this, void 0, void 0, function () {\n            var requestPayload, credentialRequest;\n            return __generator(this, function (_a) {\n                requestPayload = JSON.stringify({ IdentityId: identityId });\n                credentialRequest = this.getHttpRequest(GET_CREDENTIALS_TARGET, requestPayload);\n                return [2 /*return*/, this.fetchRequestHandler\n                        .handle(credentialRequest)\n                        .then(function (_a) {\n                        var response = _a.response;\n                        return response.body\n                            .getReader()\n                            .read()\n                            .then(function (_a) {\n                            var value = _a.value;\n                            var _b = JSON.parse(String.fromCharCode.apply(null, value)), IdentityId = _b.IdentityId, Credentials = _b.Credentials;\n                            var AccessKeyId = Credentials.AccessKeyId, Expiration = Credentials.Expiration, SecretAccessKey = Credentials.SecretAccessKey, SessionToken = Credentials.SessionToken;\n                            return {\n                                identityId: IdentityId,\n                                accessKeyId: AccessKeyId,\n                                secretAccessKey: SecretAccessKey,\n                                sessionToken: SessionToken,\n                                expiration: new Date(Expiration * 1000)\n                            };\n                        });\n                    })\n                        .catch(function () {\n                        throw new Error('CWR: Failed to retrieve credentials for Cognito identity');\n                    })];\n            });\n        }); };\n        this.getHttpRequest = function (target, payload) {\n            return new HttpRequest({\n                method: METHOD,\n                headers: {\n                    'content-type': CONTENT_TYPE,\n                    'x-amz-target': target\n                },\n                protocol: PROTOCOL,\n                hostname: _this.hostname,\n                body: payload\n            });\n        };\n        this.hostname = \"cognito-identity.\".concat(config.region, \".amazonaws.com\");\n        this.fetchRequestHandler = config.fetchRequestHandler;\n    }\n    return CognitoIdentityClient;\n}());\nexport { CognitoIdentityClient };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export var escapeUri = function (uri) {\n    return encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);\n};\nvar hexEncode = function (c) { return \"%\".concat(c.charCodeAt(0).toString(16).toUpperCase()); };\n","import { __values } from \"tslib\";\nimport { escapeUri } from \"@aws-sdk/util-uri-escape\";\nexport function buildQueryString(query) {\n    var e_1, _a;\n    var parts = [];\n    try {\n        for (var _b = __values(Object.keys(query).sort()), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var key = _c.value;\n            var value = query[key];\n            key = escapeUri(key);\n            if (Array.isArray(value)) {\n                for (var i = 0, iLen = value.length; i < iLen; i++) {\n                    parts.push(\"\".concat(key, \"=\").concat(escapeUri(value[i])));\n                }\n            }\n            else {\n                var qsEntry = key;\n                if (value || typeof value === \"string\") {\n                    qsEntry += \"=\".concat(escapeUri(value));\n                }\n                parts.push(qsEntry);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return parts.join(\"&\");\n}\n","var alphabetByEncoding = {};\nvar alphabetByValue = new Array(64);\nfor (var i = 0, start = \"A\".charCodeAt(0), limit = \"Z\".charCodeAt(0); i + start <= limit; i++) {\n    var char = String.fromCharCode(i + start);\n    alphabetByEncoding[char] = i;\n    alphabetByValue[i] = char;\n}\nfor (var i = 0, start = \"a\".charCodeAt(0), limit = \"z\".charCodeAt(0); i + start <= limit; i++) {\n    var char = String.fromCharCode(i + start);\n    var index = i + 26;\n    alphabetByEncoding[char] = index;\n    alphabetByValue[index] = char;\n}\nfor (var i = 0; i < 10; i++) {\n    alphabetByEncoding[i.toString(10)] = i + 52;\n    var char = i.toString(10);\n    var index = i + 52;\n    alphabetByEncoding[char] = index;\n    alphabetByValue[index] = char;\n}\nalphabetByEncoding[\"+\"] = 62;\nalphabetByValue[62] = \"+\";\nalphabetByEncoding[\"/\"] = 63;\nalphabetByValue[63] = \"/\";\nvar bitsPerLetter = 6;\nvar bitsPerByte = 8;\nvar maxLetterValue = 63;\nexport function fromBase64(input) {\n    var totalByteLength = (input.length / 4) * 3;\n    if (input.slice(-2) === \"==\") {\n        totalByteLength -= 2;\n    }\n    else if (input.slice(-1) === \"=\") {\n        totalByteLength--;\n    }\n    var out = new ArrayBuffer(totalByteLength);\n    var dataView = new DataView(out);\n    for (var i = 0; i < input.length; i += 4) {\n        var bits = 0;\n        var bitLength = 0;\n        for (var j = i, limit = i + 3; j <= limit; j++) {\n            if (input[j] !== \"=\") {\n                if (!(input[j] in alphabetByEncoding)) {\n                    throw new TypeError(\"Invalid character \".concat(input[j], \" in base64 string.\"));\n                }\n                bits |= alphabetByEncoding[input[j]] << ((limit - j) * bitsPerLetter);\n                bitLength += bitsPerLetter;\n            }\n            else {\n                bits >>= bitsPerLetter;\n            }\n        }\n        var chunkOffset = (i / 4) * 3;\n        bits >>= bitLength % bitsPerByte;\n        var byteLength = Math.floor(bitLength / bitsPerByte);\n        for (var k = 0; k < byteLength; k++) {\n            var offset = (byteLength - k - 1) * bitsPerByte;\n            dataView.setUint8(chunkOffset + k, (bits & (255 << offset)) >> offset);\n        }\n    }\n    return new Uint8Array(out);\n}\nexport function toBase64(input) {\n    var str = \"\";\n    for (var i = 0; i < input.length; i += 3) {\n        var bits = 0;\n        var bitLength = 0;\n        for (var j = i, limit = Math.min(i + 3, input.length); j < limit; j++) {\n            bits |= input[j] << ((limit - j - 1) * bitsPerByte);\n            bitLength += bitsPerByte;\n        }\n        var bitClusterCount = Math.ceil(bitLength / bitsPerLetter);\n        bits <<= bitClusterCount * bitsPerLetter - bitLength;\n        for (var k = 1; k <= bitClusterCount; k++) {\n            var offset = (bitClusterCount - k) * bitsPerLetter;\n            str += alphabetByValue[(bits & (maxLetterValue << offset)) >> offset];\n        }\n        str += \"==\".slice(0, 4 - bitClusterCount);\n    }\n    return str;\n}\n","import { __awaiter, __generator, __values } from \"tslib\";\nimport { HttpResponse } from \"@aws-sdk/protocol-http\";\nimport { buildQueryString } from \"@aws-sdk/querystring-builder\";\nimport { requestTimeout } from \"./request-timeout\";\nvar FetchHttpHandler = (function () {\n    function FetchHttpHandler(options) {\n        if (typeof options === \"function\") {\n            this.configProvider = options().then(function (opts) { return opts || {}; });\n        }\n        else {\n            this.config = options !== null && options !== void 0 ? options : {};\n            this.configProvider = Promise.resolve(this.config);\n        }\n    }\n    FetchHttpHandler.prototype.destroy = function () {\n    };\n    FetchHttpHandler.prototype.handle = function (request, _a) {\n        var _b = _a === void 0 ? {} : _a, abortSignal = _b.abortSignal;\n        return __awaiter(this, void 0, void 0, function () {\n            var _c, requestTimeoutInMs, abortError, path, queryString, port, method, url, body, requestOptions, fetchRequest, raceOfPromises;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (!!this.config) return [3, 2];\n                        _c = this;\n                        return [4, this.configProvider];\n                    case 1:\n                        _c.config = _d.sent();\n                        _d.label = 2;\n                    case 2:\n                        requestTimeoutInMs = this.config.requestTimeout;\n                        if (abortSignal === null || abortSignal === void 0 ? void 0 : abortSignal.aborted) {\n                            abortError = new Error(\"Request aborted\");\n                            abortError.name = \"AbortError\";\n                            return [2, Promise.reject(abortError)];\n                        }\n                        path = request.path;\n                        if (request.query) {\n                            queryString = buildQueryString(request.query);\n                            if (queryString) {\n                                path += \"?\".concat(queryString);\n                            }\n                        }\n                        port = request.port, method = request.method;\n                        url = \"\".concat(request.protocol, \"//\").concat(request.hostname).concat(port ? \":\".concat(port) : \"\").concat(path);\n                        body = method === \"GET\" || method === \"HEAD\" ? undefined : request.body;\n                        requestOptions = {\n                            body: body,\n                            headers: new Headers(request.headers),\n                            method: method,\n                        };\n                        if (typeof AbortController !== \"undefined\") {\n                            requestOptions[\"signal\"] = abortSignal;\n                        }\n                        fetchRequest = new Request(url, requestOptions);\n                        raceOfPromises = [\n                            fetch(fetchRequest).then(function (response) {\n                                var e_1, _a;\n                                var fetchHeaders = response.headers;\n                                var transformedHeaders = {};\n                                try {\n                                    for (var _b = __values(fetchHeaders.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                                        var pair = _c.value;\n                                        transformedHeaders[pair[0]] = pair[1];\n                                    }\n                                }\n                                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                                finally {\n                                    try {\n                                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                                    }\n                                    finally { if (e_1) throw e_1.error; }\n                                }\n                                var hasReadableStream = response.body !== undefined;\n                                if (!hasReadableStream) {\n                                    return response.blob().then(function (body) { return ({\n                                        response: new HttpResponse({\n                                            headers: transformedHeaders,\n                                            statusCode: response.status,\n                                            body: body,\n                                        }),\n                                    }); });\n                                }\n                                return {\n                                    response: new HttpResponse({\n                                        headers: transformedHeaders,\n                                        statusCode: response.status,\n                                        body: response.body,\n                                    }),\n                                };\n                            }),\n                            requestTimeout(requestTimeoutInMs),\n                        ];\n                        if (abortSignal) {\n                            raceOfPromises.push(new Promise(function (resolve, reject) {\n                                abortSignal.onabort = function () {\n                                    var abortError = new Error(\"Request aborted\");\n                                    abortError.name = \"AbortError\";\n                                    reject(abortError);\n                                };\n                            }));\n                        }\n                        return [2, Promise.race(raceOfPromises)];\n                }\n            });\n        });\n    };\n    return FetchHttpHandler;\n}());\nexport { FetchHttpHandler };\n","export function requestTimeout(timeoutInMs) {\n    if (timeoutInMs === void 0) { timeoutInMs = 0; }\n    return new Promise(function (resolve, reject) {\n        if (timeoutInMs) {\n            setTimeout(function () {\n                var timeoutError = new Error(\"Request did not complete within \".concat(timeoutInMs, \" ms\"));\n                timeoutError.name = \"TimeoutError\";\n                reject(timeoutError);\n            }, timeoutInMs);\n        }\n    });\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { HttpRequest } from '@aws-sdk/protocol-http';\nvar METHOD = 'POST';\nvar CONTENT_TYPE = 'application/x-www-form-urlencoded';\nvar PROTOCOL = 'https:';\nvar ACTION = 'AssumeRoleWithWebIdentity';\nvar VERSION = '2011-06-15';\nvar StsClient = /** @class */ (function () {\n    function StsClient(config) {\n        var _this = this;\n        this.assumeRoleWithWebIdentity = function (request) { return __awaiter(_this, void 0, void 0, function () {\n            var requestObject, encodedBody, STSRequest;\n            return __generator(this, function (_a) {\n                requestObject = __assign(__assign({}, request), { Action: ACTION, Version: VERSION });\n                encodedBody = new URLSearchParams(Object.entries(requestObject)).toString();\n                STSRequest = new HttpRequest({\n                    method: METHOD,\n                    headers: {\n                        'content-type': CONTENT_TYPE,\n                        host: this.hostname\n                    },\n                    protocol: PROTOCOL,\n                    hostname: this.hostname,\n                    body: encodedBody\n                });\n                return [2 /*return*/, this.fetchRequestHandler\n                        .handle(STSRequest)\n                        .then(function (_a) {\n                        var response = _a.response;\n                        return response.body\n                            .getReader()\n                            .read()\n                            .then(function (_a) {\n                            var value = _a.value;\n                            var xmlResponse = String.fromCharCode.apply(null, value);\n                            return {\n                                accessKeyId: xmlResponse\n                                    .split('<AccessKeyId>')[1]\n                                    .split('</AccessKeyId>')[0],\n                                secretAccessKey: xmlResponse\n                                    .split('<SecretAccessKey>')[1]\n                                    .split('</SecretAccessKey>')[0],\n                                sessionToken: xmlResponse\n                                    .split('<SessionToken>')[1]\n                                    .split('</SessionToken>')[0],\n                                expiration: new Date(xmlResponse\n                                    .split('<Expiration>')[1]\n                                    .split('</Expiration>')[0])\n                            };\n                        });\n                    })\n                        .catch(function () {\n                        throw new Error('CWR: Failed to retrieve credentials from STS');\n                    })];\n            });\n        }); };\n        this.hostname = \"sts.\".concat(config.region, \".amazonaws.com\");\n        this.fetchRequestHandler = config.fetchRequestHandler;\n    }\n    return StsClient;\n}());\nexport { StsClient };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { InternalPlugin } from '../InternalPlugin';\nimport { DOM_EVENT_TYPE } from '../utils/constant';\nexport var DOM_EVENT_PLUGIN_ID = 'dom-event';\nvar defaultConfig = {\n    interactionId: function () { return ''; },\n    enableMutationObserver: false,\n    events: []\n};\nvar DomEventPlugin = /** @class */ (function (_super) {\n    __extends(DomEventPlugin, _super);\n    function DomEventPlugin(config) {\n        var _this = _super.call(this, DOM_EVENT_PLUGIN_ID) || this;\n        _this.enabled = false;\n        _this.eventListenerMap = new Map();\n        _this.config = __assign(__assign({}, defaultConfig), config);\n        return _this;\n    }\n    DomEventPlugin.getElementInfo = function (event) {\n        var elementInfo = { name: 'UNKNOWN' };\n        if (event.target instanceof Node) {\n            elementInfo.name = event.target.nodeName;\n        }\n        if (event.target instanceof Element && event.target.id) {\n            elementInfo.id = event.target.id;\n        }\n        return elementInfo;\n    };\n    DomEventPlugin.prototype.enable = function () {\n        var _this = this;\n        if (document.readyState !== 'complete') {\n            window.addEventListener('load', function () { return _this.enable(); });\n            return;\n        }\n        if (this.enabled) {\n            return;\n        }\n        this.addListeners();\n        if (this.config.enableMutationObserver) {\n            this.observeDOMMutation();\n        }\n        this.enabled = true;\n    };\n    DomEventPlugin.prototype.disable = function () {\n        if (!this.enabled) {\n            return;\n        }\n        this.removeListeners();\n        if (this.observer) {\n            this.observer.disconnect();\n        }\n        this.enabled = false;\n    };\n    DomEventPlugin.prototype.update = function (events) {\n        var _this = this;\n        events.forEach(function (domEvent) {\n            _this.addEventHandler(domEvent);\n            _this.config.events.push(domEvent);\n        });\n    };\n    DomEventPlugin.prototype.onload = function () {\n        this.enable();\n    };\n    DomEventPlugin.prototype.removeListeners = function () {\n        var _this = this;\n        this.config.events.forEach(function (domEvent) {\n            return _this.removeEventHandler(domEvent);\n        });\n    };\n    DomEventPlugin.prototype.addListeners = function () {\n        var _this = this;\n        this.config.events.forEach(function (domEvent) {\n            return _this.addEventHandler(domEvent);\n        });\n    };\n    DomEventPlugin.prototype.getEventListener = function (cssLocator) {\n        var _this = this;\n        return function (event) {\n            var _a;\n            var elementInfo = DomEventPlugin.getElementInfo(event);\n            var interactionId = _this.config.interactionId(event);\n            var eventData = __assign(__assign(__assign({ version: '1.1.0', event: event.type, element: elementInfo.name }, (elementInfo.id ? { elementId: elementInfo.id } : {})), (interactionId ? { interactionId: interactionId } : {})), (cssLocator ? { cssLocator: cssLocator } : {}));\n            if ((_a = _this.context) === null || _a === void 0 ? void 0 : _a.record) {\n                _this.context.record(DOM_EVENT_TYPE, eventData);\n            }\n        };\n    };\n    DomEventPlugin.prototype.addEventHandler = function (domEvent) {\n        var eventType = domEvent.event;\n        var eventListener = this.getEventListener(domEvent.cssLocator);\n        var identifiedElementList = [];\n        var elementEventListenerList = this.eventListenerMap.has(domEvent)\n            ? this.eventListenerMap.get(domEvent)\n            : [];\n        // first add event listener to all elements identified by the CSS locator\n        if (domEvent.cssLocator) {\n            var cssLocatedElements = document.querySelectorAll(domEvent.cssLocator);\n            cssLocatedElements.forEach(function (element) {\n                identifiedElementList.push(element);\n            });\n        }\n        else if (domEvent.elementId) {\n            var identifiedElement = document.getElementById(domEvent.elementId);\n            if (identifiedElement) {\n                identifiedElementList.push(identifiedElement);\n            }\n        }\n        else if (domEvent.element) {\n            identifiedElementList.push(domEvent.element);\n        }\n        identifiedElementList.forEach(function (element) {\n            element.addEventListener(eventType, eventListener);\n            elementEventListenerList.push({ element: element, eventListener: eventListener });\n        });\n        this.eventListenerMap.set(domEvent, elementEventListenerList);\n    };\n    DomEventPlugin.prototype.removeEventHandler = function (domEvent) {\n        var elementEventListenerList = this.eventListenerMap.get(domEvent);\n        if (elementEventListenerList) {\n            elementEventListenerList.forEach(function (elementEventListener) {\n                var element = elementEventListener.element;\n                var eventListener = elementEventListener.eventListener;\n                element.removeEventListener(domEvent.event, eventListener);\n            });\n            this.eventListenerMap.delete(domEvent);\n        }\n    };\n    DomEventPlugin.prototype.observeDOMMutation = function () {\n        var _this = this;\n        this.observer = new MutationObserver(function () {\n            _this.removeListeners();\n            _this.addListeners();\n        });\n        //  we track only changes to nodes/DOM elements, not attributes or characterData\n        this.observer.observe(document, { childList: true, subtree: true });\n    };\n    return DomEventPlugin;\n}(InternalPlugin));\nexport { DomEventPlugin };\n","export var CRED_KEY = 'cwr_c';\nexport var SESSION_COOKIE_NAME = 'cwr_s';\nexport var USER_COOKIE_NAME = 'cwr_u';\nexport var CRED_RENEW_MS = 30000;\nexport var DEFAULT_PAGE_ATTRIBUTES = ['pageId', 'pageTags'];\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { CognitoIdentityClient } from './CognitoIdentityClient';\nimport { FetchHttpHandler } from '@aws-sdk/fetch-http-handler';\nimport { StsClient } from './StsClient';\nimport { CRED_KEY, CRED_RENEW_MS } from '../utils/constants';\nvar Authentication = /** @class */ (function () {\n    function Authentication(config) {\n        var _this = this;\n        /**\n         * A credential provider which provides AWS credentials for an anonymous\n         * (guest) user. These credentials are retrieved from the first successful\n         * provider in a chain.\n         *\n         * Credentials are stored in and retrieved from localStorage. This prevents the client from having to\n         * re-authenticate every time the client loads, which (1) improves the performance of the RUM web client and (2)\n         * reduces the load on AWS services Cognito and STS.\n         *\n         * While storing credentials in localStorage puts the cookie at greater risk of being leaked through an\n         * XSS attack, there is no impact if the credentials were to be leaked. This is because (1) the identity pool ID\n         * and role ARN are public and (2) the credentials are for an anonymous (guest) user.\n         *\n         * Regarding (1), the identity pool ID and role ARN are, by necessity, public. These identifiers are shipped with\n         * each application as part of Cognito's Basic (Classic) authentication flow. The identity pool ID and role ARN\n         * are not secret.\n         *\n         * Regarding (2), the authentication chain implemented in this file only supports anonymous (guest)\n         * authentication. When the Cognito authentication flow is executed, {@code AnonymousCognitoCredentialsProvider}\n         * does not communicate with a login provider such as Amazon, Facebook or Google. Instead, it relies on (a) the\n         * identity pool supporting unauthenticated identities and (b) the IAM role policy enabling login through the\n         * identity pool. If the identity pool does not support unauthenticated identities, this authentication chain\n         * will not succeed.\n         *\n         * Taken together, (1) and (2) mean that if these temporary credentials were to be leaked, the leaked credentials\n         * would not allow a bad actor to gain access to anything which they did not already have public access to.\n         *\n         * Implements CredentialsProvider = Provider<Credentials>\n         */\n        this.ChainAnonymousCredentialsProvider = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.AnonymousCredentialsProvider()\n                        .catch(this.AnonymousStorageCredentialsProvider)\n                        .catch(this.AnonymousCognitoCredentialsProvider)];\n            });\n        }); };\n        /**\n         * Provides credentials for an anonymous (guest) user. These credentials are read from a member variable.\n         *\n         * Implements CredentialsProvider = Provider<Credentials>\n         */\n        this.AnonymousCredentialsProvider = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        if (_this.renewCredentials()) {\n                            // The credentials have expired.\n                            return reject();\n                        }\n                        resolve(_this.credentials);\n                    })];\n            });\n        }); };\n        /**\n         * Provides credentials for an anonymous (guest) user. These credentials are read from localStorage.\n         *\n         * Implements CredentialsProvider = Provider<Credentials>\n         */\n        this.AnonymousStorageCredentialsProvider = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var credentials;\n                        try {\n                            credentials = JSON.parse(localStorage.getItem(CRED_KEY));\n                        }\n                        catch (e) {\n                            // Error retrieving, decoding or parsing the cred string -- abort\n                            return reject();\n                        }\n                        // The expiration property of Credentials has a date type. Because the date was serialized as a string,\n                        // we need to convert it back into a date, otherwise the AWS SDK signing middleware\n                        // (@aws-sdk/middleware-signing) will throw an exception and no credentials will be returned.\n                        credentials.expiration = new Date(credentials.expiration);\n                        _this.credentials = credentials;\n                        if (_this.renewCredentials()) {\n                            // The credentials have expired.\n                            return reject();\n                        }\n                        _this.credentials = credentials;\n                        resolve(credentials);\n                    })];\n            });\n        }); };\n        /**\n         * Provides credentials for an anonymous (guest) user. These credentials are retrieved from Cognito's basic\n         * (classic) authflow.\n         *\n         * See https://docs.aws.amazon.com/cognito/latest/developerguide/authentication-flow.html\n         *\n         * Implements CredentialsProvider = Provider<Credentials>\n         */\n        this.AnonymousCognitoCredentialsProvider = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.cognitoIdentityClient\n                        .getId({\n                        IdentityPoolId: this.config.identityPoolId\n                    })\n                        .then(function (getIdResponse) {\n                        return _this.cognitoIdentityClient.getOpenIdToken(getIdResponse);\n                    })\n                        .then(function (getOpenIdTokenResponse) {\n                        return _this.stsClient.assumeRoleWithWebIdentity({\n                            RoleArn: _this.config.guestRoleArn,\n                            RoleSessionName: 'cwr',\n                            WebIdentityToken: getOpenIdTokenResponse.Token\n                        });\n                    })\n                        .then(function (credentials) {\n                        _this.credentials = credentials;\n                        try {\n                            localStorage.setItem(CRED_KEY, JSON.stringify(credentials));\n                        }\n                        catch (e) {\n                            // Ignore\n                        }\n                        return credentials;\n                    })];\n            });\n        }); };\n        var region = config.identityPoolId.split(':')[0];\n        this.config = config;\n        this.stsClient = new StsClient({\n            fetchRequestHandler: new FetchHttpHandler(),\n            region: region\n        });\n        this.cognitoIdentityClient = new CognitoIdentityClient({\n            fetchRequestHandler: new FetchHttpHandler(),\n            region: region\n        });\n    }\n    Authentication.prototype.renewCredentials = function () {\n        if (!this.credentials || !this.credentials.expiration) {\n            return true;\n        }\n        var renewalTime = new Date(this.credentials.expiration.getTime() - CRED_RENEW_MS);\n        return new Date() > renewalTime;\n    };\n    return Authentication;\n}());\nexport { Authentication };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { CognitoIdentityClient, fromCognitoIdentityPool } from './CognitoIdentityClient';\nimport { FetchHttpHandler } from '@aws-sdk/fetch-http-handler';\nimport { CRED_KEY, CRED_RENEW_MS } from '../utils/constants';\nvar EnhancedAuthentication = /** @class */ (function () {\n    function EnhancedAuthentication(config) {\n        var _this = this;\n        /**\n         * A credential provider which provides AWS credentials for an anonymous\n         * (guest) user. These credentials are retrieved from the first successful\n         * provider in a chain.\n         *\n         * Credentials are stored in and retrieved from localStorage. This prevents the client from having to\n         * re-authenticate every time the client loads, which (1) improves the performance of the RUM web client and (2)\n         * reduces the load on AWS services Cognito and STS.\n         *\n         * While storing credentials in localStorage puts the credential at greater risk of being leaked through an\n         * XSS attack, there is no impact if the credentials were to be leaked. This is because (1) the identity pool ID\n         * and role ARN are public and (2) the credentials are for an anonymous (guest) user.\n         *\n         * Regarding (1), the identity pool ID and role ARN are, by necessity, public. These identifiers are shipped with\n         * each application as part of Cognito's Basic (Classic) authentication flow. The identity pool ID and role ARN\n         * are not secret.\n         *\n         * Regarding (2), the authentication chain implemented in this file only supports anonymous (guest)\n         * authentication. When the Cognito authentication flow is executed, {@code AnonymousCognitoCredentialsProvider}\n         * does not communicate with a login provider such as Amazon, Facebook or Google. Instead, it relies on (a) the\n         * identity pool supporting unauthenticated identities and (b) the IAM role policy enabling login through the\n         * identity pool. If the identity pool does not support unauthenticated identities, this authentication chain\n         * will not succeed.\n         *\n         * Taken together, (1) and (2) mean that if these temporary credentials were to be leaked, the leaked credentials\n         * would not allow a bad actor to gain access to anything which they did not already have public access to.\n         *\n         * Implements CredentialsProvider = Provider<Credentials>\n         */\n        this.ChainAnonymousCredentialsProvider = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.AnonymousCredentialsProvider()\n                        .catch(this.AnonymousStorageCredentialsProvider)\n                        .catch(this.AnonymousCognitoCredentialsProvider)];\n            });\n        }); };\n        /**\n         * Provides credentials for an anonymous (guest) user. These credentials are read from a member variable.\n         *\n         * Implements CredentialsProvider = Provider<Credentials>\n         */\n        this.AnonymousCredentialsProvider = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        if (_this.renewCredentials()) {\n                            // The credentials have expired.\n                            return reject();\n                        }\n                        resolve(_this.credentials);\n                    })];\n            });\n        }); };\n        /**\n         * Provides credentials for an anonymous (guest) user. These credentials are read from localStorage.\n         *\n         * Implements CredentialsProvider = Provider<Credentials>\n         */\n        this.AnonymousStorageCredentialsProvider = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var credentials;\n                        try {\n                            credentials = JSON.parse(localStorage.getItem(CRED_KEY));\n                        }\n                        catch (e) {\n                            // Error decoding or parsing the cookie -- abort\n                            reject();\n                        }\n                        // The expiration property of Credentials has a date type. Because the date was serialized as a string,\n                        // we need to convert it back into a date, otherwise the AWS SDK signing middleware\n                        // (@aws-sdk/middleware-signing) will throw an exception and no credentials will be returned.\n                        credentials.expiration = new Date(credentials.expiration);\n                        _this.credentials = credentials;\n                        if (_this.renewCredentials()) {\n                            // The credentials have expired.\n                            return reject();\n                        }\n                        _this.credentials = credentials;\n                        resolve(credentials);\n                    })];\n            });\n        }); };\n        /**\n         * Provides credentials for an anonymous (guest) user. These credentials are retrieved from Cognito's enhanced\n         * authflow.\n         *\n         * See https://docs.aws.amazon.com/cognito/latest/developerguide/authentication-flow.html\n         *\n         * Implements CredentialsProvider = Provider<Credentials>\n         */\n        this.AnonymousCognitoCredentialsProvider = function () { return __awaiter(_this, void 0, void 0, function () {\n            var credentialProvider;\n            var _this = this;\n            return __generator(this, function (_a) {\n                credentialProvider = fromCognitoIdentityPool({\n                    client: this.cognitoIdentityClient,\n                    identityPoolId: this.config.identityPoolId\n                });\n                return [2 /*return*/, credentialProvider().then(function (credentials) {\n                        _this.credentials = credentials;\n                        try {\n                            localStorage.setItem(CRED_KEY, JSON.stringify(credentials));\n                        }\n                        catch (e) {\n                            // Ignore\n                        }\n                        return credentials;\n                    })];\n            });\n        }); };\n        var region = config.identityPoolId.split(':')[0];\n        this.config = config;\n        this.cognitoIdentityClient = new CognitoIdentityClient({\n            fetchRequestHandler: new FetchHttpHandler(),\n            region: region\n        });\n    }\n    EnhancedAuthentication.prototype.renewCredentials = function () {\n        if (!this.credentials || !this.credentials.expiration) {\n            return true;\n        }\n        var renewalTime = new Date(this.credentials.expiration.getTime() - CRED_RENEW_MS);\n        return new Date() > renewalTime;\n    };\n    return EnhancedAuthentication;\n}());\nexport { EnhancedAuthentication };\n","export var UNKNOWN = 'unknown';\nexport var RUM_AMZ_PREFIX = 'com.amazon.rum';\nexport var RUM_AWS_PREFIX = 'com.amazonaws.rum';\n// Http request event schemas\nexport var HTTP_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".http_event\");\nexport var XRAY_TRACE_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".xray_trace_event\");\n// Web vitals event schemas\nexport var LCP_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".largest_contentful_paint_event\");\nexport var FID_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".first_input_delay_event\");\nexport var CLS_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".cumulative_layout_shift_event\");\n// Page load event schemas\nexport var PERFORMANCE_NAVIGATION_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".performance_navigation_event\");\nexport var PERFORMANCE_RESOURCE_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".performance_resource_event\");\nexport var PERFORMANCE_FIRST_PAINT_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".performance_first_paint_event\");\nexport var PERFORMANCE_FIRST_CONTENTFUL_PAINT_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".performance_first_contentful_paint_event\");\n// DOM event schemas\nexport var DOM_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".dom_event\");\n// JS error event schemas\nexport var JS_ERROR_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".js_error_event\");\n// Page view event\nexport var PAGE_VIEW_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".page_view_event\");\n// Session start event\nexport var SESSION_START_EVENT_TYPE = \"\".concat(RUM_AMZ_PREFIX, \".session_start_event\");\n","import { RUM_AWS_PREFIX } from './utils/constant';\nvar InternalPlugin = /** @class */ (function () {\n    function InternalPlugin(name) {\n        this.enabled = true;\n        this.pluginId = InternalPlugin.generatePluginId(name);\n    }\n    InternalPlugin.generatePluginId = function (name) {\n        return \"\".concat(InternalPlugin.idPrefix, \".\").concat(name);\n    };\n    InternalPlugin.prototype.load = function (context) {\n        var _a;\n        this.context = context;\n        (_a = this.onload) === null || _a === void 0 ? void 0 : _a.call(this);\n    };\n    InternalPlugin.prototype.getPluginId = function () {\n        return this.pluginId;\n    };\n    InternalPlugin.idPrefix = RUM_AWS_PREFIX;\n    return InternalPlugin;\n}());\nexport { InternalPlugin };\n","import { InternalPlugin } from './InternalPlugin';\n/**\n * The plugin manager maintains a list of plugins\n * and notifies plugins of configuration or lifecycle changes.\n */\nvar PluginManager = /** @class */ (function () {\n    function PluginManager(context) {\n        this.context = context;\n        this.plugins = new Map();\n    }\n    /**\n     * Add an event plugin to PluginManager and initialize the plugin.\n     *\n     * @param plugin The plugin which adheres to the RUM web client's plugin interface.\n     */\n    PluginManager.prototype.addPlugin = function (plugin) {\n        var pluginId = plugin.getPluginId();\n        if (this.hasPlugin(pluginId)) {\n            throw new Error(\"Plugin \\\"\".concat(pluginId, \"\\\" already defined in the PluginManager\"));\n        }\n        this.plugins.set(pluginId, plugin);\n        // initialize plugin\n        plugin.load(this.context);\n    };\n    /**\n     * Update an event plugin\n     *\n     * @param pluginId\n     * @param updateWith The config to update the plugin with.\n     */\n    PluginManager.prototype.updatePlugin = function (pluginId, updateWith) {\n        var _a;\n        var plugin = this.getPlugin(pluginId);\n        (_a = plugin === null || plugin === void 0 ? void 0 : plugin.update) === null || _a === void 0 ? void 0 : _a.call(plugin, updateWith);\n    };\n    /**\n     * Enable all event plugins.\n     */\n    PluginManager.prototype.enable = function () {\n        this.plugins.forEach(function (p) { return p.enable(); });\n    };\n    /**\n     * Disable all event plugins.\n     */\n    PluginManager.prototype.disable = function () {\n        this.plugins.forEach(function (p) { return p.disable(); });\n    };\n    /**\n     * Return if a plugin exists.\n     *\n     * @param pluginId a unique identifier for the plugin\n     */\n    PluginManager.prototype.hasPlugin = function (pluginId) {\n        return Boolean(this.getPlugin(pluginId));\n    };\n    /**\n     * Manually record data using a plugin.\n     *\n     * @param pluginId The unique identifier for the plugin being configured.\n     * @param data The data to be recorded by the plugin.\n     */\n    PluginManager.prototype.record = function (pluginId, data) {\n        var plugin = this.getPlugin(pluginId);\n        if ((plugin === null || plugin === void 0 ? void 0 : plugin.record) instanceof Function) {\n            plugin.record(data);\n        }\n        else {\n            throw new Error('AWS RUM Client record: Invalid plugin ID');\n        }\n    };\n    PluginManager.prototype.getPlugin = function (id) {\n        var _a;\n        return ((_a = this.plugins.get(id)) !== null && _a !== void 0 ? _a : this.plugins.get(InternalPlugin.generatePluginId(id)));\n    };\n    return PluginManager;\n}());\nexport { PluginManager };\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","var isObject = function (error) {\n    var type = typeof error;\n    return (type === 'object' || type === 'function') && !!error;\n};\nvar buildBaseJsErrorEvent = function (errorEvent) {\n    var rumEvent = {\n        version: '1.0.0',\n        type: 'undefined',\n        message: 'undefined'\n    };\n    if (errorEvent.type !== undefined) {\n        rumEvent.type = errorEvent.type;\n    }\n    if (errorEvent.message !== undefined) {\n        rumEvent.message = errorEvent.message;\n    }\n    if (errorEvent.filename !== undefined) {\n        rumEvent.filename = errorEvent.filename;\n    }\n    if (errorEvent.lineno !== undefined) {\n        rumEvent.lineno = errorEvent.lineno;\n    }\n    if (errorEvent.colno !== undefined) {\n        rumEvent.colno = errorEvent.colno;\n    }\n    return rumEvent;\n};\nvar appendErrorPrimitiveDetails = function (rumEvent, error) {\n    // Keep unhandledrejection as type as it will write to rumEvent.message\n    if (rumEvent.type !== 'unhandledrejection') {\n        rumEvent.type = error.toString();\n    }\n    rumEvent.message = error.toString();\n};\nvar appendErrorObjectDetails = function (rumEvent, error, stackTraceLength) {\n    // error may extend Error here, but it is not guaranteed (i.e., it could\n    // be any object)\n    if (error.name) {\n        rumEvent.type = error.name;\n    }\n    if (error.message) {\n        rumEvent.message = error.message;\n    }\n    if (error.fileName) {\n        rumEvent.filename = error.fileName;\n    }\n    if (error.lineNumber) {\n        rumEvent.lineno = error.lineNumber;\n    }\n    if (error.columnNumber) {\n        rumEvent.colno = error.columnNumber;\n    }\n    if (stackTraceLength && error.stack) {\n        rumEvent.stack =\n            error.stack.length > stackTraceLength\n                ? error.stack.substring(0, stackTraceLength) + '...'\n                : error.stack;\n    }\n};\nexport var isErrorPrimitive = function (error) {\n    return error !== Object(error) && error !== undefined && error !== null;\n};\nexport var errorEventToJsErrorEvent = function (errorEvent, stackTraceLength) {\n    var rumEvent = buildBaseJsErrorEvent(errorEvent);\n    var error = errorEvent.error;\n    if (isObject(error)) {\n        appendErrorObjectDetails(rumEvent, error, stackTraceLength);\n    }\n    else if (isErrorPrimitive(error)) {\n        appendErrorPrimitiveDetails(rumEvent, error);\n    }\n    return rumEvent;\n};\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { InternalPlugin } from '../InternalPlugin';\nimport { JS_ERROR_EVENT_TYPE } from '../utils/constant';\nimport { errorEventToJsErrorEvent } from '../utils/js-error-utils';\nexport var JS_ERROR_EVENT_PLUGIN_ID = 'js-error';\nvar defaultConfig = {\n    stackTraceLength: 200,\n    ignore: function () { return false; }\n};\nvar JsErrorPlugin = /** @class */ (function (_super) {\n    __extends(JsErrorPlugin, _super);\n    function JsErrorPlugin(config) {\n        var _this = _super.call(this, JS_ERROR_EVENT_PLUGIN_ID) || this;\n        _this.eventHandler = function (errorEvent) {\n            if (!_this.config.ignore(errorEvent)) {\n                _this.recordJsErrorEvent(errorEvent);\n            }\n        };\n        _this.promiseRejectEventHandler = function (event) {\n            if (!_this.config.ignore(event)) {\n                _this.recordJsErrorEvent({\n                    type: event.type,\n                    error: event.reason\n                });\n            }\n        };\n        _this.config = __assign(__assign({}, defaultConfig), config);\n        return _this;\n    }\n    JsErrorPlugin.prototype.enable = function () {\n        if (this.enabled) {\n            return;\n        }\n        this.addEventHandler();\n        this.enabled = true;\n    };\n    JsErrorPlugin.prototype.disable = function () {\n        if (!this.enabled) {\n            return;\n        }\n        this.removeEventHandler();\n        this.enabled = false;\n    };\n    JsErrorPlugin.prototype.record = function (error) {\n        if (error instanceof ErrorEvent) {\n            this.recordJsErrorEvent(error);\n        }\n        else {\n            this.recordJsErrorEvent({ type: 'error', error: error });\n        }\n    };\n    JsErrorPlugin.prototype.onload = function () {\n        this.addEventHandler();\n    };\n    JsErrorPlugin.prototype.recordJsErrorEvent = function (error) {\n        var _a;\n        (_a = this.context) === null || _a === void 0 ? void 0 : _a.record(JS_ERROR_EVENT_TYPE, errorEventToJsErrorEvent(error, this.config.stackTraceLength));\n    };\n    JsErrorPlugin.prototype.addEventHandler = function () {\n        window.addEventListener('error', this.eventHandler);\n        window.addEventListener('unhandledrejection', this.promiseRejectEventHandler);\n    };\n    JsErrorPlugin.prototype.removeEventHandler = function () {\n        window.removeEventListener('error', this.eventHandler);\n        window.removeEventListener('unhandledrejection', this.promiseRejectEventHandler);\n    };\n    return JsErrorPlugin;\n}(InternalPlugin));\nexport { JsErrorPlugin };\n","/**\n * Stores a cookie.\n *\n * @param name The cookie's name.\n * @param value The cookie's value.\n * @param attributes The domain where the cookie will be stored.\n * @param ttl Time to live -- expiry date is current date + ttl (do not use with {@code expires}).\n * @param expires The expiry date for the cookie (do not use with {@code ttl})\n */\nexport var storeCookie = function (name, value, attributes, ttl, expires) {\n    var cookie = name + '=';\n    cookie += value || '';\n    if (expires !== undefined) {\n        cookie += \"; Expires=\".concat(expires.toUTCString());\n    }\n    else if (ttl !== undefined) {\n        cookie += \"; Expires=\".concat(getExpiryDate(ttl).toUTCString());\n    }\n    cookie += \"; Domain=\".concat(attributes.domain);\n    cookie += \"; Path=\".concat(attributes.path);\n    cookie += \"; SameSite=\".concat(attributes.sameSite);\n    cookie += attributes.secure ? '; Secure' : '';\n    document.cookie = cookie;\n};\n/**\n * Returns the current date + TTL\n *\n * @param ttl seconds to live\n */\nexport var getExpiryDate = function (ttl) {\n    return new Date(new Date().getTime() + ttl * 1000);\n};\n/**\n * Removes a cookie by setting its expiry in the past.\n *\n * @param name The cookie's name.\n */\nexport var removeCookie = function (name, attributes) {\n    var cookie = name + '=';\n    cookie += \"; Expires=\".concat(new Date(0));\n    cookie += \"; Domain=\".concat(attributes.domain);\n    cookie += \"; Path=\".concat(attributes.path);\n    cookie += \"; SameSite=\".concat(attributes.sameSite);\n    cookie += attributes.secure ? 'Secure' : '';\n    document.cookie = cookie;\n};\n/**\n * Get a cookie with a given name\n *\n * @param name The cookie's name.\n */\nexport var getCookie = function (name) {\n    var cookies = document.cookie.split('; ');\n    for (var _i = 0, cookies_1 = cookies; _i < cookies_1.length; _i++) {\n        var cookie = cookies_1[_i];\n        var split = cookie.split('=');\n        if (split[0] === name) {\n            return split[1];\n        }\n    }\n    return '';\n};\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","var SHORT_TO_HEX = {};\nvar HEX_TO_SHORT = {};\nfor (var i = 0; i < 256; i++) {\n    var encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = \"0\".concat(encodedByte);\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\nexport function fromHex(encoded) {\n    if (encoded.length % 2 !== 0) {\n        throw new Error(\"Hex encoded strings must have an even number length\");\n    }\n    var out = new Uint8Array(encoded.length / 2);\n    for (var i = 0; i < encoded.length; i += 2) {\n        var encodedByte = encoded.slice(i, i + 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(\"Cannot decode unrecognized sequence \".concat(encodedByte, \" as hexadecimal\"));\n        }\n    }\n    return out;\n}\nexport function toHex(bytes) {\n    var out = \"\";\n    for (var i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n}\n","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { storeCookie, getCookie } from \"../utils/cookies-utils\";\nimport { v4 } from \"uuid\";\nimport { UAParser } from \"ua-parser-js\";\nimport { SESSION_COOKIE_NAME, USER_COOKIE_NAME } from \"../utils/constants\";\nexport var NIL_UUID = \"00000000-0000-0000-0000-000000000000\";\nexport var UNKNOWN = \"unknown\";\nexport var DESKTOP_DEVICE_TYPE = \"desktop\";\nexport var WEB_PLATFORM_TYPE = \"web\";\nexport var SESSION_START_EVENT_TYPE = \"com.amazon.rum.session_start_event\";\nexport var RUM_SESSION_START = \"rum_session_start\";\nexport var RUM_SESSION_EXPIRE = \"rum_session_expire\";\n/**\n * The session handler handles user id and session id.\n *\n * A session is the {user id, session id} tuple which groups events that occur on a single browser over a continuous\n * period of time. A session begins when no session exists or the last session has expired. If user id does not exist,\n * session handler will assign a new one and store it in cookie. If session id does not exist or has expired, session\n * handler will assign a new one and store it in cookie. Session handler detects user interactions and updates session\n * id expiration time.\n */\nvar SessionManager = /** @class */ (function () {\n    function SessionManager(appMonitorDetails, config, record, pageManager) {\n        this.appMonitorDetails = appMonitorDetails;\n        this.config = config;\n        this.record = record;\n        this.pageManager = pageManager;\n        // Initialize the session to the nil session\n        this.session = {\n            sessionId: NIL_UUID,\n            record: this.sample(),\n            eventCount: 0,\n        };\n        // Initialize or restore the user\n        this.initializeUser();\n        // Collect the user agent and domain\n        this.collectAttributes();\n        // Set custom session attributes\n        this.addSessionAttributes(this.config.sessionAttributes);\n        // Attempt to restore the previous session\n        this.getSessionFromCookie();\n    }\n    /**\n     * Returns the session ID. If no session ID exists, one will be created.\n     */\n    SessionManager.prototype.getSession = function () {\n        if (this.session.sessionId !== NIL_UUID && !this.useCookies()) {\n            // Cookie access has been revoked. Revert to nil session.\n            this.session = {\n                sessionId: NIL_UUID,\n                record: this.sample(),\n                eventCount: 0,\n                page: this.session.page,\n            };\n        }\n        else if (this.session.sessionId === NIL_UUID && this.useCookies()) {\n            // The session does not exist. Create a new one.\n            this.createSession();\n        }\n        else if (this.session.sessionId !== NIL_UUID &&\n            new Date() > this.sessionExpiry) {\n            // The session has expired. Create a new one.\n            this.createSession();\n        }\n        return this.session;\n    };\n    SessionManager.prototype.getAttributes = function () {\n        return this.attributes;\n    };\n    /**\n     * Adds custom session attributes to the session's attributes\n     *\n     * @param sessionAttributes object containing custom attribute data in the form of key, value pairs\n     */\n    SessionManager.prototype.addSessionAttributes = function (sessionAttributes) {\n        this.attributes = __assign(__assign({}, sessionAttributes), this.attributes);\n    };\n    SessionManager.prototype.getUserId = function () {\n        if (this.useCookies()) {\n            return this.userId;\n        }\n        return NIL_UUID;\n    };\n    SessionManager.prototype.incrementSessionEventCount = function () {\n        this.session.eventCount++;\n        this.renewSession();\n    };\n    SessionManager.prototype.initializeUser = function () {\n        var userId = \"\";\n        this.userExpiry = new Date();\n        this.userExpiry.setDate(this.userExpiry.getDate() + this.config.userIdRetentionDays);\n        if (this.config.userIdRetentionDays <= 0) {\n            // Use the 'nil' UUID when the user ID will not be retained\n            this.userId = \"00000000-0000-0000-0000-000000000000\";\n        }\n        else if (this.useCookies()) {\n            userId = this.getUserIdCookie();\n            this.userId = userId ? userId : v4();\n            this.createOrRenewUserCookie(userId, this.userExpiry);\n        }\n        else {\n            this.userId = v4();\n        }\n    };\n    SessionManager.prototype.createOrRenewSessionCookie = function (session, expires) {\n        if (btoa) {\n            storeCookie(this.sessionCookieName(), btoa(JSON.stringify(session)), this.config.cookieAttributes, undefined, expires);\n        }\n    };\n    SessionManager.prototype.createOrRenewUserCookie = function (userId, expires) {\n        storeCookie(USER_COOKIE_NAME, userId, this.config.cookieAttributes, undefined, expires);\n    };\n    SessionManager.prototype.getUserIdCookie = function () {\n        return getCookie(USER_COOKIE_NAME);\n    };\n    SessionManager.prototype.getSessionFromCookie = function () {\n        if (this.useCookies()) {\n            var cookie = getCookie(this.sessionCookieName());\n            if (cookie && atob) {\n                try {\n                    this.session = JSON.parse(atob(cookie));\n                    this.pageManager.resumeSession(this.session.page.pageId, this.session.page.interaction);\n                }\n                catch (e) {\n                    // Error decoding or parsing the cookie -- ignore\n                }\n            }\n        }\n    };\n    SessionManager.prototype.storeSessionAsCookie = function () {\n        if (this.useCookies() && this.config.userIdRetentionDays > 0) {\n            this.createOrRenewUserCookie(this.userId, this.userExpiry);\n        }\n        if (this.useCookies()) {\n            // Set the user cookie in case useCookies() has changed from false to true.\n            this.createOrRenewSessionCookie(this.session, this.sessionExpiry);\n        }\n    };\n    SessionManager.prototype.createSession = function () {\n        this.session = {\n            sessionId: v4(),\n            record: this.sample(),\n            eventCount: 0,\n        };\n        this.session.page = this.pageManager.getPage();\n        this.sessionExpiry = new Date(new Date().getTime() + this.config.sessionLengthSeconds * 1000);\n        this.storeSessionAsCookie();\n        this.record(this.session, SESSION_START_EVENT_TYPE, {\n            version: \"1.0.0\",\n        });\n    };\n    SessionManager.prototype.renewSession = function () {\n        this.sessionExpiry = new Date(new Date().getTime() + this.config.sessionLengthSeconds * 1000);\n        this.session.page = this.pageManager.getPage();\n        this.storeSessionAsCookie();\n    };\n    SessionManager.prototype.collectAttributes = function () {\n        var ua = new UAParser(navigator.userAgent).getResult();\n        this.attributes = {\n            browserLanguage: navigator.language,\n            browserName: ua.browser.name ? ua.browser.name : UNKNOWN,\n            browserVersion: ua.browser.version ? ua.browser.version : UNKNOWN,\n            osName: ua.os.name ? ua.os.name : UNKNOWN,\n            osVersion: ua.os.version ? ua.os.version : UNKNOWN,\n            // Possible device types include {console, mobile, tablet, smarttv, wearable, embedded}. If the device\n            // type is undefined, there was no information indicating the device is anything other than a desktop,\n            // so we assume the device is a desktop.\n            deviceType: ua.device.type ? ua.device.type : DESKTOP_DEVICE_TYPE,\n            // This client is used exclusively in web applications.\n            platformType: WEB_PLATFORM_TYPE,\n            domain: \"\".concat(window.location.hostname, \".chrome\"),\n        };\n    };\n    /**\n     * Returns true when cookies should be used to store user ID and session ID.\n     */\n    SessionManager.prototype.useCookies = function () {\n        return navigator.cookieEnabled && this.config.allowCookies;\n    };\n    /**\n     * Returns {@code true} when the session has been selected to be recorded.\n     */\n    SessionManager.prototype.sample = function () {\n        return Math.random() < this.config.sessionSampleRate;\n    };\n    SessionManager.prototype.sessionCookieName = function () {\n        if (this.config.cookieAttributes.unique) {\n            return \"\".concat(SESSION_COOKIE_NAME, \"_\").concat(this.appMonitorDetails.id);\n        }\n        return SESSION_COOKIE_NAME;\n    };\n    return SessionManager;\n}());\nexport { SessionManager };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as shimmer from 'shimmer';\nimport { InternalPlugin } from './InternalPlugin';\nvar MonkeyPatched = /** @class */ (function (_super) {\n    __extends(MonkeyPatched, _super);\n    function MonkeyPatched() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enable = _this.patch.bind(_this, true);\n        _this.disable = _this.patch.bind(_this, false);\n        _this.enabled = false;\n        return _this;\n    }\n    MonkeyPatched.prototype.patchAll = function () {\n        var wrap = shimmer.wrap.bind(shimmer);\n        for (var _i = 0, _a = this.patches; _i < _a.length; _i++) {\n            var patch = _a[_i];\n            wrap(patch.nodule, patch.name, patch.wrapper());\n        }\n    };\n    MonkeyPatched.prototype.unpatchAll = function () {\n        var unwrap = shimmer.unwrap.bind(shimmer);\n        for (var _i = 0, _a = this.patches; _i < _a.length; _i++) {\n            var patch = _a[_i];\n            unwrap(patch.nodule, patch.name);\n        }\n    };\n    MonkeyPatched.prototype.patch = function (shouldPatch) {\n        if (shouldPatch === void 0) { shouldPatch = true; }\n        if (this.enabled !== shouldPatch) {\n            this.enabled = shouldPatch;\n            if (shouldPatch) {\n                this.patchAll();\n            }\n            else {\n                this.unpatchAll();\n            }\n        }\n    };\n    return MonkeyPatched;\n}(InternalPlugin));\nexport { MonkeyPatched };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { PERFORMANCE_NAVIGATION_EVENT_TYPE } from '../plugins/utils/constant';\nimport { MonkeyPatched } from '../plugins/MonkeyPatched';\n/**\n * Maintains the core logic for virtual page load timing functionality.\n * (1) Holds all virtual page load timing related resources\n * (2) Intercepts outgoing XMLHttpRequests and Fetch requests and listens for DOM changes\n * (3) Records virtual page load\n */\nvar VirtualPageLoadTimer = /** @class */ (function (_super) {\n    __extends(VirtualPageLoadTimer, _super);\n    function VirtualPageLoadTimer(pageManager, config, record) {\n        var _this = _super.call(this, 'virtual-page-load-timer') || this;\n        _this.sendWrapper = function () {\n            var self = _this;\n            return function (original) {\n                return function () {\n                    self.recordXhr(this);\n                    this.addEventListener('loadend', self.endTracking);\n                    return original.apply(this, arguments);\n                };\n            };\n        };\n        /**\n         * Removes the current event from either requestBuffer or ongoingRequests set.\n         *\n         * @param event\n         */\n        _this.endTracking = function (e) {\n            var currTime = Date.now();\n            var xhr = e.target;\n            xhr.removeEventListener('loadend', _this.endTracking);\n            _this.removeXhr(xhr, currTime);\n        };\n        _this.fetch = function (original, thisArg, argsArray) {\n            return original\n                .apply(thisArg, argsArray)\n                .catch(function (error) {\n                throw error;\n            })\n                .finally(_this.decrementFetchCounter);\n        };\n        /**\n         * Increment the fetch counter in PageManager when fetch is beginning\n         */\n        _this.fetchWrapper = function () {\n            var self = _this;\n            return function (original) {\n                return function (input, init) {\n                    self.fetchCounter += 1;\n                    return self.fetch(original, this, arguments);\n                };\n            };\n        };\n        _this.decrementFetchCounter = function () {\n            if (!_this.isPageLoaded) {\n                _this.latestEndTime = Date.now();\n            }\n            _this.fetchCounter -= 1;\n        };\n        /**\n         * Checks whether the virtual page is still being loaded.\n         * If completed:\n         * (1) Clear the timers\n         * (2) Record data using NavigationEvent\n         * (3) Indicate current page has finished loading\n         */\n        _this.checkLoadStatus = function () {\n            if (_this.ongoingRequests.size === 0 && _this.fetchCounter === 0) {\n                clearInterval(_this.periodicCheckerId);\n                clearTimeout(_this.timeoutCheckerId);\n                _this.domMutationObserver.disconnect();\n                _this.recordRouteChangeNavigationEvent(_this.pageManager.getPage());\n                _this.periodicCheckerId = undefined;\n                _this.timeoutCheckerId = undefined;\n                _this.isPageLoaded = true;\n            }\n        };\n        /** Clears timers and disconnects observer to stop page timing. */\n        _this.declareTimeout = function () {\n            clearInterval(_this.periodicCheckerId);\n            _this.periodicCheckerId = undefined;\n            _this.timeoutCheckerId = undefined;\n            _this.domMutationObserver.disconnect();\n            _this.isPageLoaded = true;\n        };\n        _this.resetInterval = function () {\n            _this.latestEndTime = Date.now();\n            clearInterval(_this.periodicCheckerId);\n            _this.periodicCheckerId = setInterval(_this.checkLoadStatus, _this.config.routeChangeComplete);\n        };\n        _this.moveItemsFromBuffer = function (item) {\n            _this.ongoingRequests.add(item);\n        };\n        _this.updateLatestInteractionTime = function (e) {\n            _this.latestInteractionTime = Date.now();\n        };\n        _this.periodicCheckerId = undefined;\n        _this.timeoutCheckerId = undefined;\n        _this.domMutationObserver = new MutationObserver(_this.resetInterval);\n        _this.ongoingRequests = new Set();\n        _this.requestBuffer = new Set();\n        _this.fetchCounter = 0;\n        _this.isPageLoaded = true;\n        _this.latestEndTime = 0;\n        _this.latestInteractionTime = 0;\n        _this.config = config;\n        _this.pageManager = pageManager;\n        _this.record = record;\n        _this.enable();\n        // Start tracking the timestamps\n        document.addEventListener('mousedown', _this.updateLatestInteractionTime);\n        document.addEventListener('keydown', _this.updateLatestInteractionTime);\n        return _this;\n    }\n    Object.defineProperty(VirtualPageLoadTimer.prototype, \"patches\", {\n        get: function () {\n            return [\n                {\n                    nodule: XMLHttpRequest.prototype,\n                    name: 'send',\n                    wrapper: this.sendWrapper\n                },\n                {\n                    nodule: window,\n                    name: 'fetch',\n                    wrapper: this.fetchWrapper\n                }\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /** Initializes timing related resources for current page. */\n    VirtualPageLoadTimer.prototype.startTiming = function () {\n        this.latestEndTime = Date.now();\n        // Clean up existing timer objects and mutationObserver\n        if (this.periodicCheckerId) {\n            clearInterval(this.periodicCheckerId);\n        }\n        if (this.timeoutCheckerId) {\n            clearTimeout(this.timeoutCheckerId);\n        }\n        this.domMutationObserver.disconnect();\n        // Initialize timer objects and start observing\n        this.periodicCheckerId = setInterval(this.checkLoadStatus, this.config.routeChangeComplete);\n        this.timeoutCheckerId = setTimeout(this.declareTimeout, this.config.routeChangeTimeout);\n        // observing the add/delete of nodes\n        this.domMutationObserver.observe(document, {\n            subtree: true,\n            childList: true,\n            attributes: false,\n            characterData: false\n        });\n        // Indicate page has not loaded, and carry over buffered requests.\n        this.isPageLoaded = false;\n        this.requestBuffer.forEach(this.moveItemsFromBuffer);\n        this.requestBuffer.clear();\n    };\n    VirtualPageLoadTimer.prototype.recordXhr = function (item) {\n        var page = this.pageManager.getPage();\n        if (page && this.isPageLoaded === false) {\n            this.ongoingRequests.add(item);\n        }\n        else {\n            this.requestBuffer.add(item);\n        }\n    };\n    VirtualPageLoadTimer.prototype.removeXhr = function (item, currTime) {\n        var page = this.pageManager.getPage();\n        if (page && this.ongoingRequests.has(item)) {\n            this.ongoingRequests.delete(item);\n            this.latestEndTime = currTime;\n        }\n        else if (this.requestBuffer.has(item)) {\n            this.requestBuffer.delete(item);\n        }\n    };\n    VirtualPageLoadTimer.prototype.recordRouteChangeNavigationEvent = function (page) {\n        var virtualPageNavigationEvent = {\n            version: '1.0.0',\n            initiatorType: 'route_change',\n            navigationType: 'navigate',\n            startTime: page.start,\n            duration: this.latestEndTime - page.start\n        };\n        if (this.record) {\n            this.record(PERFORMANCE_NAVIGATION_EVENT_TYPE, virtualPageNavigationEvent);\n        }\n    };\n    return VirtualPageLoadTimer;\n}(MonkeyPatched));\nexport { VirtualPageLoadTimer };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { VirtualPageLoadTimer } from '../sessions/VirtualPageLoadTimer';\nimport { PAGE_VIEW_EVENT_TYPE } from '../plugins/utils/constant';\n/**\n * The page manager keeps the state of the current page and interaction level.\n *\n * A page is a unique view (user interface) of the application. For 'multi page' applications (i.e., 'classic' web\n * applications that have multiple html files), the page changes when the user nagivates to a new web page. For\n * 'single page' applications (i.e., 'ajax' web applications that have a single html file), the page changes when (1)\n * the popstate event emitted, or (2) the application indicates a new page has loaded using the RUM agent API.\n *\n * The interaction level is the order of a page in the sequence of pages sorted by the time they were viewed.\n */\nvar PageManager = /** @class */ (function () {\n    function PageManager(config, record) {\n        this.TIMEOUT = 1000;\n        this.config = config;\n        this.record = record;\n        this.page = undefined;\n        this.resumed = undefined;\n        this.recordInteraction = false;\n        this.virtualPageLoadTimer = new VirtualPageLoadTimer(this, config, record);\n    }\n    PageManager.prototype.getPage = function () {\n        return this.page;\n    };\n    PageManager.prototype.getAttributes = function () {\n        return this.attributes;\n    };\n    PageManager.prototype.resumeSession = function (pageId, interaction) {\n        this.recordInteraction = true;\n        this.resumed = {\n            pageId: pageId,\n            interaction: interaction,\n            start: 0\n        };\n    };\n    PageManager.prototype.recordPageView = function (payload) {\n        var pageId;\n        if (typeof payload === 'string') {\n            pageId = payload;\n        }\n        else {\n            pageId = payload.pageId;\n        }\n        if (this.useCookies()) {\n            this.recordInteraction = true;\n        }\n        if (!this.page && this.resumed) {\n            this.createResumedPage(pageId, this.resumed);\n        }\n        else if (!this.page) {\n            this.createLandingPage(pageId);\n        }\n        else if (this.page.pageId !== pageId) {\n            this.createNextPage(this.page, pageId);\n        }\n        else {\n            // The view has not changed.\n            return;\n        }\n        // this.page is guaranteed to have been initialized\n        // Attributes will be added to all events as meta data\n        this.collectAttributes(this.page, typeof payload === 'object' ? payload : undefined);\n        // The SessionManager will update its cookie with the new page\n        this.recordPageViewEvent(this.page);\n    };\n    PageManager.prototype.createResumedPage = function (pageId, resumed) {\n        this.page = {\n            pageId: pageId,\n            parentPageId: resumed.pageId,\n            interaction: resumed.interaction + 1,\n            start: Date.now()\n        };\n        this.resumed = undefined;\n    };\n    PageManager.prototype.createNextPage = function (currentPage, pageId) {\n        var startTime = Date.now();\n        var interactionTime = this.virtualPageLoadTimer.latestInteractionTime;\n        // The latest interaction time (latest) is not guaranteed to be the\n        // interaction that triggered the route change (actual). There are two\n        // cases to consider:\n        //\n        // 1. Latest is older than actual. This can happen if the user navigates\n        // with the browser back/forward button, or if the interaction is not a\n        // click/keyup event.\n        //\n        // 2. Latest is newer than actual. This can happen if the user clicks or\n        // types in the time between actual and when recordPageView is called.\n        //\n        // We believe that case (1) has a high risk of skewing route change\n        // timing metrics because (a) browser navigation is common and (b) there\n        // is no limit on when the lastest interaction may have occurred. To\n        // help mitigate this, if the route change is already longer than 1000ms,\n        // then we do not bother timing the route change.\n        //\n        // We do not believe that case (2) has a high risk of skewing route\n        // change timing, and therefore ignore case (2).\n        if (startTime - interactionTime <= this.TIMEOUT) {\n            startTime = interactionTime;\n            this.virtualPageLoadTimer.startTiming();\n        }\n        this.page = {\n            pageId: pageId,\n            parentPageId: currentPage.pageId,\n            interaction: currentPage.interaction + 1,\n            start: startTime\n        };\n    };\n    PageManager.prototype.createLandingPage = function (pageId) {\n        this.page = {\n            pageId: pageId,\n            interaction: 0,\n            start: Date.now()\n        };\n    };\n    PageManager.prototype.collectAttributes = function (page, customPageAttributes) {\n        this.attributes = {\n            title: document.title,\n            pageId: page.pageId\n        };\n        if (this.recordInteraction) {\n            this.attributes.interaction = page.interaction;\n            if (page.parentPageId !== undefined) {\n                this.attributes.parentPageId = page.parentPageId;\n            }\n        }\n        if (customPageAttributes === null || customPageAttributes === void 0 ? void 0 : customPageAttributes.pageTags) {\n            this.attributes['pageTags'] =\n                customPageAttributes['pageTags'];\n        }\n        if (customPageAttributes === null || customPageAttributes === void 0 ? void 0 : customPageAttributes.pageAttributes) {\n            this.attributes = __assign(__assign({}, customPageAttributes.pageAttributes), this.attributes);\n        }\n    };\n    PageManager.prototype.createPageViewEvent = function (page) {\n        var pageViewEvent = {\n            version: '1.0.0',\n            pageId: page.pageId\n        };\n        if (this.recordInteraction) {\n            pageViewEvent.interaction = page.interaction;\n            pageViewEvent.pageInteractionId =\n                page.pageId + '-' + page.interaction;\n            if (page.parentPageId !== undefined) {\n                pageViewEvent.parentPageInteractionId =\n                    page.parentPageId + '-' + (page.interaction - 1);\n            }\n        }\n        return pageViewEvent;\n    };\n    PageManager.prototype.recordPageViewEvent = function (page) {\n        this.record(PAGE_VIEW_EVENT_TYPE, this.createPageViewEvent(page));\n    };\n    /**\n     * Returns true when cookies should be used to store user ID and session ID.\n     */\n    PageManager.prototype.useCookies = function () {\n        return navigator.cookieEnabled && this.config.allowCookies;\n    };\n    return PageManager;\n}());\nexport { PageManager };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { SessionManager } from '../sessions/SessionManager';\nimport { v4 } from 'uuid';\nimport { PageManager } from '../sessions/PageManager';\n/**\n * A cache which stores events generated by telemetry plugins.\n *\n * The event cache stores meta data and events until they are dispatched to the\n * data plane. The event cache removes the oldest event once the cache is full\n * and a new event is added.\n */\nvar EventCache = /** @class */ (function () {\n    /**\n     * @param applicationDetails Application identity and version.\n     * @param batchLimit The maximum number of events that will be returned in a batch.\n     * @param eventCacheSize  The maximum number of events the cache can contain before dropping events.\n     * @param sessionManager  The sessionManager returns user id, session id and handles session timeout.\n     * @param pageManager The pageManager returns page id.\n     */\n    function EventCache(applicationDetails, config) {\n        var _this = this;\n        this.events = [];\n        /**\n         * Update the current page interaction for the session.\n         */\n        this.recordPageView = function (payload) {\n            if (_this.isCurrentUrlAllowed()) {\n                _this.pageManager.recordPageView(payload);\n            }\n        };\n        /**\n         * Add an event to the cache and reset the session timer.\n         *\n         * If the session is being recorded, the event will be recorded.\n         * If the session is not being recorded, the event will not be recorded.\n         *\n         * @param type The event schema.\n         */\n        this.recordEvent = function (type, eventData) {\n            if (!_this.enabled) {\n                return;\n            }\n            if (_this.isCurrentUrlAllowed()) {\n                var session = _this.sessionManager.getSession();\n                _this.sessionManager.incrementSessionEventCount();\n                if (_this.canRecord(session)) {\n                    _this.addRecordToCache(type, eventData);\n                }\n            }\n        };\n        /**\n         * Returns the current session (1) if a session exists and (2) if the\n         * current URL is allowed. Returns undefined otherwise.\n         */\n        this.getSession = function () {\n            if (_this.isCurrentUrlAllowed()) {\n                return _this.sessionManager.getSession();\n            }\n            return undefined;\n        };\n        /**\n         * Add a session start event to the cache.\n         */\n        this.recordSessionInitEvent = function (session, type, eventData) {\n            if (!_this.enabled) {\n                return;\n            }\n            _this.sessionManager.incrementSessionEventCount();\n            if (_this.canRecord(session)) {\n                _this.addRecordToCache(type, eventData);\n            }\n        };\n        this.canRecord = function (session) {\n            return (session.record &&\n                (session.eventCount <= _this.config.sessionEventLimit ||\n                    _this.config.sessionEventLimit <= 0));\n        };\n        /**\n         * Add an event to the cache.\n         *\n         * @param type The event schema.\n         */\n        this.addRecordToCache = function (type, eventData) {\n            if (!_this.enabled) {\n                return;\n            }\n            if (_this.events.length === _this.config.eventCacheSize) {\n                // Make room in the cache by dropping the oldest event.\n                _this.events.shift();\n            }\n            // The data plane service model (i.e., LogEvents) does not adhere to the\n            // RUM agent data model, where sessions and pages are first class\n            // objects with their own attribute sets. Instead, we store session\n            // attributes and page attributes together as 'meta data'.\n            var metaData = __assign(__assign(__assign({}, _this.sessionManager.getAttributes()), _this.pageManager.getAttributes()), { version: '1.0.0' });\n            _this.events.push({\n                details: JSON.stringify(eventData),\n                id: v4(),\n                metadata: JSON.stringify(metaData),\n                timestamp: new Date(),\n                type: type\n            });\n        };\n        this.appMonitorDetails = applicationDetails;\n        this.config = config;\n        this.enabled = true;\n        this.pageManager = new PageManager(config, this.recordEvent);\n        this.sessionManager = new SessionManager(applicationDetails, config, this.recordSessionInitEvent, this.pageManager);\n    }\n    /**\n     * The event cache will record new events or new meta data.\n     */\n    EventCache.prototype.enable = function () {\n        this.enabled = true;\n    };\n    /**\n     * The event cache will not record new events or new meta data. Events and\n     * meta data which are already in the cache will still be accessible.\n     */\n    EventCache.prototype.disable = function () {\n        this.enabled = false;\n    };\n    /**\n     * Returns true if there are one or more events in the cache.\n     */\n    EventCache.prototype.hasEvents = function () {\n        return this.events.length !== 0;\n    };\n    /**\n     * Removes and returns the next batch of events.\n     */\n    EventCache.prototype.getEventBatch = function () {\n        var rumEvents = [];\n        if (this.events.length === 0) {\n            return rumEvents;\n        }\n        if (this.events.length <= this.config.batchLimit) {\n            // Return all events.\n            rumEvents = this.events;\n            this.events = [];\n        }\n        else {\n            // Dispatch the front of the array and retain the back of the array.\n            rumEvents = this.events.splice(0, this.config.batchLimit);\n        }\n        return rumEvents;\n    };\n    /**\n     * Returns an object containing the AppMonitor ID and application version.\n     */\n    EventCache.prototype.getAppMonitorDetails = function () {\n        return this.appMonitorDetails;\n    };\n    /**\n     * Returns an object containing the session ID and user ID.\n     */\n    EventCache.prototype.getUserDetails = function () {\n        return {\n            userId: this.sessionManager.getUserId(),\n            sessionId: this.sessionManager.getSession().sessionId\n        };\n    };\n    /**\n     * Set custom session attributes to add them to all event metadata.\n     *\n     * @param payload object containing custom attribute data in the form of key, value pairs\n     */\n    EventCache.prototype.addSessionAttributes = function (sessionAttributes) {\n        this.sessionManager.addSessionAttributes(sessionAttributes);\n    };\n    /**\n     * Returns {@code true} if the current url matches one of the allowedPages\n     * and does not match any of the deniedPages; returns {@code false}\n     * otherwise.\n     */\n    EventCache.prototype.isCurrentUrlAllowed = function () {\n        var location = document.location.toString();\n        var exclude = this.config.pagesToExclude.some(function (re) {\n            return re.test(location);\n        });\n        var include = this.config.pagesToInclude.some(function (re) {\n            return re.test(location);\n        });\n        return include && !exclude;\n    };\n    return EventCache;\n}());\nexport { EventCache };\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","var SHORT_TO_HEX = {};\nvar HEX_TO_SHORT = {};\nfor (var i = 0; i < 256; i++) {\n    var encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = \"0\".concat(encodedByte);\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\nexport function fromHex(encoded) {\n    if (encoded.length % 2 !== 0) {\n        throw new Error(\"Hex encoded strings must have an even number length\");\n    }\n    var out = new Uint8Array(encoded.length / 2);\n    for (var i = 0; i < encoded.length; i += 2) {\n        var encodedByte = encoded.slice(i, i + 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(\"Cannot decode unrecognized sequence \".concat(encodedByte, \" as hexadecimal\"));\n        }\n    }\n    return out;\n}\nexport function toHex(bytes) {\n    var out = \"\";\n    for (var i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n}\n","export var normalizeProvider = function (input) {\n    if (typeof input === \"function\")\n        return input;\n    var promisified = Promise.resolve(input);\n    return function () { return promisified; };\n};\n","export var ResourceType;\n(function (ResourceType) {\n    ResourceType[\"OTHER\"] = \"other\";\n    ResourceType[\"STYLESHEET\"] = \"stylesheet\";\n    ResourceType[\"DOCUMENT\"] = \"document\";\n    ResourceType[\"SCRIPT\"] = \"script\";\n    ResourceType[\"IMAGE\"] = \"image\";\n    ResourceType[\"FONT\"] = \"font\";\n})(ResourceType || (ResourceType = {}));\nvar extensions = [\n    {\n        name: ResourceType.STYLESHEET,\n        list: ['css', 'less']\n    },\n    {\n        name: ResourceType.DOCUMENT,\n        list: ['htm', 'html', 'ts', 'doc', 'docx', 'pdf', 'xls', 'xlsx']\n    },\n    {\n        name: ResourceType.SCRIPT,\n        list: ['js']\n    },\n    {\n        name: ResourceType.IMAGE,\n        list: [\n            'ai',\n            'bmp',\n            'gif',\n            'ico',\n            'jpeg',\n            'jpg',\n            'png',\n            'ps',\n            'psd',\n            'svg',\n            'tif',\n            'tiff'\n        ]\n    },\n    {\n        name: ResourceType.FONT,\n        list: ['fnt', 'fon', 'otf', 'ttf', 'woff']\n    }\n];\nexport var shuffle = function (a) {\n    for (var i = a.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        var v = a[i];\n        a[i] = a[j];\n        a[j] = v;\n    }\n};\nexport var getResourceFileType = function (url) {\n    var filename = url.substring(url.lastIndexOf('/') + 1);\n    var extension = filename\n        .substring(filename.lastIndexOf('.') + 1)\n        .split(/[?#]/)[0];\n    var ext = ResourceType.OTHER;\n    extensions.forEach(function (type) {\n        if (type.list.indexOf(extension) > -1) {\n            ext = type.name;\n        }\n    });\n    return ext;\n};\n/* Helpers */\nexport var httpStatusText = {\n    '0': 'Abort Request',\n    '200': 'OK',\n    '201': 'Created',\n    '202': 'Accepted',\n    '203': 'Non-Authoritative Information',\n    '204': 'No Content',\n    '205': 'Reset Content',\n    '206': 'Partial Content',\n    '300': 'Multiple Choices',\n    '301': 'Moved Permanently',\n    '302': 'Found',\n    '303': 'See Other',\n    '304': 'Not Modified',\n    '305': 'Use Proxy',\n    '306': 'Unused',\n    '307': 'Temporary Redirect',\n    '400': 'Bad Request',\n    '401': 'Unauthorized',\n    '402': 'Payment Required',\n    '403': 'Forbidden',\n    '404': 'Not Found',\n    '405': 'Method Not Allowed',\n    '406': 'Not Acceptable',\n    '407': 'Proxy Authentication Required',\n    '408': 'Request Timeout',\n    '409': 'Conflict',\n    '410': 'Gone',\n    '411': 'Length Required',\n    '412': 'Precondition Required',\n    '413': 'Request Entry Too Large',\n    '414': 'Request-URI Too Long',\n    '415': 'Unsupported Media Type',\n    '416': 'Requested Range Not Satisfiable',\n    '417': 'Expectation Failed',\n    '418': 'I\"m a teapot',\n    '500': 'Internal Server Error',\n    '501': 'Not Implemented',\n    '502': 'Bad Gateway',\n    '503': 'Service Unavailable',\n    '504': 'Gateway Timeout',\n    '505': 'HTTP Version Not Supported'\n};\n","export var ALGORITHM_QUERY_PARAM = \"X-Amz-Algorithm\";\nexport var CREDENTIAL_QUERY_PARAM = \"X-Amz-Credential\";\nexport var AMZ_DATE_QUERY_PARAM = \"X-Amz-Date\";\nexport var SIGNED_HEADERS_QUERY_PARAM = \"X-Amz-SignedHeaders\";\nexport var EXPIRES_QUERY_PARAM = \"X-Amz-Expires\";\nexport var SIGNATURE_QUERY_PARAM = \"X-Amz-Signature\";\nexport var TOKEN_QUERY_PARAM = \"X-Amz-Security-Token\";\nexport var REGION_SET_PARAM = \"X-Amz-Region-Set\";\nexport var AUTH_HEADER = \"authorization\";\nexport var AMZ_DATE_HEADER = AMZ_DATE_QUERY_PARAM.toLowerCase();\nexport var DATE_HEADER = \"date\";\nexport var GENERATED_HEADERS = [AUTH_HEADER, AMZ_DATE_HEADER, DATE_HEADER];\nexport var SIGNATURE_HEADER = SIGNATURE_QUERY_PARAM.toLowerCase();\nexport var SHA256_HEADER = \"x-amz-content-sha256\";\nexport var TOKEN_HEADER = TOKEN_QUERY_PARAM.toLowerCase();\nexport var HOST_HEADER = \"host\";\nexport var ALWAYS_UNSIGNABLE_HEADERS = {\n    authorization: true,\n    \"cache-control\": true,\n    connection: true,\n    expect: true,\n    from: true,\n    \"keep-alive\": true,\n    \"max-forwards\": true,\n    pragma: true,\n    referer: true,\n    te: true,\n    trailer: true,\n    \"transfer-encoding\": true,\n    upgrade: true,\n    \"user-agent\": true,\n    \"x-amzn-trace-id\": true,\n};\nexport var PROXY_HEADER_PATTERN = /^proxy-/;\nexport var SEC_HEADER_PATTERN = /^sec-/;\nexport var UNSIGNABLE_PATTERNS = [/^proxy-/i, /^sec-/i];\nexport var ALGORITHM_IDENTIFIER = \"AWS4-HMAC-SHA256\";\nexport var ALGORITHM_IDENTIFIER_V4A = \"AWS4-ECDSA-P256-SHA256\";\nexport var EVENT_ALGORITHM_IDENTIFIER = \"AWS4-HMAC-SHA256-PAYLOAD\";\nexport var UNSIGNED_PAYLOAD = \"UNSIGNED-PAYLOAD\";\nexport var MAX_CACHE_SIZE = 50;\nexport var KEY_TYPE_IDENTIFIER = \"aws4_request\";\nexport var MAX_PRESIGNED_TTL = 60 * 60 * 24 * 7;\n","import { __awaiter, __generator, __values } from \"tslib\";\nimport { toHex } from \"@aws-sdk/util-hex-encoding\";\nimport { KEY_TYPE_IDENTIFIER, MAX_CACHE_SIZE } from \"./constants\";\nvar signingKeyCache = {};\nvar cacheQueue = [];\nexport var createScope = function (shortDate, region, service) {\n    return \"\".concat(shortDate, \"/\").concat(region, \"/\").concat(service, \"/\").concat(KEY_TYPE_IDENTIFIER);\n};\nexport var getSigningKey = function (sha256Constructor, credentials, shortDate, region, service) { return __awaiter(void 0, void 0, void 0, function () {\n    var credsHash, cacheKey, key, _a, _b, signable, e_1_1;\n    var e_1, _c;\n    return __generator(this, function (_d) {\n        switch (_d.label) {\n            case 0: return [4, hmac(sha256Constructor, credentials.secretAccessKey, credentials.accessKeyId)];\n            case 1:\n                credsHash = _d.sent();\n                cacheKey = \"\".concat(shortDate, \":\").concat(region, \":\").concat(service, \":\").concat(toHex(credsHash), \":\").concat(credentials.sessionToken);\n                if (cacheKey in signingKeyCache) {\n                    return [2, signingKeyCache[cacheKey]];\n                }\n                cacheQueue.push(cacheKey);\n                while (cacheQueue.length > MAX_CACHE_SIZE) {\n                    delete signingKeyCache[cacheQueue.shift()];\n                }\n                key = \"AWS4\".concat(credentials.secretAccessKey);\n                _d.label = 2;\n            case 2:\n                _d.trys.push([2, 7, 8, 9]);\n                _a = __values([shortDate, region, service, KEY_TYPE_IDENTIFIER]), _b = _a.next();\n                _d.label = 3;\n            case 3:\n                if (!!_b.done) return [3, 6];\n                signable = _b.value;\n                return [4, hmac(sha256Constructor, key, signable)];\n            case 4:\n                key = _d.sent();\n                _d.label = 5;\n            case 5:\n                _b = _a.next();\n                return [3, 3];\n            case 6: return [3, 9];\n            case 7:\n                e_1_1 = _d.sent();\n                e_1 = { error: e_1_1 };\n                return [3, 9];\n            case 8:\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_1) throw e_1.error; }\n                return [7];\n            case 9: return [2, (signingKeyCache[cacheKey] = key)];\n        }\n    });\n}); };\nexport var clearCredentialCache = function () {\n    cacheQueue.length = 0;\n    Object.keys(signingKeyCache).forEach(function (cacheKey) {\n        delete signingKeyCache[cacheKey];\n    });\n};\nvar hmac = function (ctor, secret, data) {\n    var hash = new ctor(secret);\n    hash.update(data);\n    return hash.digest();\n};\n","import { __values } from \"tslib\";\nimport { ALWAYS_UNSIGNABLE_HEADERS, PROXY_HEADER_PATTERN, SEC_HEADER_PATTERN } from \"./constants\";\nexport var getCanonicalHeaders = function (_a, unsignableHeaders, signableHeaders) {\n    var e_1, _b;\n    var headers = _a.headers;\n    var canonical = {};\n    try {\n        for (var _c = __values(Object.keys(headers).sort()), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var headerName = _d.value;\n            if (headers[headerName] == undefined) {\n                continue;\n            }\n            var canonicalHeaderName = headerName.toLowerCase();\n            if (canonicalHeaderName in ALWAYS_UNSIGNABLE_HEADERS ||\n                (unsignableHeaders === null || unsignableHeaders === void 0 ? void 0 : unsignableHeaders.has(canonicalHeaderName)) ||\n                PROXY_HEADER_PATTERN.test(canonicalHeaderName) ||\n                SEC_HEADER_PATTERN.test(canonicalHeaderName)) {\n                if (!signableHeaders || (signableHeaders && !signableHeaders.has(canonicalHeaderName))) {\n                    continue;\n                }\n            }\n            canonical[canonicalHeaderName] = headers[headerName].trim().replace(/\\s+/g, \" \");\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return canonical;\n};\n","import { __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayBuffer } from \"@aws-sdk/is-array-buffer\";\nimport { toHex } from \"@aws-sdk/util-hex-encoding\";\nimport { SHA256_HEADER, UNSIGNED_PAYLOAD } from \"./constants\";\nexport var getPayloadHash = function (_a, hashConstructor) {\n    var headers = _a.headers, body = _a.body;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var _b, _c, headerName, hashCtor, _d;\n        var e_1, _e;\n        return __generator(this, function (_f) {\n            switch (_f.label) {\n                case 0:\n                    try {\n                        for (_b = __values(Object.keys(headers)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                            headerName = _c.value;\n                            if (headerName.toLowerCase() === SHA256_HEADER) {\n                                return [2, headers[headerName]];\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_e = _b.return)) _e.call(_b);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    if (!(body == undefined)) return [3, 1];\n                    return [2, \"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\"];\n                case 1:\n                    if (!(typeof body === \"string\" || ArrayBuffer.isView(body) || isArrayBuffer(body))) return [3, 3];\n                    hashCtor = new hashConstructor();\n                    hashCtor.update(body);\n                    _d = toHex;\n                    return [4, hashCtor.digest()];\n                case 2: return [2, _d.apply(void 0, [_f.sent()])];\n                case 3: return [2, UNSIGNED_PAYLOAD];\n            }\n        });\n    });\n};\n","export var isArrayBuffer = function (arg) {\n    return (typeof ArrayBuffer === \"function\" && arg instanceof ArrayBuffer) ||\n        Object.prototype.toString.call(arg) === \"[object ArrayBuffer]\";\n};\n","import { __assign, __read, __rest, __spreadArray } from \"tslib\";\nexport var cloneRequest = function (_a) {\n    var headers = _a.headers, query = _a.query, rest = __rest(_a, [\"headers\", \"query\"]);\n    return (__assign(__assign({}, rest), { headers: __assign({}, headers), query: query ? cloneQuery(query) : undefined }));\n};\nexport var cloneQuery = function (query) {\n    return Object.keys(query).reduce(function (carry, paramName) {\n        var _a;\n        var param = query[paramName];\n        return __assign(__assign({}, carry), (_a = {}, _a[paramName] = Array.isArray(param) ? __spreadArray([], __read(param), false) : param, _a));\n    }, {});\n};\n","import { __values } from \"tslib\";\nimport { cloneRequest } from \"./cloneRequest\";\nimport { GENERATED_HEADERS } from \"./constants\";\nexport var prepareRequest = function (request) {\n    var e_1, _a;\n    request = typeof request.clone === \"function\" ? request.clone() : cloneRequest(request);\n    try {\n        for (var _b = __values(Object.keys(request.headers)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var headerName = _c.value;\n            if (GENERATED_HEADERS.indexOf(headerName.toLowerCase()) > -1) {\n                delete request.headers[headerName];\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return request;\n};\n","export var iso8601 = function (time) {\n    return toDate(time)\n        .toISOString()\n        .replace(/\\.\\d{3}Z$/, \"Z\");\n};\nexport var toDate = function (time) {\n    if (typeof time === \"number\") {\n        return new Date(time * 1000);\n    }\n    if (typeof time === \"string\") {\n        if (Number(time)) {\n            return new Date(Number(time) * 1000);\n        }\n        return new Date(time);\n    }\n    return time;\n};\n","import { __awaiter, __generator, __values } from \"tslib\";\nimport { toHex } from \"@aws-sdk/util-hex-encoding\";\nimport { normalizeProvider } from \"@aws-sdk/util-middleware\";\nimport { ALGORITHM_IDENTIFIER, ALGORITHM_QUERY_PARAM, AMZ_DATE_HEADER, AMZ_DATE_QUERY_PARAM, AUTH_HEADER, CREDENTIAL_QUERY_PARAM, EVENT_ALGORITHM_IDENTIFIER, EXPIRES_QUERY_PARAM, MAX_PRESIGNED_TTL, SHA256_HEADER, SIGNATURE_QUERY_PARAM, SIGNED_HEADERS_QUERY_PARAM, TOKEN_HEADER, TOKEN_QUERY_PARAM, } from \"./constants\";\nimport { createScope, getSigningKey } from \"./credentialDerivation\";\nimport { getCanonicalHeaders } from \"./getCanonicalHeaders\";\nimport { getCanonicalQuery } from \"./getCanonicalQuery\";\nimport { getPayloadHash } from \"./getPayloadHash\";\nimport { hasHeader } from \"./headerUtil\";\nimport { moveHeadersToQuery } from \"./moveHeadersToQuery\";\nimport { prepareRequest } from \"./prepareRequest\";\nimport { iso8601 } from \"./utilDate\";\nvar SignatureV4 = (function () {\n    function SignatureV4(_a) {\n        var applyChecksum = _a.applyChecksum, credentials = _a.credentials, region = _a.region, service = _a.service, sha256 = _a.sha256, _b = _a.uriEscapePath, uriEscapePath = _b === void 0 ? true : _b;\n        this.service = service;\n        this.sha256 = sha256;\n        this.uriEscapePath = uriEscapePath;\n        this.applyChecksum = typeof applyChecksum === \"boolean\" ? applyChecksum : true;\n        this.regionProvider = normalizeProvider(region);\n        this.credentialProvider = normalizeProvider(credentials);\n    }\n    SignatureV4.prototype.presign = function (originalRequest, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, signingDate, _b, expiresIn, unsignableHeaders, unhoistableHeaders, signableHeaders, signingRegion, signingService, credentials, region, _c, _d, longDate, shortDate, scope, request, canonicalHeaders, _e, _f, _g, _h, _j, _k;\n            return __generator(this, function (_l) {\n                switch (_l.label) {\n                    case 0:\n                        _a = options.signingDate, signingDate = _a === void 0 ? new Date() : _a, _b = options.expiresIn, expiresIn = _b === void 0 ? 3600 : _b, unsignableHeaders = options.unsignableHeaders, unhoistableHeaders = options.unhoistableHeaders, signableHeaders = options.signableHeaders, signingRegion = options.signingRegion, signingService = options.signingService;\n                        return [4, this.credentialProvider()];\n                    case 1:\n                        credentials = _l.sent();\n                        this.validateResolvedCredentials(credentials);\n                        if (!(signingRegion !== null && signingRegion !== void 0)) return [3, 2];\n                        _c = signingRegion;\n                        return [3, 4];\n                    case 2: return [4, this.regionProvider()];\n                    case 3:\n                        _c = (_l.sent());\n                        _l.label = 4;\n                    case 4:\n                        region = _c;\n                        _d = formatDate(signingDate), longDate = _d.longDate, shortDate = _d.shortDate;\n                        if (expiresIn > MAX_PRESIGNED_TTL) {\n                            return [2, Promise.reject(\"Signature version 4 presigned URLs\" + \" must have an expiration date less than one week in\" + \" the future\")];\n                        }\n                        scope = createScope(shortDate, region, signingService !== null && signingService !== void 0 ? signingService : this.service);\n                        request = moveHeadersToQuery(prepareRequest(originalRequest), { unhoistableHeaders: unhoistableHeaders });\n                        if (credentials.sessionToken) {\n                            request.query[TOKEN_QUERY_PARAM] = credentials.sessionToken;\n                        }\n                        request.query[ALGORITHM_QUERY_PARAM] = ALGORITHM_IDENTIFIER;\n                        request.query[CREDENTIAL_QUERY_PARAM] = \"\".concat(credentials.accessKeyId, \"/\").concat(scope);\n                        request.query[AMZ_DATE_QUERY_PARAM] = longDate;\n                        request.query[EXPIRES_QUERY_PARAM] = expiresIn.toString(10);\n                        canonicalHeaders = getCanonicalHeaders(request, unsignableHeaders, signableHeaders);\n                        request.query[SIGNED_HEADERS_QUERY_PARAM] = getCanonicalHeaderList(canonicalHeaders);\n                        _e = request.query;\n                        _f = SIGNATURE_QUERY_PARAM;\n                        _g = this.getSignature;\n                        _h = [longDate,\n                            scope,\n                            this.getSigningKey(credentials, region, shortDate, signingService)];\n                        _j = this.createCanonicalRequest;\n                        _k = [request, canonicalHeaders];\n                        return [4, getPayloadHash(originalRequest, this.sha256)];\n                    case 5: return [4, _g.apply(this, _h.concat([_j.apply(this, _k.concat([_l.sent()]))]))];\n                    case 6:\n                        _e[_f] = _l.sent();\n                        return [2, request];\n                }\n            });\n        });\n    };\n    SignatureV4.prototype.sign = function (toSign, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (typeof toSign === \"string\") {\n                    return [2, this.signString(toSign, options)];\n                }\n                else if (toSign.headers && toSign.payload) {\n                    return [2, this.signEvent(toSign, options)];\n                }\n                else {\n                    return [2, this.signRequest(toSign, options)];\n                }\n                return [2];\n            });\n        });\n    };\n    SignatureV4.prototype.signEvent = function (_a, _b) {\n        var headers = _a.headers, payload = _a.payload;\n        var _c = _b.signingDate, signingDate = _c === void 0 ? new Date() : _c, priorSignature = _b.priorSignature, signingRegion = _b.signingRegion, signingService = _b.signingService;\n        return __awaiter(this, void 0, void 0, function () {\n            var region, _d, _e, shortDate, longDate, scope, hashedPayload, hash, hashedHeaders, _f, stringToSign;\n            return __generator(this, function (_g) {\n                switch (_g.label) {\n                    case 0:\n                        if (!(signingRegion !== null && signingRegion !== void 0)) return [3, 1];\n                        _d = signingRegion;\n                        return [3, 3];\n                    case 1: return [4, this.regionProvider()];\n                    case 2:\n                        _d = (_g.sent());\n                        _g.label = 3;\n                    case 3:\n                        region = _d;\n                        _e = formatDate(signingDate), shortDate = _e.shortDate, longDate = _e.longDate;\n                        scope = createScope(shortDate, region, signingService !== null && signingService !== void 0 ? signingService : this.service);\n                        return [4, getPayloadHash({ headers: {}, body: payload }, this.sha256)];\n                    case 4:\n                        hashedPayload = _g.sent();\n                        hash = new this.sha256();\n                        hash.update(headers);\n                        _f = toHex;\n                        return [4, hash.digest()];\n                    case 5:\n                        hashedHeaders = _f.apply(void 0, [_g.sent()]);\n                        stringToSign = [\n                            EVENT_ALGORITHM_IDENTIFIER,\n                            longDate,\n                            scope,\n                            priorSignature,\n                            hashedHeaders,\n                            hashedPayload,\n                        ].join(\"\\n\");\n                        return [2, this.signString(stringToSign, { signingDate: signingDate, signingRegion: region, signingService: signingService })];\n                }\n            });\n        });\n    };\n    SignatureV4.prototype.signString = function (stringToSign, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.signingDate, signingDate = _c === void 0 ? new Date() : _c, signingRegion = _b.signingRegion, signingService = _b.signingService;\n        return __awaiter(this, void 0, void 0, function () {\n            var credentials, region, _d, shortDate, hash, _e, _f, _g;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0: return [4, this.credentialProvider()];\n                    case 1:\n                        credentials = _h.sent();\n                        this.validateResolvedCredentials(credentials);\n                        if (!(signingRegion !== null && signingRegion !== void 0)) return [3, 2];\n                        _d = signingRegion;\n                        return [3, 4];\n                    case 2: return [4, this.regionProvider()];\n                    case 3:\n                        _d = (_h.sent());\n                        _h.label = 4;\n                    case 4:\n                        region = _d;\n                        shortDate = formatDate(signingDate).shortDate;\n                        _f = (_e = this.sha256).bind;\n                        return [4, this.getSigningKey(credentials, region, shortDate, signingService)];\n                    case 5:\n                        hash = new (_f.apply(_e, [void 0, _h.sent()]))();\n                        hash.update(stringToSign);\n                        _g = toHex;\n                        return [4, hash.digest()];\n                    case 6: return [2, _g.apply(void 0, [_h.sent()])];\n                }\n            });\n        });\n    };\n    SignatureV4.prototype.signRequest = function (requestToSign, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.signingDate, signingDate = _c === void 0 ? new Date() : _c, signableHeaders = _b.signableHeaders, unsignableHeaders = _b.unsignableHeaders, signingRegion = _b.signingRegion, signingService = _b.signingService;\n        return __awaiter(this, void 0, void 0, function () {\n            var credentials, region, _d, request, _e, longDate, shortDate, scope, payloadHash, canonicalHeaders, signature;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0: return [4, this.credentialProvider()];\n                    case 1:\n                        credentials = _f.sent();\n                        this.validateResolvedCredentials(credentials);\n                        if (!(signingRegion !== null && signingRegion !== void 0)) return [3, 2];\n                        _d = signingRegion;\n                        return [3, 4];\n                    case 2: return [4, this.regionProvider()];\n                    case 3:\n                        _d = (_f.sent());\n                        _f.label = 4;\n                    case 4:\n                        region = _d;\n                        request = prepareRequest(requestToSign);\n                        _e = formatDate(signingDate), longDate = _e.longDate, shortDate = _e.shortDate;\n                        scope = createScope(shortDate, region, signingService !== null && signingService !== void 0 ? signingService : this.service);\n                        request.headers[AMZ_DATE_HEADER] = longDate;\n                        if (credentials.sessionToken) {\n                            request.headers[TOKEN_HEADER] = credentials.sessionToken;\n                        }\n                        return [4, getPayloadHash(request, this.sha256)];\n                    case 5:\n                        payloadHash = _f.sent();\n                        if (!hasHeader(SHA256_HEADER, request.headers) && this.applyChecksum) {\n                            request.headers[SHA256_HEADER] = payloadHash;\n                        }\n                        canonicalHeaders = getCanonicalHeaders(request, unsignableHeaders, signableHeaders);\n                        return [4, this.getSignature(longDate, scope, this.getSigningKey(credentials, region, shortDate, signingService), this.createCanonicalRequest(request, canonicalHeaders, payloadHash))];\n                    case 6:\n                        signature = _f.sent();\n                        request.headers[AUTH_HEADER] =\n                            \"\".concat(ALGORITHM_IDENTIFIER, \" \") +\n                                \"Credential=\".concat(credentials.accessKeyId, \"/\").concat(scope, \", \") +\n                                \"SignedHeaders=\".concat(getCanonicalHeaderList(canonicalHeaders), \", \") +\n                                \"Signature=\".concat(signature);\n                        return [2, request];\n                }\n            });\n        });\n    };\n    SignatureV4.prototype.createCanonicalRequest = function (request, canonicalHeaders, payloadHash) {\n        var sortedHeaders = Object.keys(canonicalHeaders).sort();\n        return \"\".concat(request.method, \"\\n\").concat(this.getCanonicalPath(request), \"\\n\").concat(getCanonicalQuery(request), \"\\n\").concat(sortedHeaders.map(function (name) { return \"\".concat(name, \":\").concat(canonicalHeaders[name]); }).join(\"\\n\"), \"\\n\\n\").concat(sortedHeaders.join(\";\"), \"\\n\").concat(payloadHash);\n    };\n    SignatureV4.prototype.createStringToSign = function (longDate, credentialScope, canonicalRequest) {\n        return __awaiter(this, void 0, void 0, function () {\n            var hash, hashedRequest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        hash = new this.sha256();\n                        hash.update(canonicalRequest);\n                        return [4, hash.digest()];\n                    case 1:\n                        hashedRequest = _a.sent();\n                        return [2, \"\".concat(ALGORITHM_IDENTIFIER, \"\\n\").concat(longDate, \"\\n\").concat(credentialScope, \"\\n\").concat(toHex(hashedRequest))];\n                }\n            });\n        });\n    };\n    SignatureV4.prototype.getCanonicalPath = function (_a) {\n        var e_1, _b;\n        var path = _a.path;\n        if (this.uriEscapePath) {\n            var normalizedPathSegments = [];\n            try {\n                for (var _c = __values(path.split(\"/\")), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var pathSegment = _d.value;\n                    if ((pathSegment === null || pathSegment === void 0 ? void 0 : pathSegment.length) === 0)\n                        continue;\n                    if (pathSegment === \".\")\n                        continue;\n                    if (pathSegment === \"..\") {\n                        normalizedPathSegments.pop();\n                    }\n                    else {\n                        normalizedPathSegments.push(pathSegment);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            var normalizedPath = \"\".concat((path === null || path === void 0 ? void 0 : path.startsWith(\"/\")) ? \"/\" : \"\").concat(normalizedPathSegments.join(\"/\")).concat(normalizedPathSegments.length > 0 && (path === null || path === void 0 ? void 0 : path.endsWith(\"/\")) ? \"/\" : \"\");\n            var doubleEncoded = encodeURIComponent(normalizedPath);\n            return doubleEncoded.replace(/%2F/g, \"/\");\n        }\n        return path;\n    };\n    SignatureV4.prototype.getSignature = function (longDate, credentialScope, keyPromise, canonicalRequest) {\n        return __awaiter(this, void 0, void 0, function () {\n            var stringToSign, hash, _a, _b, _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0: return [4, this.createStringToSign(longDate, credentialScope, canonicalRequest)];\n                    case 1:\n                        stringToSign = _d.sent();\n                        _b = (_a = this.sha256).bind;\n                        return [4, keyPromise];\n                    case 2:\n                        hash = new (_b.apply(_a, [void 0, _d.sent()]))();\n                        hash.update(stringToSign);\n                        _c = toHex;\n                        return [4, hash.digest()];\n                    case 3: return [2, _c.apply(void 0, [_d.sent()])];\n                }\n            });\n        });\n    };\n    SignatureV4.prototype.getSigningKey = function (credentials, region, shortDate, service) {\n        return getSigningKey(this.sha256, credentials, shortDate, region, service || this.service);\n    };\n    SignatureV4.prototype.validateResolvedCredentials = function (credentials) {\n        if (typeof credentials !== \"object\" ||\n            typeof credentials.accessKeyId !== \"string\" ||\n            typeof credentials.secretAccessKey !== \"string\") {\n            throw new Error(\"Resolved credential object is not valid\");\n        }\n    };\n    return SignatureV4;\n}());\nexport { SignatureV4 };\nvar formatDate = function (now) {\n    var longDate = iso8601(now).replace(/[\\-:]/g, \"\");\n    return {\n        longDate: longDate,\n        shortDate: longDate.slice(0, 8),\n    };\n};\nvar getCanonicalHeaderList = function (headers) { return Object.keys(headers).sort().join(\";\"); };\n","import { __assign, __values } from \"tslib\";\nimport { cloneRequest } from \"./cloneRequest\";\nexport var moveHeadersToQuery = function (request, options) {\n    var e_1, _a;\n    var _b;\n    if (options === void 0) { options = {}; }\n    var _c = typeof request.clone === \"function\" ? request.clone() : cloneRequest(request), headers = _c.headers, _d = _c.query, query = _d === void 0 ? {} : _d;\n    try {\n        for (var _e = __values(Object.keys(headers)), _f = _e.next(); !_f.done; _f = _e.next()) {\n            var name_1 = _f.value;\n            var lname = name_1.toLowerCase();\n            if (lname.slice(0, 6) === \"x-amz-\" && !((_b = options.unhoistableHeaders) === null || _b === void 0 ? void 0 : _b.has(lname))) {\n                query[name_1] = headers[name_1];\n                delete headers[name_1];\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return __assign(__assign({}, request), { headers: headers, query: query });\n};\n","import { __values } from \"tslib\";\nexport var hasHeader = function (soughtHeader, headers) {\n    var e_1, _a;\n    soughtHeader = soughtHeader.toLowerCase();\n    try {\n        for (var _b = __values(Object.keys(headers)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var headerName = _c.value;\n            if (soughtHeader === headerName.toLowerCase()) {\n                return true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n};\nexport var getHeaderValue = function (soughtHeader, headers) {\n    var e_2, _a;\n    soughtHeader = soughtHeader.toLowerCase();\n    try {\n        for (var _b = __values(Object.keys(headers)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var headerName = _c.value;\n            if (soughtHeader === headerName.toLowerCase()) {\n                return headers[headerName];\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return undefined;\n};\nexport var deleteHeader = function (soughtHeader, headers) {\n    var e_3, _a;\n    soughtHeader = soughtHeader.toLowerCase();\n    try {\n        for (var _b = __values(Object.keys(headers)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var headerName = _c.value;\n            if (soughtHeader === headerName.toLowerCase()) {\n                delete headers[headerName];\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n};\n","import { __values } from \"tslib\";\nimport { escapeUri } from \"@aws-sdk/util-uri-escape\";\nimport { SIGNATURE_HEADER } from \"./constants\";\nexport var getCanonicalQuery = function (_a) {\n    var e_1, _b;\n    var _c = _a.query, query = _c === void 0 ? {} : _c;\n    var keys = [];\n    var serialized = {};\n    var _loop_1 = function (key) {\n        if (key.toLowerCase() === SIGNATURE_HEADER) {\n            return \"continue\";\n        }\n        keys.push(key);\n        var value = query[key];\n        if (typeof value === \"string\") {\n            serialized[key] = \"\".concat(escapeUri(key), \"=\").concat(escapeUri(value));\n        }\n        else if (Array.isArray(value)) {\n            serialized[key] = value\n                .slice(0)\n                .sort()\n                .reduce(function (encoded, value) { return encoded.concat([\"\".concat(escapeUri(key), \"=\").concat(escapeUri(value))]); }, [])\n                .join(\"&\");\n        }\n    };\n    try {\n        for (var _d = __values(Object.keys(query).sort()), _e = _d.next(); !_e.done; _e = _d.next()) {\n            var key = _e.value;\n            _loop_1(key);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_e && !_e.done && (_b = _d.return)) _b.call(_d);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return keys\n        .map(function (key) { return serialized[key]; })\n        .filter(function (serialized) { return serialized; })\n        .join(\"&\");\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { toHex } from '@aws-sdk/util-hex-encoding';\nimport { SignatureV4 } from '@aws-sdk/signature-v4';\nimport { Sha256 } from '@aws-crypto/sha256-js';\nimport { HttpRequest } from '@aws-sdk/protocol-http';\nvar SERVICE = 'rum';\nvar METHOD = 'POST';\nvar CONTENT_TYPE_JSON = 'application/json';\nvar CONTENT_TYPE_TEXT = 'text/plain;charset=UTF-8';\nvar REQUEST_PRESIGN_ARGS = { expiresIn: 60 };\nvar DataPlaneClient = /** @class */ (function () {\n    function DataPlaneClient(config) {\n        var _this = this;\n        this.sendFetch = function (putRumEventsRequest) { return __awaiter(_this, void 0, void 0, function () {\n            var serializedRequest, path, request, _a, _b, signedRequest, httpResponse;\n            var _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        serializedRequest = JSON.stringify(serializeRequest(putRumEventsRequest));\n                        path = this.config.endpoint.pathname.replace(/\\/$/, '');\n                        _a = HttpRequest.bind;\n                        _c = {\n                            method: METHOD\n                        };\n                        _d = {\n                            'content-type': CONTENT_TYPE_JSON\n                        };\n                        _b = 'X-Amz-Content-Sha256';\n                        return [4 /*yield*/, hashAndEncode(serializedRequest)];\n                    case 1:\n                        request = new (_a.apply(HttpRequest, [void 0, (_c.headers = (_d[_b] = _e.sent(),\n                                _d.host = this.config.endpoint.host,\n                                _d),\n                                _c.protocol = this.config.endpoint.protocol,\n                                _c.hostname = this.config.endpoint.hostname,\n                                _c.path = \"\".concat(path, \"/appmonitors/\").concat(putRumEventsRequest.AppMonitorDetails.id, \"/\"),\n                                _c.body = serializedRequest,\n                                _c)]))();\n                        return [4 /*yield*/, this.awsSigV4.sign(request)];\n                    case 2:\n                        signedRequest = (_e.sent());\n                        httpResponse = this.config.fetchRequestHandler.handle(signedRequest);\n                        return [2 /*return*/, httpResponse];\n                }\n            });\n        }); };\n        this.sendBeacon = function (putRumEventsRequest) { return __awaiter(_this, void 0, void 0, function () {\n            var serializedRequest, path, request, _a, _b, preSignedRequest, httpResponse;\n            var _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        serializedRequest = JSON.stringify(serializeRequest(putRumEventsRequest));\n                        path = this.config.endpoint.pathname.replace(/\\/$/, '');\n                        _a = HttpRequest.bind;\n                        _c = {\n                            method: METHOD\n                        };\n                        _d = {\n                            'content-type': CONTENT_TYPE_TEXT\n                        };\n                        _b = 'X-Amz-Content-Sha256';\n                        return [4 /*yield*/, hashAndEncode(serializedRequest)];\n                    case 1:\n                        request = new (_a.apply(HttpRequest, [void 0, (_c.headers = (_d[_b] = _e.sent(),\n                                _d.host = this.config.endpoint.host,\n                                _d),\n                                _c.protocol = this.config.endpoint.protocol,\n                                _c.hostname = this.config.endpoint.hostname,\n                                _c.path = \"\".concat(path, \"/appmonitors/\").concat(putRumEventsRequest.AppMonitorDetails.id),\n                                _c.body = serializedRequest,\n                                _c)]))();\n                        return [4 /*yield*/, this.awsSigV4.presign(request, REQUEST_PRESIGN_ARGS)];\n                    case 2:\n                        preSignedRequest = (_e.sent());\n                        httpResponse = this.config.beaconRequestHandler.handle(preSignedRequest);\n                        return [2 /*return*/, httpResponse];\n                }\n            });\n        }); };\n        this.config = config;\n        this.awsSigV4 = new SignatureV4({\n            applyChecksum: true,\n            credentials: config.credentials,\n            region: config.region,\n            service: SERVICE,\n            uriEscapePath: true,\n            sha256: Sha256\n        });\n    }\n    return DataPlaneClient;\n}());\nexport { DataPlaneClient };\nvar serializeRequest = function (request) {\n    //  If we were using the AWS SDK client here then the serialization would be handled for us through a generated\n    //  serialization/deserialization library. However, since much of the generated code is unnecessary, we do the\n    //  serialization ourselves with this function.\n    var serializedRumEvents = [];\n    request.RumEvents.forEach(function (e) {\n        return serializedRumEvents.push(serializeEvent(e));\n    });\n    var serializedRequest = {\n        BatchId: request.BatchId,\n        AppMonitorDetails: request.AppMonitorDetails,\n        UserDetails: request.UserDetails,\n        RumEvents: serializedRumEvents\n    };\n    return serializedRequest;\n};\nvar serializeEvent = function (event) {\n    return {\n        id: event.id,\n        // Dates must be converted to timestamps before serialization.\n        timestamp: Math.round(event.timestamp.getTime() / 1000),\n        type: event.type,\n        metadata: event.metadata,\n        details: event.details\n    };\n};\nvar hashAndEncode = function (payload) { return __awaiter(void 0, void 0, void 0, function () {\n    var sha256, _a;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                sha256 = new Sha256();\n                sha256.update(payload);\n                _a = toHex;\n                return [4 /*yield*/, sha256.digest()];\n            case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()]).toLowerCase()];\n        }\n    });\n}); };\n","import { HttpResponse } from '@aws-sdk/protocol-http';\nimport { buildQueryString } from '@aws-sdk/querystring-builder';\nvar BeaconHttpHandler = /** @class */ (function () {\n    function BeaconHttpHandler() {\n    }\n    BeaconHttpHandler.prototype.handle = function (request) {\n        var queued = this.sendBeacon(request);\n        return new Promise(function (resolve, reject) {\n            if (queued) {\n                resolve({\n                    response: new HttpResponse({ statusCode: 200 })\n                });\n            }\n            else {\n                reject();\n            }\n        });\n    };\n    BeaconHttpHandler.prototype.sendBeacon = function (signedRequest) {\n        var path = signedRequest.path;\n        if (signedRequest.query) {\n            var queryString = buildQueryString(signedRequest.query);\n            if (queryString) {\n                path += \"?\".concat(queryString);\n            }\n        }\n        var port = signedRequest.port;\n        var url = \"\".concat(signedRequest.protocol, \"//\").concat(signedRequest.hostname).concat(port ? \":\".concat(port) : '').concat(path);\n        return navigator.sendBeacon(url, signedRequest.body);\n    };\n    return BeaconHttpHandler;\n}());\nexport { BeaconHttpHandler };\n","import { HttpResponse } from '@aws-sdk/protocol-http';\nimport { buildQueryString } from '@aws-sdk/querystring-builder';\nimport { requestTimeout } from './request-timeout';\nvar FetchHttpHandler = /** @class */ (function () {\n    function FetchHttpHandler(_a) {\n        var _b = _a === void 0 ? {} : _a, fetchFunction = _b.fetchFunction, requestTimeout = _b.requestTimeout;\n        this.requestTimeout = requestTimeout;\n        this.fetchFunction = fetchFunction;\n    }\n    FetchHttpHandler.prototype.destroy = function () {\n        // Do nothing. TLS and HTTP/2 connection pooling is handled by the browser.\n    };\n    FetchHttpHandler.prototype.handle = function (request, _a) {\n        var _b = _a === void 0 ? {} : _a, abortSignal = _b.abortSignal;\n        var requestTimeoutInMs = this.requestTimeout;\n        // if the request was already aborted, prevent doing extra work\n        if (abortSignal === null || abortSignal === void 0 ? void 0 : abortSignal.aborted) {\n            var abortError = new Error('Request aborted');\n            abortError.name = 'AbortError';\n            return Promise.reject(abortError);\n        }\n        var path = request.path;\n        if (request.query) {\n            var queryString = buildQueryString(request.query);\n            if (queryString) {\n                path += \"?\".concat(queryString);\n            }\n        }\n        var port = request.port, method = request.method;\n        var url = \"\".concat(request.protocol, \"//\").concat(request.hostname).concat(port ? \":\".concat(port) : '').concat(path);\n        // Request constructor doesn't allow GET/HEAD request with body\n        // ref: https://github.com/whatwg/fetch/issues/551\n        var body = method === 'GET' || method === 'HEAD' ? undefined : request.body;\n        var requestOptions = {\n            body: body,\n            headers: new Headers(request.headers),\n            method: method\n        };\n        // some browsers support abort signal\n        if (typeof AbortController !== 'undefined') {\n            requestOptions.signal = abortSignal;\n        }\n        var fetchRequest = new Request(url, requestOptions);\n        var raceOfPromises = [\n            this.fetchFunction.apply(window, [fetchRequest]).then(function (response) {\n                var fetchHeaders = response.headers;\n                var transformedHeaders = {};\n                for (var _i = 0, _a = fetchHeaders.entries(); _i < _a.length; _i++) {\n                    var pair = _a[_i];\n                    transformedHeaders[pair[0]] = pair[1];\n                }\n                var hasReadableStream = response.body !== undefined;\n                // Return the response with buffered body\n                if (!hasReadableStream) {\n                    return response.blob().then(function (body) { return ({\n                        response: new HttpResponse({\n                            headers: transformedHeaders,\n                            statusCode: response.status,\n                            body: body\n                        })\n                    }); });\n                }\n                // Return the response with streaming body\n                return {\n                    response: new HttpResponse({\n                        headers: transformedHeaders,\n                        statusCode: response.status,\n                        body: response.body\n                    })\n                };\n            }),\n            requestTimeout(requestTimeoutInMs)\n        ];\n        if (abortSignal) {\n            raceOfPromises.push(new Promise(function (resolve, reject) {\n                abortSignal.onabort = function () {\n                    var abortError = new Error('Request aborted');\n                    abortError.name = 'AbortError';\n                    reject(abortError);\n                };\n            }));\n        }\n        return Promise.race(raceOfPromises);\n    };\n    return FetchHttpHandler;\n}());\nexport { FetchHttpHandler };\n","export var requestTimeout = function (timeoutInMs) {\n    if (timeoutInMs === void 0) { timeoutInMs = 0; }\n    return new Promise(function (resolve, reject) {\n        if (timeoutInMs) {\n            setTimeout(function () {\n                var timeoutError = new Error(\"Request did not complete within \".concat(timeoutInMs, \" ms\"));\n                timeoutError.name = 'TimeoutError';\n                reject(timeoutError);\n            }, timeoutInMs);\n        }\n    });\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/**\n * An HttpHandler which wraps other HttpHandlers to retry requests.\n *\n * Requests will be retried if (1) there is an error (e.g., with the network or\n * credentials) and the promise rejects, or (2) the response status is not 2xx.\n */\nvar RetryHttpHandler = /** @class */ (function () {\n    function RetryHttpHandler(handler, retries, backoff) {\n        if (backoff === void 0) { backoff = function (n) { return n * 2000; }; }\n        this.isStatusCode2xx = function (statusCode) {\n            return statusCode >= 200 && statusCode < 300;\n        };\n        this.handler = handler;\n        this.retries = retries;\n        this.backoff = backoff;\n    }\n    RetryHttpHandler.prototype.handle = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            var retriesLeft, response, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        retriesLeft = this.retries;\n                        _a.label = 1;\n                    case 1:\n                        if (!true) return [3 /*break*/, 7];\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 6]);\n                        return [4 /*yield*/, this.handler.handle(request)];\n                    case 3:\n                        response = _a.sent();\n                        if (this.isStatusCode2xx(response.response.statusCode)) {\n                            return [2 /*return*/, response];\n                        }\n                        throw new Error(\"\".concat(response.response.statusCode));\n                    case 4:\n                        e_1 = _a.sent();\n                        if (!retriesLeft) {\n                            throw e_1;\n                        }\n                        retriesLeft--;\n                        return [4 /*yield*/, this.sleep(this.backoff(this.retries - retriesLeft))];\n                    case 5:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 6: return [3 /*break*/, 1];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    RetryHttpHandler.prototype.sleep = function (milliseconds) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        return setTimeout(resolve, milliseconds);\n                    })];\n            });\n        });\n    };\n    return RetryHttpHandler;\n}());\nexport { RetryHttpHandler };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { DataPlaneClient } from './DataPlaneClient';\nimport { BeaconHttpHandler } from './BeaconHttpHandler';\nimport { FetchHttpHandler } from './FetchHttpHandler';\nimport { v4 } from 'uuid';\nimport { RetryHttpHandler } from './RetryHttpHandler';\nvar NO_CRED_MSG = 'CWR: Cannot dispatch; no AWS credentials.';\nvar Dispatch = /** @class */ (function () {\n    function Dispatch(region, endpoint, eventCache, config) {\n        var _this = this;\n        /**\n         * Send meta data and events to the AWS RUM data plane service via fetch.\n         */\n        this.dispatchFetch = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (this.doRequest()) {\n                    return [2 /*return*/, this.rum\n                            .sendFetch(this.createRequest())\n                            .catch(this.handleReject)];\n                }\n                return [2 /*return*/];\n            });\n        }); };\n        /**\n         * Send meta data and events to the AWS RUM data plane service via beacon.\n         */\n        this.dispatchBeacon = function () { return __awaiter(_this, void 0, void 0, function () {\n            var request_1;\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (this.doRequest()) {\n                    request_1 = this.createRequest();\n                    return [2 /*return*/, this.rum\n                            .sendBeacon(request_1)\n                            .catch(function () { return _this.rum.sendFetch(request_1); })];\n                }\n                return [2 /*return*/];\n            });\n        }); };\n        /**\n         * Send meta data and events to the AWS RUM data plane service via fetch.\n         *\n         * Returns undefined on failure.\n         */\n        this.dispatchFetchFailSilent = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // eslint-disable-next-line @typescript-eslint/no-empty-function\n                return [2 /*return*/, this.dispatchFetch().catch(function () { })];\n            });\n        }); };\n        /**\n         * Send meta data and events to the AWS RUM data plane service via beacon.\n         *\n         * Returns undefined on failure.\n         */\n        this.dispatchBeaconFailSilent = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // eslint-disable-next-line @typescript-eslint/no-empty-function\n                return [2 /*return*/, this.dispatchBeacon().catch(function () { })];\n            });\n        }); };\n        this.handleReject = function (e) {\n            // The handler has run out of retries. We adhere to our convention to\n            // fail safe by disabling dispatch. This ensures that we will not\n            // continue to attempt requests when the problem is not recoverable.\n            _this.disable();\n            throw e;\n        };\n        /**\n         * The default method for creating data plane service clients.\n         *\n         * @param endpoint Service endpoint.\n         * @param region  Service region.\n         * @param credentials AWS credentials.\n         */\n        this.defaultClientBuilder = function (endpoint, region, credentials) {\n            return new DataPlaneClient({\n                fetchRequestHandler: new RetryHttpHandler(new FetchHttpHandler({\n                    fetchFunction: _this.config.fetchFunction\n                }), _this.config.retries),\n                beaconRequestHandler: new BeaconHttpHandler(),\n                endpoint: endpoint,\n                region: region,\n                credentials: credentials\n            });\n        };\n        this.region = region;\n        this.endpoint = endpoint;\n        this.eventCache = eventCache;\n        this.enabled = true;\n        this.buildClient = config.clientBuilder || this.defaultClientBuilder;\n        this.config = config;\n        this.startDispatchTimer();\n        this.rum = {\n            sendFetch: function () {\n                return Promise.reject(new Error(NO_CRED_MSG));\n            },\n            sendBeacon: function () {\n                return Promise.reject(new Error(NO_CRED_MSG));\n            }\n        };\n    }\n    /**\n     * Dispatch will send requests to data plane.\n     */\n    Dispatch.prototype.enable = function () {\n        this.enabled = true;\n        this.startDispatchTimer();\n    };\n    /**\n     * Dispatch will not send requests to data plane.\n     */\n    Dispatch.prototype.disable = function () {\n        this.stopDispatchTimer();\n        this.enabled = false;\n    };\n    /**\n     * Set the authentication token that will be used to authenticate with the\n     * data plane service (AWS auth).\n     *\n     * @param credentials A set of AWS credentials from the application's authflow.\n     */\n    Dispatch.prototype.setAwsCredentials = function (credentialProvider) {\n        this.rum = this.buildClient(this.endpoint, this.region, credentialProvider);\n        if (typeof credentialProvider === 'function') {\n            // In case a beacon in the first dispatch, we must pre-fetch credentials into a cookie so there is no delay\n            // to fetch credentials while the page is closing.\n            credentialProvider();\n        }\n    };\n    /**\n     * Automatically dispatch cached events.\n     */\n    Dispatch.prototype.startDispatchTimer = function () {\n        document.addEventListener('visibilitychange', \n        // The page is moving to the hidden state, which means it may be\n        // unloaded. The sendBeacon API would typically be used in this\n        // case. However, ad-blockers prevent sendBeacon from functioning.\n        // We therefore have two bad options:\n        //\n        // (1) Use sendBeacon. Data will be lost when ad blockers are\n        //     used and the page loses visibility\n        // (2) Use fetch. Data will be lost when the page is unloaded\n        //     before fetch completes\n        //\n        // A third option is to send both, however this would increase\n        // bandwitch and require deduping server side.\n        this.config.useBeacon\n            ? this.dispatchBeaconFailSilent\n            : this.dispatchFetchFailSilent);\n        // Using 'pagehide' is redundant most of the time (visibilitychange is\n        // always fired before pagehide) but older browsers may support\n        // 'pagehide' but not 'visibilitychange'.\n        document.addEventListener('pagehide', this.config.useBeacon\n            ? this.dispatchBeaconFailSilent\n            : this.dispatchFetchFailSilent);\n        if (this.config.dispatchInterval <= 0 || this.dispatchTimerId) {\n            return;\n        }\n        this.dispatchTimerId = window.setInterval(this.dispatchFetchFailSilent, this.config.dispatchInterval);\n    };\n    /**\n     * Stop automatically dispatching cached events.\n     */\n    Dispatch.prototype.stopDispatchTimer = function () {\n        document.removeEventListener('visibilitychange', this.config.useBeacon\n            ? this.dispatchBeaconFailSilent\n            : this.dispatchFetchFailSilent);\n        document.removeEventListener('pagehide', this.config.useBeacon\n            ? this.dispatchBeaconFailSilent\n            : this.dispatchFetchFailSilent);\n        if (this.dispatchTimerId) {\n            window.clearInterval(this.dispatchTimerId);\n            this.dispatchTimerId = undefined;\n        }\n    };\n    Dispatch.prototype.doRequest = function () {\n        return this.enabled && this.eventCache.hasEvents();\n    };\n    Dispatch.prototype.createRequest = function () {\n        return {\n            BatchId: v4(),\n            AppMonitorDetails: this.eventCache.getAppMonitorDetails(),\n            UserDetails: this.eventCache.getUserDetails(),\n            RumEvents: this.eventCache.getEventBatch()\n        };\n    };\n    return Dispatch;\n}());\nexport { Dispatch };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { InternalPlugin } from '../InternalPlugin';\nimport { PERFORMANCE_NAVIGATION_EVENT_TYPE } from '../utils/constant';\nexport var NAVIGATION_EVENT_PLUGIN_ID = 'navigation';\nvar NAVIGATION = 'navigation';\nvar LOAD = 'load';\n/**\n * This plugin records performance timing events generated during every page load/re-load activity.\n * Paint, resource and performance event types make sense only if all or none are included.\n * For RUM, these event types are inter-dependent. So they are recorded under one plugin.\n */\nvar NavigationPlugin = /** @class */ (function (_super) {\n    __extends(NavigationPlugin, _super);\n    function NavigationPlugin() {\n        var _this = _super.call(this, NAVIGATION_EVENT_PLUGIN_ID) || this;\n        /**\n         * Use Navigation timing Level 1 for all browsers by default -\n         * https://developer.mozilla.org/en-US/docs/Web/API/Performance/timing\n         *\n         * If browser provides support, use Navigation Timing Level 2 specification -\n         * https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming\n         *\n         * Only the current document resource is included in the performance timeline;\n         * there is only one PerformanceNavigationTiming object in the performance timeline.\n         * https://www.w3.org/TR/navigation-timing-2/\n         */\n        _this.eventListener = function () {\n            if (performance.getEntriesByType(NAVIGATION).length === 0) {\n                _this.performanceNavigationEventHandlerTimingLevel1();\n            }\n            else {\n                var navigationObserver = new PerformanceObserver(function (list) {\n                    list.getEntries().forEach(function (event) {\n                        if (event.entryType === NAVIGATION) {\n                            _this.performanceNavigationEventHandlerTimingLevel2(event);\n                        }\n                    });\n                });\n                navigationObserver.observe({\n                    entryTypes: [NAVIGATION]\n                });\n            }\n        };\n        /**\n         * W3C specification: https://www.w3.org/TR/navigation-timing/#sec-navigation-timing-interface\n         */\n        _this.performanceNavigationEventHandlerTimingLevel1 = function () {\n            var recordNavigation = function () {\n                var _a;\n                var entryData = performance.timing;\n                var origin = entryData.navigationStart;\n                var eventDataNavigationTimingLevel1 = {\n                    version: '1.0.0',\n                    initiatorType: 'navigation',\n                    startTime: 0,\n                    unloadEventStart: entryData.unloadEventStart > 0\n                        ? entryData.unloadEventStart - origin\n                        : 0,\n                    promptForUnload: entryData.unloadEventEnd - entryData.unloadEventStart,\n                    redirectStart: entryData.redirectStart > 0\n                        ? entryData.redirectStart - origin\n                        : 0,\n                    redirectTime: entryData.redirectEnd - entryData.redirectStart,\n                    fetchStart: entryData.fetchStart > 0\n                        ? entryData.fetchStart - origin\n                        : 0,\n                    domainLookupStart: entryData.domainLookupStart > 0\n                        ? entryData.domainLookupStart - origin\n                        : 0,\n                    dns: entryData.domainLookupEnd - entryData.domainLookupStart,\n                    connectStart: entryData.connectStart > 0\n                        ? entryData.connectStart - origin\n                        : 0,\n                    connect: entryData.connectEnd - entryData.connectStart,\n                    secureConnectionStart: entryData.secureConnectionStart > 0\n                        ? entryData.secureConnectionStart - origin\n                        : 0,\n                    tlsTime: entryData.secureConnectionStart > 0\n                        ? entryData.connectEnd - entryData.secureConnectionStart\n                        : 0,\n                    requestStart: entryData.requestStart > 0\n                        ? entryData.requestStart - origin\n                        : 0,\n                    timeToFirstByte: entryData.responseStart - entryData.requestStart,\n                    responseStart: entryData.responseStart > 0\n                        ? entryData.responseStart - origin\n                        : 0,\n                    responseTime: entryData.responseStart > 0\n                        ? entryData.responseEnd - entryData.responseStart\n                        : 0,\n                    domInteractive: entryData.domInteractive > 0\n                        ? entryData.domInteractive - origin\n                        : 0,\n                    domContentLoadedEventStart: entryData.domContentLoadedEventStart > 0\n                        ? entryData.domContentLoadedEventStart - origin\n                        : 0,\n                    domContentLoaded: entryData.domContentLoadedEventEnd -\n                        entryData.domContentLoadedEventStart,\n                    domComplete: entryData.domComplete > 0\n                        ? entryData.domComplete - origin\n                        : 0,\n                    domProcessingTime: entryData.loadEventStart - entryData.responseEnd,\n                    loadEventStart: entryData.loadEventStart > 0\n                        ? entryData.loadEventStart - origin\n                        : 0,\n                    loadEventTime: entryData.loadEventEnd - entryData.loadEventStart,\n                    duration: entryData.loadEventEnd - entryData.navigationStart,\n                    navigationTimingLevel: 1\n                };\n                if ((_a = _this.context) === null || _a === void 0 ? void 0 : _a.record) {\n                    _this.context.record(PERFORMANCE_NAVIGATION_EVENT_TYPE, eventDataNavigationTimingLevel1);\n                }\n            };\n            // Timeout is required for loadEventEnd to complete\n            setTimeout(recordNavigation, 0);\n        };\n        /**\n         * W3C specification: https://www.w3.org/TR/navigation-timing-2/#bib-navigation-timing\n         */\n        _this.performanceNavigationEventHandlerTimingLevel2 = function (entryData) {\n            var _a;\n            var eventDataNavigationTimingLevel2 = {\n                version: '1.0.0',\n                initiatorType: entryData.initiatorType,\n                navigationType: entryData.type,\n                startTime: entryData.startTime,\n                unloadEventStart: entryData.unloadEventStart,\n                promptForUnload: entryData.unloadEventEnd - entryData.unloadEventStart,\n                redirectCount: entryData.redirectCount,\n                redirectStart: entryData.redirectStart,\n                redirectTime: entryData.redirectEnd - entryData.redirectStart,\n                workerStart: entryData.workerStart,\n                workerTime: entryData.workerStart > 0\n                    ? entryData.fetchStart - entryData.workerStart\n                    : 0,\n                fetchStart: entryData.fetchStart,\n                domainLookupStart: entryData.domainLookupStart,\n                dns: entryData.domainLookupEnd - entryData.domainLookupStart,\n                nextHopProtocol: entryData.nextHopProtocol,\n                connectStart: entryData.connectStart,\n                connect: entryData.connectEnd - entryData.connectStart,\n                secureConnectionStart: entryData.secureConnectionStart,\n                tlsTime: entryData.secureConnectionStart > 0\n                    ? entryData.connectEnd - entryData.secureConnectionStart\n                    : 0,\n                requestStart: entryData.requestStart,\n                timeToFirstByte: entryData.responseStart - entryData.requestStart,\n                responseStart: entryData.responseStart,\n                responseTime: entryData.responseStart > 0\n                    ? entryData.responseEnd - entryData.responseStart\n                    : 0,\n                domInteractive: entryData.domInteractive,\n                domContentLoadedEventStart: entryData.domContentLoadedEventStart,\n                domContentLoaded: entryData.domContentLoadedEventEnd -\n                    entryData.domContentLoadedEventStart,\n                domComplete: entryData.domComplete,\n                domProcessingTime: entryData.loadEventStart - entryData.responseEnd,\n                loadEventStart: entryData.loadEventStart,\n                loadEventTime: entryData.loadEventEnd - entryData.loadEventStart,\n                duration: entryData.duration,\n                headerSize: entryData.transferSize - entryData.encodedBodySize,\n                transferSize: entryData.transferSize,\n                compressionRatio: entryData.encodedBodySize > 0\n                    ? entryData.decodedBodySize / entryData.encodedBodySize\n                    : 0,\n                navigationTimingLevel: 2\n            };\n            if ((_a = _this.context) === null || _a === void 0 ? void 0 : _a.record) {\n                _this.context.record(PERFORMANCE_NAVIGATION_EVENT_TYPE, eventDataNavigationTimingLevel2);\n            }\n        };\n        return _this;\n    }\n    NavigationPlugin.prototype.enable = function () {\n        if (this.enabled) {\n            return;\n        }\n        this.enabled = true;\n        window.addEventListener(LOAD, this.eventListener);\n    };\n    NavigationPlugin.prototype.disable = function () {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabled = false;\n        if (this.eventListener) {\n            window.removeEventListener(LOAD, this.eventListener);\n        }\n    };\n    /**\n     * Use the loadEventEnd field from window.performance to check if the website\n     * has loaded already.\n     *\n     * @returns boolean\n     */\n    NavigationPlugin.prototype.hasTheWindowLoadEventFired = function () {\n        if (window.performance &&\n            window.performance.getEntriesByType(NAVIGATION).length) {\n            var navData = window.performance.getEntriesByType(NAVIGATION)[0];\n            return Boolean(navData.loadEventEnd);\n        }\n        return false;\n    };\n    /**\n     * loadEventEnd is populated as 0 if the web page has not loaded completely, even though LOAD has been fired.\n     * As a result, if loadEventEnd is populated, we can ignore eventListener and record the data directly.\n     * On the other hand, if not, we have to use eventListener to initializes PerformanceObserver.\n     * PerformanceObserver will act as a second check for the final load timings.\n     */\n    NavigationPlugin.prototype.onload = function () {\n        if (this.enabled) {\n            if (this.hasTheWindowLoadEventFired()) {\n                var navData = window.performance.getEntriesByType(NAVIGATION)[0];\n                this.performanceNavigationEventHandlerTimingLevel2(navData);\n            }\n            else {\n                window.addEventListener(LOAD, this.eventListener);\n            }\n        }\n    };\n    return NavigationPlugin;\n}(InternalPlugin));\nexport { NavigationPlugin };\n","import { getRandomValues } from '../../utils/random';\n// All one-byte hex strings from 0x00 to 0xff.\nexport var byteToHex = [];\nfor (var i = 0; i < 256; i++) {\n    byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\nexport var X_AMZN_TRACE_ID = 'X-Amzn-Trace-Id';\nexport var defaultConfig = {\n    logicalServiceName: 'rum.aws.amazon.com',\n    urlsToInclude: [/.*/],\n    urlsToExclude: [\n        // Cognito endpoints https://docs.aws.amazon.com/general/latest/gr/cognito_identity.html\n        /cognito\\-identity\\.([^\\.]*\\.)?amazonaws\\.com/,\n        // STS endpoints https://docs.aws.amazon.com/general/latest/gr/sts.html\n        /sts\\.([^\\.]*\\.)?amazonaws\\.com/\n    ],\n    stackTraceLength: 200,\n    recordAllRequests: false,\n    addXRayTraceIdHeader: false\n};\nexport var is4xx = function (status) {\n    return Math.floor(status / 100) === 4;\n};\nexport var is5xx = function (status) {\n    return Math.floor(status / 100) === 5;\n};\nexport var is429 = function (status) {\n    return status === 429;\n};\nexport var isUrlAllowed = function (url, config) {\n    var include = config.urlsToInclude.some(function (urlPattern) {\n        return urlPattern.test(url);\n    });\n    var exclude = config.urlsToExclude.some(function (urlPattern) {\n        return urlPattern.test(url);\n    });\n    return include && !exclude;\n};\n/**\n * Returns the current time, in floating point seconds in epoch time, accurate to milliseconds.\n */\nexport var epochTime = function () {\n    return Date.now() / 1000;\n};\nexport var createXRayTraceEventHttp = function (input, init, traced) {\n    var http = { request: {} };\n    http.request.method = (init === null || init === void 0 ? void 0 : init.method) ? init.method : 'GET';\n    http.request.traced = traced;\n    http.request.url = resourceToUrlString(input);\n    return http;\n};\nexport var createXRayTraceEvent = function (name, startTime, http) {\n    var traceEvent = {\n        version: '1.0.0',\n        name: name,\n        origin: 'AWS::RUM::AppMonitor',\n        id: generateSegmentId(),\n        start_time: startTime,\n        trace_id: generateTraceId(),\n        end_time: undefined,\n        subsegments: [],\n        in_progress: false\n    };\n    if (http) {\n        traceEvent.http = http;\n    }\n    return traceEvent;\n};\nexport var createXRaySubsegment = function (name, startTime, http) {\n    var subsegment = {\n        id: generateSegmentId(),\n        name: name,\n        start_time: startTime,\n        end_time: undefined,\n        in_progress: false,\n        namespace: name.endsWith('amazonaws.com') ? 'aws' : 'remote'\n    };\n    if (http) {\n        subsegment.http = http;\n    }\n    return subsegment;\n};\nexport var requestInfoToHostname = function (request) {\n    try {\n        if (request.hostname) {\n            return request.hostname;\n        }\n        else if (request.url) {\n            return new URL(request.url).hostname;\n        }\n        else {\n            return new URL(request.toString()).hostname;\n        }\n    }\n    catch (e) {\n        // The URL could not be parsed. This library's convention is to fail\n        // silently to limit the risk of impacting the application being\n        // monitored.  We will use the hostname of the current page instead.\n        return \"\".concat(window.location.hostname, \".chrome\");\n    }\n};\nexport var addAmznTraceIdHeaderToInit = function (init, traceId, segmentId) {\n    if (!init.headers) {\n        init.headers = {};\n    }\n    init.headers[X_AMZN_TRACE_ID] = getAmznTraceIdHeaderValue(traceId, segmentId);\n};\nexport var addAmznTraceIdHeaderToHeaders = function (headers, traceId, segmentId) {\n    headers.set(X_AMZN_TRACE_ID, getAmznTraceIdHeaderValue(traceId, segmentId));\n};\nexport var getAmznTraceIdHeaderValue = function (traceId, segmentId) {\n    return 'Root=' + traceId + ';Parent=' + segmentId + ';Sampled=1';\n};\n/**\n * Extracts an URL string from the fetch resource parameter.\n */\nexport var resourceToUrlString = function (resource) {\n    return resource.url\n        ? resource.url\n        : resource.toString();\n};\n/**\n * Generate a globally unique trace ID.\n *\n * See https://docs.aws.amazon.com/xray/latest/devguide/xray-api-sendingdata.html\n *\n * @returns a trace id with the form '1-[unix epoch time in 8 hex digits]-[random in 24 hex digits]'\n */\nvar generateTraceId = function () {\n    return \"1-\".concat(hexTime(), \"-\").concat(guid());\n};\n/**\n * Generate a segment ID that is unique within a trace.\n *\n * See https://docs.aws.amazon.com/xray/latest/devguide/xray-api-sendingdata.html\n *\n * @returns a segment id, which is 16 random hex digits\n */\nvar generateSegmentId = function () {\n    var randomBytes = new Uint8Array(8);\n    getRandomValues(randomBytes);\n    return uint8ArrayToHexString(randomBytes);\n};\nvar hexTime = function () {\n    return Math.floor(Date.now() / 1000).toString(16);\n};\nvar guid = function () {\n    var randomBytes = new Uint8Array(12);\n    getRandomValues(randomBytes);\n    return uint8ArrayToHexString(randomBytes);\n};\nvar uint8ArrayToHexString = function (bytes) {\n    var hexString = '';\n    // eslint-disable-next-line @typescript-eslint/prefer-for-of\n    for (var i = 0; i < bytes.length; i++) {\n        hexString += byteToHex[bytes[i]];\n    }\n    return hexString;\n};\n","var e,n,t,r,i,a=-1,o=function(e){addEventListener(\"pageshow\",(function(n){n.persisted&&(a=n.timeStamp,e(n))}),!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0]},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),r=\"navigate\";return a>=0?r=\"back-forward-cache\":t&&(r=document.prerendering||u()>0?\"prerender\":t.type.replace(/_/g,\"-\")),{name:e,value:void 0===n?-1:n,rating:\"good\",delta:0,entries:[],id:\"v3-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){n(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},t||{})),r}}catch(e){}},d=function(e,n){var t=function t(r){\"pagehide\"!==r.type&&\"hidden\"!==document.visibilityState||(e(r),n&&(removeEventListener(\"visibilitychange\",t,!0),removeEventListener(\"pagehide\",t,!0)))};addEventListener(\"visibilitychange\",t,!0),addEventListener(\"pagehide\",t,!0)},l=function(e,n,t,r){var i,a;return function(o){n.value>=0&&(o||r)&&((a=n.value-(i||0))||void 0===i)&&(i=n.value,n.delta=a,n.rating=function(e,n){return e>n[1]?\"poor\":e>n[0]?\"needs-improvement\":\"good\"}(n.value,t),e(n))}},p=-1,v=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},m=function(){d((function(e){var n=e.timeStamp;p=n}),!0)},h=function(){return p<0&&(p=v(),m(),o((function(){setTimeout((function(){p=v(),m()}),0)}))),{get firstHiddenTime(){return p}}},g=function(e,n){n=n||{};var t,r=[1800,3e3],i=h(),a=f(\"FCP\"),c=function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(p&&p.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=e.startTime-u(),a.entries.push(e),t(!0)))}))},d=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName(\"first-contentful-paint\")[0],p=d?null:s(\"paint\",c);(d||p)&&(t=l(e,a,r,n.reportAllChanges),d&&c([d]),o((function(i){a=f(\"FCP\"),t=l(e,a,r,n.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-i.timeStamp,t(!0)}))}))})))},y=!1,T=-1,E=function(e,n){n=n||{};var t=[.1,.25];y||(g((function(e){T=e.value})),y=!0);var r,i=function(n){T>-1&&e(n)},a=f(\"CLS\",0),c=0,u=[],p=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=u[0],t=u[u.length-1];c&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(c+=e.value,u.push(e)):(c=e.value,u=[e]),c>a.value&&(a.value=c,a.entries=u,r())}}))},v=s(\"layout-shift\",p);v&&(r=l(i,a,t,n.reportAllChanges),d((function(){p(v.takeRecords()),r(!0)})),o((function(){c=0,T=-1,a=f(\"CLS\",0),r=l(i,a,t,n.reportAllChanges)})))},w={passive:!0,capture:!0},C=new Date,L=function(r,i){e||(e=i,n=r,t=new Date,A(removeEventListener),S())},S=function(){if(n>=0&&n<t-C){var i={entryType:\"first-input\",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+n};r.forEach((function(e){e(i)})),r=[]}},b=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,n){var t=function(){L(e,n),i()},r=function(){i()},i=function(){removeEventListener(\"pointerup\",t,w),removeEventListener(\"pointercancel\",r,w)};addEventListener(\"pointerup\",t,w),addEventListener(\"pointercancel\",r,w)}(n,e):L(n,e)}},A=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(n){return e(n,b,w)}))},F=function(t,i){i=i||{};var a,c=[100,300],u=h(),p=f(\"FID\"),v=function(e){e.startTime<u.firstHiddenTime&&(p.value=e.processingStart-e.startTime,p.entries.push(e),a(!0))},m=function(e){e.forEach(v)},g=s(\"first-input\",m);a=l(t,p,c,i.reportAllChanges),g&&d((function(){m(g.takeRecords()),g.disconnect()}),!0),g&&o((function(){var o;p=f(\"FID\"),a=l(t,p,c,i.reportAllChanges),r=[],n=-1,e=null,A(addEventListener),o=v,r.push(o),S()}))},I=0,P=1/0,k=0,M=function(e){e.forEach((function(e){e.interactionId&&(P=Math.min(P,e.interactionId),k=Math.max(k,e.interactionId),I=k?(k-P)/7+1:0)}))},B=function(){return i?I:performance.interactionCount||0},D=function(){\"interactionCount\"in performance||i||(i=s(\"event\",M,{type:\"event\",buffered:!0,durationThreshold:0}))},N=0,R=function(){return B()-N},q=[],x={},H=function(e){var n=q[q.length-1],t=x[e.interactionId];if(t||q.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};x[r.id]=r,q.push(r)}q.sort((function(e,n){return n.latency-e.latency})),q.splice(10).forEach((function(e){delete x[e.id]}))}},O=function(e,n){n=n||{};var t=[200,500];D();var r,i=f(\"INP\"),a=function(e){e.forEach((function(e){(e.interactionId&&H(e),\"first-input\"===e.entryType)&&(!q.some((function(n){return n.entries.some((function(n){return e.duration===n.duration&&e.startTime===n.startTime}))}))&&H(e))}));var n,t=(n=Math.min(q.length-1,Math.floor(R()/50)),q[n]);t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())},c=s(\"event\",a,{durationThreshold:n.durationThreshold||40});r=l(e,i,t,n.reportAllChanges),c&&(c.observe({type:\"first-input\",buffered:!0}),d((function(){a(c.takeRecords()),i.value<0&&R()>0&&(i.value=0,i.entries=[]),r(!0)})),o((function(){q=[],N=B(),i=f(\"INP\"),r=l(e,i,t,n.reportAllChanges)})))},j={},_=function(e,n){n=n||{};var t,r=[2500,4e3],i=h(),a=f(\"LCP\"),c=function(e){var n=e[e.length-1];if(n){var r=n.startTime-u();r<i.firstHiddenTime&&(a.value=r,a.entries=[n],t())}},p=s(\"largest-contentful-paint\",c);if(p){t=l(e,a,r,n.reportAllChanges);var v=function(){j[a.id]||(c(p.takeRecords()),p.disconnect(),j[a.id]=!0,t(!0))};[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,v,{once:!0,capture:!0})})),d(v,!0),o((function(i){a=f(\"LCP\"),t=l(e,a,r,n.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-i.timeStamp,j[a.id]=!0,t(!0)}))}))}))}},z=function e(n){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e(n)}),!0):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(n)}),!0):setTimeout(n,0)},G=function(e,n){n=n||{};var t=[800,1800],r=f(\"TTFB\"),i=l(e,r,t,n.reportAllChanges);z((function(){var a=c();if(a){if(r.value=Math.max(a.responseStart-u(),0),r.value<0||r.value>performance.now())return;r.entries=[a],i(!0),o((function(){r=f(\"TTFB\",0),(i=l(e,r,t,n.reportAllChanges))(!0)}))}}))};export{E as getCLS,g as getFCP,F as getFID,O as getINP,_ as getLCP,G as getTTFB,E as onCLS,g as onFCP,F as onFID,O as onINP,_ as onLCP,G as onTTFB};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { InternalPlugin } from '../InternalPlugin';\nimport { getResourceFileType, ResourceType, shuffle } from '../../utils/common-utils';\nimport { PERFORMANCE_RESOURCE_EVENT_TYPE } from '../utils/constant';\nexport var RESOURCE_EVENT_PLUGIN_ID = 'resource';\nvar RESOURCE = 'resource';\nvar LOAD = 'load';\nexport var defaultConfig = {\n    eventLimit: 10,\n    recordAllTypes: [ResourceType.DOCUMENT, ResourceType.SCRIPT],\n    sampleTypes: [\n        ResourceType.STYLESHEET,\n        ResourceType.IMAGE,\n        ResourceType.FONT,\n        ResourceType.OTHER\n    ]\n};\n/**\n * This plugin records resource performance timing events generated during every page load/re-load.\n */\nvar ResourcePlugin = /** @class */ (function (_super) {\n    __extends(ResourcePlugin, _super);\n    function ResourcePlugin(config) {\n        var _this = _super.call(this, RESOURCE_EVENT_PLUGIN_ID) || this;\n        _this.resourceEventListener = function (event) {\n            var recordAll = [];\n            var sample = [];\n            var eventCount = 0;\n            var resourceObserver = new PerformanceObserver(function (list) {\n                list.getEntries()\n                    .filter(function (e) { return e.entryType === RESOURCE; })\n                    .forEach(function (event) {\n                    // Out of n resource events, x events are recorded using Observer API\n                    var type = getResourceFileType(event.name);\n                    if (_this.config.recordAllTypes.includes(type)) {\n                        recordAll.push(event);\n                    }\n                    else if (_this.config.sampleTypes.includes(type)) {\n                        sample.push(event);\n                    }\n                });\n            });\n            resourceObserver.observe({\n                entryTypes: [RESOURCE]\n            });\n            // Remaining (n-x) resource events are recorded using getEntriesByType API.\n            // Note: IE11 browser does not support Performance Observer API. Handle the failure gracefully\n            var events = performance.getEntriesByType(RESOURCE);\n            if (events !== undefined && events.length > 0) {\n                events.forEach(function (event) {\n                    var type = getResourceFileType(event.name);\n                    if (_this.config.recordAllTypes.includes(type)) {\n                        recordAll.push(event);\n                    }\n                    else if (_this.config.sampleTypes.includes(type)) {\n                        sample.push(event);\n                    }\n                });\n            }\n            // Record events for resources in recordAllTypes\n            shuffle(recordAll);\n            while (recordAll.length > 0 && eventCount < _this.config.eventLimit) {\n                _this.recordResourceEvent(recordAll.pop());\n                eventCount++;\n            }\n            // Record events sampled from resources in sample\n            shuffle(sample);\n            while (sample.length > 0 && eventCount < _this.config.eventLimit) {\n                _this.recordResourceEvent(sample.pop());\n                eventCount++;\n            }\n        };\n        _this.recordResourceEvent = function (entryData) {\n            var _a;\n            // Ignore monitoring beacons.\n            if (new URL(entryData.name).host ===\n                _this.context.config.endpointUrl.host) {\n                return;\n            }\n            if ((_a = _this.context) === null || _a === void 0 ? void 0 : _a.record) {\n                var eventData = {\n                    version: '1.0.0',\n                    initiatorType: entryData.initiatorType,\n                    duration: entryData.duration,\n                    fileType: getResourceFileType(entryData.name),\n                    transferSize: entryData.transferSize\n                };\n                if (_this.context.config.recordResourceUrl) {\n                    eventData.targetUrl = entryData.name;\n                }\n                _this.context.record(PERFORMANCE_RESOURCE_EVENT_TYPE, eventData);\n            }\n        };\n        _this.config = __assign(__assign({}, defaultConfig), config);\n        return _this;\n    }\n    ResourcePlugin.prototype.enable = function () {\n        if (this.enabled) {\n            return;\n        }\n        this.enabled = true;\n        window.addEventListener(LOAD, this.resourceEventListener);\n    };\n    ResourcePlugin.prototype.disable = function () {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabled = false;\n        if (this.resourceEventListener) {\n            window.removeEventListener(LOAD, this.resourceEventListener);\n        }\n    };\n    ResourcePlugin.prototype.onload = function () {\n        window.addEventListener(LOAD, this.resourceEventListener);\n    };\n    return ResourcePlugin;\n}(InternalPlugin));\nexport { ResourcePlugin };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { InternalPlugin } from '../InternalPlugin';\nimport { getCLS, getFID, getLCP } from 'web-vitals';\nimport { LCP_EVENT_TYPE, FID_EVENT_TYPE, CLS_EVENT_TYPE } from '../utils/constant';\nexport var WEB_VITAL_EVENT_PLUGIN_ID = 'web-vitals';\nvar WebVitalsPlugin = /** @class */ (function (_super) {\n    __extends(WebVitalsPlugin, _super);\n    function WebVitalsPlugin() {\n        return _super.call(this, WEB_VITAL_EVENT_PLUGIN_ID) || this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    WebVitalsPlugin.prototype.enable = function () { };\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    WebVitalsPlugin.prototype.disable = function () { };\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    WebVitalsPlugin.prototype.configure = function (config) { };\n    WebVitalsPlugin.prototype.getWebVitalData = function (webVitalData, eventType) {\n        var _a;\n        var webVitalEvent = {\n            version: '1.0.0',\n            value: webVitalData.value\n        };\n        (_a = this.context) === null || _a === void 0 ? void 0 : _a.record(eventType, webVitalEvent);\n    };\n    WebVitalsPlugin.prototype.onload = function () {\n        var _this = this;\n        getLCP(function (data) { return _this.getWebVitalData(data, LCP_EVENT_TYPE); });\n        getFID(function (data) { return _this.getWebVitalData(data, FID_EVENT_TYPE); });\n        getCLS(function (data) { return _this.getWebVitalData(data, CLS_EVENT_TYPE); });\n    };\n    return WebVitalsPlugin;\n}(InternalPlugin));\nexport { WebVitalsPlugin };\n","export var getRandomValues = function (holder) {\n    if (crypto) {\n        return crypto.getRandomValues(holder);\n    }\n    else if (msCrypto) {\n        return msCrypto.getRandomValues(holder);\n    }\n    else {\n        throw new Error('No crypto library found.');\n    }\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { Authentication } from \"../dispatch/Authentication\";\nimport { EnhancedAuthentication } from \"../dispatch/EnhancedAuthentication\";\nimport { PluginManager } from \"../plugins/PluginManager\";\nimport { DomEventPlugin, DOM_EVENT_PLUGIN_ID, } from \"../plugins/event-plugins/DomEventPlugin\";\nimport { JsErrorPlugin, JS_ERROR_EVENT_PLUGIN_ID, } from \"../plugins/event-plugins/JsErrorPlugin\";\nimport { EventCache } from \"../event-cache/EventCache\";\nimport { Dispatch } from \"../dispatch/Dispatch\";\nimport { NavigationPlugin } from \"../plugins/event-plugins/NavigationPlugin\";\nimport { ResourcePlugin } from \"../plugins/event-plugins/ResourcePlugin\";\nimport { WebVitalsPlugin } from \"../plugins/event-plugins/WebVitalsPlugin\";\nimport { XhrPlugin } from \"../plugins/event-plugins/XhrPlugin\";\nimport { FetchPlugin } from \"../plugins/event-plugins/FetchPlugin\";\nimport { PageViewPlugin } from \"../plugins/event-plugins/PageViewPlugin\";\nvar DEFAULT_REGION = \"us-west-2\";\nvar DEFAULT_ENDPOINT = \"https://dataplane.rum.\".concat(DEFAULT_REGION, \".amazonaws.com\");\nexport var TelemetryEnum;\n(function (TelemetryEnum) {\n    TelemetryEnum[\"Errors\"] = \"errors\";\n    TelemetryEnum[\"Performance\"] = \"performance\";\n    TelemetryEnum[\"Interaction\"] = \"interaction\";\n    TelemetryEnum[\"Http\"] = \"http\";\n})(TelemetryEnum || (TelemetryEnum = {}));\nexport var PageIdFormatEnum;\n(function (PageIdFormatEnum) {\n    PageIdFormatEnum[\"Path\"] = \"PATH\";\n    PageIdFormatEnum[\"Hash\"] = \"HASH\";\n    PageIdFormatEnum[\"PathAndHash\"] = \"PATH_AND_HASH\";\n})(PageIdFormatEnum || (PageIdFormatEnum = {}));\nexport var defaultCookieAttributes = function () {\n    return {\n        unique: false,\n        domain: \"\".concat(window.location.hostname, \".chrome\"),\n        path: \"/\",\n        sameSite: \"Strict\",\n        secure: true,\n    };\n};\nexport var defaultConfig = function (cookieAttributes) {\n    return {\n        allowCookies: false,\n        batchLimit: 100,\n        cookieAttributes: cookieAttributes,\n        sessionAttributes: {},\n        disableAutoPageView: false,\n        dispatchInterval: 5 * 1000,\n        enableRumClient: true,\n        enableXRay: false,\n        endpoint: DEFAULT_ENDPOINT,\n        endpointUrl: new URL(DEFAULT_ENDPOINT),\n        eventCacheSize: 200,\n        eventPluginsToLoad: [],\n        pageIdFormat: PageIdFormatEnum.Path,\n        pagesToExclude: [],\n        pagesToInclude: [/.*/],\n        recordResourceUrl: true,\n        retries: 2,\n        routeChangeComplete: 100,\n        routeChangeTimeout: 10000,\n        sessionEventLimit: 200,\n        sessionLengthSeconds: 60 * 30,\n        sessionSampleRate: 1,\n        telemetries: [],\n        useBeacon: true,\n        userIdRetentionDays: 30,\n    };\n};\n/**\n * An orchestrator which (1) initializes cwr components and (2) provides the API for the application to interact\n * with the RUM web client. Depending on how the RUM web client was loaded, this class may be called directly, or\n * indirectly through the CommandQueue:\n * - If the client was loaded by an HTML script tag, Orchestration is called indirectly through the CommandQueue.\n * - If the client was loaded as an NPM module, Orchestration is called directly by the application.\n */\nvar Orchestration = /** @class */ (function () {\n    /**\n     * Instantiate the CloudWatch RUM web client and begin monitoring the\n     * application.\n     *\n     * This constructor may throw a TypeError if not correctly configured. In\n     * production code, wrap calls to this constructor in a try/catch block so\n     * that this does not impact the application.\n     *\n     * @param applicationId A globally unique identifier for the CloudWatch RUM\n     * app monitor which monitors your application.\n     * @param applicationVersion Your application's semantic version. If you do\n     * not wish to use this field then add any placeholder, such as '0.0.0'.\n     * @param region The AWS region of the app monitor. For example, 'us-east-1'\n     * or 'eu-west-2'.\n     * @param configCookieAttributes\n     * @param partialConfig An application-specific configuration for the web\n     * client.\n     */\n    function Orchestration(applicationId, applicationVersion, region, _a) {\n        if (_a === void 0) { _a = {}; }\n        var configCookieAttributes = _a.cookieAttributes, partialConfig = __rest(_a, [\"cookieAttributes\"]);\n        if (typeof region === \"undefined\") {\n            // Provide temporary backwards compatability if the region was not provided by the loader. This will be\n            // removed when internal users have migrated to the new signature.\n            region = \"us-west-2\";\n        }\n        var cookieAttributes = __assign(__assign({}, defaultCookieAttributes()), configCookieAttributes);\n        this.config = __assign(__assign({ fetchFunction: fetch }, defaultConfig(cookieAttributes)), partialConfig);\n        this.config.endpoint = this.getDataPlaneEndpoint(region, partialConfig);\n        // If the URL is not formatted correctly, a TypeError will be thrown.\n        // This breaks our convention to fail-safe here for the sake of\n        // debugging. It is expected that the application has wrapped the call\n        // to the constructor in a try/catch block, as is done in the example\n        // code.\n        this.config.endpointUrl = new URL(this.config.endpoint);\n        this.eventCache = this.initEventCache(applicationId, applicationVersion);\n        this.dispatchManager = this.initDispatch(region);\n        this.pluginManager = this.initPluginManager(applicationId, applicationVersion);\n        if (this.config.enableRumClient) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    /**\n     * Set the credential provider that will be used to authenticate with the\n     * data plane service (AWS auth).\n     *\n     * @param credentials A provider of AWS credentials.\n     */\n    Orchestration.prototype.setAwsCredentials = function (credentials) {\n        this.dispatchManager.setAwsCredentials(credentials);\n    };\n    /**\n     * Set custom session attributes to add them to all event metadata.\n     *\n     * @param payload object containing custom attribute data in the form of key, value pairs\n     */\n    Orchestration.prototype.addSessionAttributes = function (sessionAttributes) {\n        this.eventCache.addSessionAttributes(sessionAttributes);\n    };\n    /**\n     * Add a telemetry plugin.\n     *\n     * @param plugin A plugin which adheres to the RUM web client's plugin interface.\n     */\n    Orchestration.prototype.addPlugin = function (plugin) {\n        this.pluginManager.addPlugin(plugin);\n    };\n    /**\n     * Force the cllient to immediately dispatch events to the collector.\n     */\n    Orchestration.prototype.dispatch = function () {\n        this.dispatchManager.dispatchFetch();\n    };\n    /**\n     * Force the cllient to immediately dispatch events to the collector using a beacon.\n     */\n    Orchestration.prototype.dispatchBeacon = function () {\n        this.dispatchManager.dispatchBeacon();\n    };\n    /**\n     * When enabled, the client records and dispatches events.\n     */\n    Orchestration.prototype.enable = function () {\n        this.eventCache.enable();\n        this.pluginManager.enable();\n        this.dispatchManager.enable();\n    };\n    /**\n     * When disabled, the client does not record or dispatch events.\n     */\n    Orchestration.prototype.disable = function () {\n        this.dispatchManager.disable();\n        this.pluginManager.disable();\n        this.eventCache.disable();\n    };\n    /**\n     * @param allow when {@code false}, the RUM web client will not store cookies or use localstorage.\n     */\n    Orchestration.prototype.allowCookies = function (allow) {\n        this.config.allowCookies = allow;\n    };\n    /**\n     * Update the current page the user is interacting with.\n     *\n     * @param payload Can be string or PageAttributes object\n     * If string, payload is pageId (The unique ID for the page within the application).\n     * If PageAttributes, payload contains pageId as well as page attributes to include in events with pageId\n     */\n    Orchestration.prototype.recordPageView = function (payload) {\n        this.eventCache.recordPageView(payload);\n    };\n    /**\n     * Record an error using the JS error plugin.\n     *\n     * @param error An ErrorEvent, Error or primitive.\n     */\n    Orchestration.prototype.recordError = function (error) {\n        this.pluginManager.record(JS_ERROR_EVENT_PLUGIN_ID, error);\n    };\n    /**\n     * Update DOM plugin to record the (additional) provided DOM events.\n     *\n     * @param events\n     */\n    Orchestration.prototype.registerDomEvents = function (events) {\n        this.pluginManager.updatePlugin(DOM_EVENT_PLUGIN_ID, events);\n    };\n    Orchestration.prototype.initEventCache = function (applicationId, applicationVersion) {\n        return new EventCache({\n            id: applicationId,\n            version: applicationVersion,\n        }, this.config);\n    };\n    Orchestration.prototype.initDispatch = function (region) {\n        var dispatch = new Dispatch(region, this.config.endpointUrl, this.eventCache, this.config);\n        if (this.config.identityPoolId && this.config.guestRoleArn) {\n            dispatch.setAwsCredentials(new Authentication(this.config).ChainAnonymousCredentialsProvider);\n        }\n        else if (this.config.identityPoolId) {\n            dispatch.setAwsCredentials(new EnhancedAuthentication(this.config)\n                .ChainAnonymousCredentialsProvider);\n        }\n        return dispatch;\n    };\n    Orchestration.prototype.initPluginManager = function (applicationId, applicationVersion) {\n        var BUILTIN_PLUGINS = this.constructBuiltinPlugins();\n        var PLUGINS = __spreadArray(__spreadArray([], BUILTIN_PLUGINS, true), this.config.eventPluginsToLoad, true);\n        var pluginContext = {\n            applicationId: applicationId,\n            applicationVersion: applicationVersion,\n            config: this.config,\n            record: this.eventCache.recordEvent,\n            recordPageView: this.eventCache.recordPageView,\n            getSession: this.eventCache.getSession,\n        };\n        // Initialize PluginManager\n        var pluginManager = new PluginManager(pluginContext);\n        // Load page view plugin\n        if (!this.config.disableAutoPageView) {\n            pluginManager.addPlugin(new PageViewPlugin());\n        }\n        // Load plugins\n        PLUGINS.forEach(function (p) {\n            pluginManager.addPlugin(p);\n        });\n        return pluginManager;\n    };\n    Orchestration.prototype.constructBuiltinPlugins = function () {\n        var plugins = [];\n        var functor = this.telemetryFunctor();\n        this.config.telemetries.forEach(function (type) {\n            if (typeof type === \"string\" && functor[type.toLowerCase()]) {\n                plugins = __spreadArray(__spreadArray([], plugins, true), functor[type.toLowerCase()]({}), true);\n            }\n            else if (Array.isArray(type) &&\n                functor[type[0].toLowerCase()]) {\n                plugins = __spreadArray(__spreadArray([], plugins, true), functor[type[0].toLowerCase()](type[1]), true);\n            }\n        });\n        return plugins;\n    };\n    Orchestration.prototype.getDataPlaneEndpoint = function (region, partialConfig) {\n        return partialConfig.endpoint\n            ? partialConfig.endpoint\n            : DEFAULT_ENDPOINT.replace(DEFAULT_REGION, region);\n    };\n    /**\n     * Returns a functor which maps data collection categories to\n     * instantiated plugins.\n     */\n    Orchestration.prototype.telemetryFunctor = function () {\n        var _a;\n        return _a = {},\n            _a[TelemetryEnum.Errors] = function (config) {\n                return [new JsErrorPlugin(config)];\n            },\n            _a[TelemetryEnum.Performance] = function (config) {\n                return [\n                    new NavigationPlugin(),\n                    new ResourcePlugin(config),\n                    new WebVitalsPlugin(),\n                ];\n            },\n            _a[TelemetryEnum.Interaction] = function (config) {\n                return [new DomEventPlugin(config)];\n            },\n            _a[TelemetryEnum.Http] = function (config) {\n                return [new XhrPlugin(config), new FetchPlugin(config)];\n            },\n            _a;\n    };\n    return Orchestration;\n}());\nexport { Orchestration };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar XhrError = /** @class */ (function (_super) {\n    __extends(XhrError, _super);\n    function XhrError(message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = 'XMLHttpRequest error';\n        return _this;\n    }\n    return XhrError;\n}(Error));\nexport { XhrError };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { MonkeyPatched } from '../MonkeyPatched';\nimport { defaultConfig, epochTime, createXRayTraceEvent, getAmznTraceIdHeaderValue, X_AMZN_TRACE_ID, isUrlAllowed, createXRaySubsegment, requestInfoToHostname, is429, is4xx, is5xx } from '../utils/http-utils';\nimport { XhrError } from '../../errors/XhrError';\nimport { HTTP_EVENT_TYPE, XRAY_TRACE_EVENT_TYPE } from '../utils/constant';\nimport { errorEventToJsErrorEvent } from '../utils/js-error-utils';\nexport var XHR_PLUGIN_ID = 'xhr';\n/**\n * A plugin which initiates and records AWS X-Ray traces for XML HTTP requests (XMLHttpRequest).\n *\n * The XMLHttpRequest API is monkey patched using shimmer so all calls to XMLHttpRequest are intercepted. Only calls\n * to URLs which are on the allowlist and are not on the denylist are traced and recorded.\n *\n * The XHR events we use (i.e., onload, onerror, onabort, ontimeout) are only\n * supported by newer browsers. If we want to support older browsers we will\n * need to detect older browsers and use the onreadystatechange event.\n *\n * For example, the following sequence events occur for each case:\n *\n * Case 1: Request succeeds events\n * -------------------------------\n * readystatechange (state = 1, status = 0)\n * loadstart\n * readystatechange (state = 2, status = 200)\n * readystatechange (state = 3, status = 200)\n * readystatechange (state = 4, status = 200)\n * load\n * loadend\n *\n * Case 2: Request fails because of invalid domain or CORS failure\n * -------------------------------\n * readystatechange (state = 1, status = 0)\n * loadstart\n * readystatechange (state = 4, status = 0)\n * error\n * loadend\n *\n * Case 3: Request fails because of timeout\n * -------------------------------\n * readystatechange (state = 1, status = 0)\n * loadstart\n * readystatechange (state = 4, status = 0)\n * timeout\n * loadend\n *\n * Case 4: Request is aborted\n * -------------------------------\n * readystatechange (state = 1, status = 0)\n * loadstart\n * readystatechange (state = 2, status = 200)\n * readystatechange (state = 3, status = 200)\n * readystatechange (state = 4, status = 0)\n * abort\n * loadend\n *\n * See\n * - https://xhr.spec.whatwg.org/#event-handlers.\n * - https://xhr.spec.whatwg.org/#events\n */\nvar XhrPlugin = /** @class */ (function (_super) {\n    __extends(XhrPlugin, _super);\n    function XhrPlugin(config) {\n        var _this = _super.call(this, XHR_PLUGIN_ID) || this;\n        _this.addXRayTraceIdHeader = function () {\n            return _this.config.addXRayTraceIdHeader;\n        };\n        _this.isTracingEnabled = function () {\n            return _this.context.config.enableXRay;\n        };\n        _this.isSessionRecorded = function () {\n            var _a;\n            return ((_a = _this.context.getSession()) === null || _a === void 0 ? void 0 : _a.record) || false;\n        };\n        _this.handleXhrLoadEvent = function (e) {\n            var xhr = e.target;\n            var xhrDetails = _this.xhrMap.get(xhr);\n            if (xhrDetails) {\n                var endTimee = epochTime();\n                xhrDetails.trace.end_time = endTimee;\n                xhrDetails.trace.subsegments[0].end_time = endTimee;\n                xhrDetails.trace.subsegments[0].http.response = {\n                    status: xhr.status\n                };\n                if (is429(xhr.status)) {\n                    xhrDetails.trace.subsegments[0].throttle = true;\n                    xhrDetails.trace.throttle = true;\n                }\n                else if (is4xx(xhr.status)) {\n                    xhrDetails.trace.subsegments[0].error = true;\n                    xhrDetails.trace.error = true;\n                }\n                else if (is5xx(xhr.status)) {\n                    xhrDetails.trace.subsegments[0].fault = true;\n                    xhrDetails.trace.fault = true;\n                }\n                var clStr = xhr.getResponseHeader('Content-Length');\n                var cl = clStr ? parseInt(clStr, 10) : NaN;\n                if (!isNaN(cl)) {\n                    xhrDetails.trace.subsegments[0].http.response.content_length = cl;\n                }\n                _this.recordTraceEvent(xhrDetails.trace);\n                _this.recordHttpEventWithResponse(xhrDetails, xhr);\n            }\n        };\n        _this.handleXhrErrorEvent = function (e) {\n            var xhr = e.target;\n            var xhrDetails = _this.xhrMap.get(xhr);\n            var errorName = 'XMLHttpRequest error';\n            var errorMessage = xhr.statusText\n                ? xhr.status.toString() + ': ' + xhr.statusText\n                : xhr.status.toString();\n            if (xhrDetails) {\n                var endTime = epochTime();\n                // Guidance from X-Ray documentation:\n                // > Record errors in segments when your application returns an\n                // > error to the user, and in subsegments when a downstream call\n                // > returns an error.\n                xhrDetails.trace.fault = true;\n                xhrDetails.trace.end_time = endTime;\n                xhrDetails.trace.subsegments[0].end_time = endTime;\n                xhrDetails.trace.subsegments[0].fault = true;\n                xhrDetails.trace.subsegments[0].cause = {\n                    exceptions: [\n                        {\n                            type: errorName,\n                            message: errorMessage\n                        }\n                    ]\n                };\n                _this.recordTraceEvent(xhrDetails.trace);\n                _this.recordHttpEventWithError(xhrDetails, new XhrError(errorMessage));\n            }\n        };\n        _this.handleXhrAbortEvent = function (e) {\n            var xhr = e.target;\n            var xhrDetails = _this.xhrMap.get(xhr);\n            var errorName = 'XMLHttpRequest abort';\n            _this.handleXhrDetailsOnError(xhrDetails, errorName);\n        };\n        _this.handleXhrTimeoutEvent = function (e) {\n            var xhr = e.target;\n            var xhrDetails = _this.xhrMap.get(xhr);\n            var errorName = 'XMLHttpRequest timeout';\n            _this.handleXhrDetailsOnError(xhrDetails, errorName);\n        };\n        _this.initializeTrace = function (xhrDetails) {\n            var startTime = epochTime();\n            xhrDetails.trace = createXRayTraceEvent(_this.config.logicalServiceName, startTime);\n            xhrDetails.trace.subsegments.push(createXRaySubsegment(requestInfoToHostname(xhrDetails.url), startTime, {\n                request: {\n                    method: xhrDetails.method,\n                    url: xhrDetails.url,\n                    traced: true\n                }\n            }));\n        };\n        _this.sendWrapper = function () {\n            var self = _this;\n            return function (original) {\n                return function () {\n                    var xhrDetails = self.xhrMap.get(this);\n                    if (xhrDetails) {\n                        this.addEventListener('load', self.handleXhrLoadEvent);\n                        this.addEventListener('error', self.handleXhrErrorEvent);\n                        this.addEventListener('abort', self.handleXhrAbortEvent);\n                        this.addEventListener('timeout', self.handleXhrTimeoutEvent);\n                        self.initializeTrace(xhrDetails);\n                        if (self.isTracingEnabled() &&\n                            self.addXRayTraceIdHeader() &&\n                            self.isSessionRecorded()) {\n                            this.setRequestHeader(X_AMZN_TRACE_ID, getAmznTraceIdHeaderValue(xhrDetails.trace.trace_id, xhrDetails.trace.subsegments[0].id));\n                        }\n                    }\n                    return original.apply(this, arguments);\n                };\n            };\n        };\n        _this.openWrapper = function () {\n            var self = _this;\n            return function (original) {\n                return function (method, url, async) {\n                    if (isUrlAllowed(url, self.config)) {\n                        self.xhrMap.set(this, { url: url, method: method, async: async });\n                    }\n                    return original.apply(this, arguments);\n                };\n            };\n        };\n        _this.config = __assign(__assign({}, defaultConfig), config);\n        _this.xhrMap = new Map();\n        return _this;\n    }\n    XhrPlugin.prototype.onload = function () {\n        this.enable();\n    };\n    Object.defineProperty(XhrPlugin.prototype, \"patches\", {\n        get: function () {\n            return [\n                {\n                    nodule: XMLHttpRequest.prototype,\n                    name: 'send',\n                    wrapper: this.sendWrapper\n                },\n                {\n                    nodule: XMLHttpRequest.prototype,\n                    name: 'open',\n                    wrapper: this.openWrapper\n                }\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XhrPlugin.prototype.handleXhrDetailsOnError = function (xhrDetails, errorName) {\n        if (xhrDetails) {\n            var endTime = epochTime();\n            xhrDetails.trace.end_time = endTime;\n            xhrDetails.trace.subsegments[0].end_time = endTime;\n            xhrDetails.trace.subsegments[0].error = true;\n            xhrDetails.trace.subsegments[0].cause = {\n                exceptions: [\n                    {\n                        type: errorName\n                    }\n                ]\n            };\n            this.recordTraceEvent(xhrDetails.trace);\n            this.recordHttpEventWithError(xhrDetails, errorName);\n        }\n    };\n    XhrPlugin.prototype.statusOk = function (status) {\n        return status >= 200 && status < 300;\n    };\n    XhrPlugin.prototype.recordHttpEventWithResponse = function (xhrDetails, xhr) {\n        if (this.config.recordAllRequests || !this.statusOk(xhr.status)) {\n            this.context.record(HTTP_EVENT_TYPE, {\n                version: '1.0.0',\n                request: { method: xhrDetails.method, url: xhrDetails.url },\n                response: { status: xhr.status, statusText: xhr.statusText }\n            });\n        }\n    };\n    XhrPlugin.prototype.recordHttpEventWithError = function (xhrDetails, error) {\n        var httpEvent = {\n            version: '1.0.0',\n            request: { method: xhrDetails.method, url: xhrDetails.url }\n        };\n        httpEvent.error = errorEventToJsErrorEvent({\n            type: 'error',\n            error: error\n        }, this.config.stackTraceLength);\n        this.context.record(HTTP_EVENT_TYPE, httpEvent);\n    };\n    XhrPlugin.prototype.recordTraceEvent = function (trace) {\n        if (this.isTracingEnabled() && this.isSessionRecorded()) {\n            this.context.record(XRAY_TRACE_EVENT_TYPE, trace);\n        }\n    };\n    return XhrPlugin;\n}(MonkeyPatched));\nexport { XhrPlugin };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { MonkeyPatched } from '../MonkeyPatched';\nimport { defaultConfig, epochTime, createXRayTraceEvent, addAmznTraceIdHeaderToInit, createXRayTraceEventHttp, isUrlAllowed, createXRaySubsegment, requestInfoToHostname, addAmznTraceIdHeaderToHeaders, resourceToUrlString, is429, is4xx, is5xx } from '../utils/http-utils';\nimport { HTTP_EVENT_TYPE, XRAY_TRACE_EVENT_TYPE } from '../utils/constant';\nimport { errorEventToJsErrorEvent, isErrorPrimitive } from '../utils/js-error-utils';\nexport var FETCH_PLUGIN_ID = 'fetch';\n/**\n * A plugin which initiates and records AWS X-Ray traces for fetch HTTP requests.\n *\n * The fetch API is monkey patched using shimmer so all calls to fetch are intercepted. Only calls to URLs which are\n * on the allowlist and are not on the denylist are traced and recorded.\n */\nvar FetchPlugin = /** @class */ (function (_super) {\n    __extends(FetchPlugin, _super);\n    function FetchPlugin(config) {\n        var _this = _super.call(this, FETCH_PLUGIN_ID) || this;\n        _this.isTracingEnabled = function () {\n            return _this.context.config.enableXRay;\n        };\n        _this.isSessionRecorded = function () {\n            var _a;\n            return ((_a = _this.context.getSession()) === null || _a === void 0 ? void 0 : _a.record) || false;\n        };\n        _this.beginTrace = function (input, init, argsArray) {\n            var startTime = epochTime();\n            var http = createXRayTraceEventHttp(input, init, true);\n            var xRayTraceEvent = createXRayTraceEvent(_this.config.logicalServiceName, startTime);\n            var subsegment = createXRaySubsegment(requestInfoToHostname(input), startTime, http);\n            xRayTraceEvent.subsegments.push(subsegment);\n            if (_this.config.addXRayTraceIdHeader) {\n                _this.addXRayTraceIdHeader(input, init, argsArray, xRayTraceEvent);\n            }\n            return xRayTraceEvent;\n        };\n        _this.addXRayTraceIdHeader = function (input, init, argsArray, xRayTraceEvent) {\n            if (input.headers) {\n                return addAmznTraceIdHeaderToHeaders(input.headers, xRayTraceEvent.trace_id, xRayTraceEvent.subsegments[0].id);\n            }\n            if (!init) {\n                init = {};\n                [].push.call(argsArray, init);\n            }\n            addAmznTraceIdHeaderToInit(init, xRayTraceEvent.trace_id, xRayTraceEvent.subsegments[0].id);\n        };\n        _this.endTrace = function (xRayTraceEvent, response, error) {\n            if (xRayTraceEvent) {\n                var endTime = epochTime();\n                xRayTraceEvent.subsegments[0].end_time = endTime;\n                xRayTraceEvent.end_time = endTime;\n                if (response) {\n                    xRayTraceEvent.subsegments[0].http.response = {\n                        status: response.status\n                    };\n                    if (is429(response.status)) {\n                        xRayTraceEvent.subsegments[0].throttle = true;\n                        xRayTraceEvent.throttle = true;\n                    }\n                    else if (is4xx(response.status)) {\n                        xRayTraceEvent.subsegments[0].error = true;\n                        xRayTraceEvent.error = true;\n                    }\n                    else if (is5xx(response.status)) {\n                        xRayTraceEvent.subsegments[0].fault = true;\n                        xRayTraceEvent.fault = true;\n                    }\n                    var clStr = response.headers.get('Content-Length');\n                    var cl = clStr ? parseInt(clStr, 10) : NaN;\n                    if (!isNaN(cl)) {\n                        xRayTraceEvent.subsegments[0].http.response.content_length = cl;\n                    }\n                }\n                if (error) {\n                    // Guidance from X-Ray documentation:\n                    // > Record errors in segments when your application returns an\n                    // > error to the user, and in subsegments when a downstream call\n                    // > returns an error.\n                    xRayTraceEvent.fault = true;\n                    xRayTraceEvent.subsegments[0].fault = true;\n                    if (error instanceof Object) {\n                        _this.appendErrorCauseFromObject(xRayTraceEvent.subsegments[0], error);\n                    }\n                    else if (isErrorPrimitive(error)) {\n                        _this.appendErrorCauseFromPrimitive(xRayTraceEvent.subsegments[0], error.toString());\n                    }\n                }\n                _this.context.record(XRAY_TRACE_EVENT_TYPE, xRayTraceEvent);\n            }\n        };\n        _this.createHttpEvent = function (input, init) {\n            return {\n                version: '1.0.0',\n                request: {\n                    url: resourceToUrlString(input),\n                    method: (init === null || init === void 0 ? void 0 : init.method) ? init.method : 'GET'\n                }\n            };\n        };\n        _this.recordHttpEventWithResponse = function (httpEvent, response) {\n            if (_this.config.recordAllRequests || !response.ok) {\n                httpEvent.response = {\n                    status: response.status,\n                    statusText: response.statusText\n                };\n                _this.context.record(HTTP_EVENT_TYPE, httpEvent);\n            }\n        };\n        _this.recordHttpEventWithError = function (httpEvent, error) {\n            httpEvent.error = errorEventToJsErrorEvent({\n                type: 'error',\n                error: error\n            }, _this.config.stackTraceLength);\n            _this.context.record(HTTP_EVENT_TYPE, httpEvent);\n        };\n        _this.fetch = function (original, thisArg, argsArray, input, init) {\n            var httpEvent = _this.createHttpEvent(input, init);\n            var trace;\n            if (!isUrlAllowed(resourceToUrlString(input), _this.config)) {\n                return original.apply(thisArg, argsArray);\n            }\n            if (_this.isTracingEnabled() && _this.isSessionRecorded()) {\n                trace = _this.beginTrace(input, init, argsArray);\n            }\n            return original\n                .apply(thisArg, argsArray)\n                .then(function (response) {\n                _this.endTrace(trace, response, undefined);\n                _this.recordHttpEventWithResponse(httpEvent, response);\n                return response;\n            })\n                .catch(function (error) {\n                _this.endTrace(trace, undefined, error);\n                _this.recordHttpEventWithError(httpEvent, error);\n                throw error;\n            });\n        };\n        _this.fetchWrapper = function () {\n            var self = _this;\n            return function (original) {\n                return function (input, init) {\n                    return self.fetch(original, this, arguments, input, init);\n                };\n            };\n        };\n        _this.config = __assign(__assign({}, defaultConfig), config);\n        return _this;\n    }\n    Object.defineProperty(FetchPlugin.prototype, \"patches\", {\n        get: function () {\n            return [\n                {\n                    nodule: window,\n                    name: 'fetch',\n                    wrapper: this.fetchWrapper\n                }\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FetchPlugin.prototype.onload = function () {\n        this.enable();\n    };\n    FetchPlugin.prototype.appendErrorCauseFromPrimitive = function (subsegment, error) {\n        subsegment.cause = {\n            exceptions: [\n                {\n                    type: error\n                }\n            ]\n        };\n    };\n    FetchPlugin.prototype.appendErrorCauseFromObject = function (subsegment, error) {\n        subsegment.cause = {\n            exceptions: [\n                {\n                    type: error.name,\n                    message: error.message\n                }\n            ]\n        };\n    };\n    return FetchPlugin;\n}(MonkeyPatched));\nexport { FetchPlugin };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { PageIdFormatEnum } from '../../orchestration/Orchestration';\nimport { MonkeyPatched } from '../MonkeyPatched';\nexport var PAGE_EVENT_PLUGIN_ID = 'page-view';\n/**\n * A plugin which records page view transitions.\n *\n * When a session is initialized, the PageManager records the landing page. When\n * subsequent pages are viewed, this plugin updates the page.\n */\nvar PageViewPlugin = /** @class */ (function (_super) {\n    __extends(PageViewPlugin, _super);\n    function PageViewPlugin() {\n        var _this = _super.call(this, PAGE_EVENT_PLUGIN_ID) || this;\n        _this.pushState = function () {\n            var self = _this;\n            return function (original) {\n                return function (data, title, url) {\n                    var retVal = original.apply(this, arguments);\n                    self.recordPageView();\n                    return retVal;\n                };\n            };\n        };\n        _this.replaceState = function () {\n            var self = _this;\n            return function (original) {\n                return function (data, title, url) {\n                    var retVal = original.apply(this, arguments);\n                    self.recordPageView();\n                    return retVal;\n                };\n            };\n        };\n        _this.popstateListener = function (event) {\n            _this.recordPageView();\n        };\n        _this.recordPageView = function () {\n            _this.context.recordPageView(_this.createIdForCurrentPage());\n        };\n        _this.enable();\n        return _this;\n    }\n    PageViewPlugin.prototype.onload = function () {\n        this.addListener();\n        this.recordPageView();\n    };\n    Object.defineProperty(PageViewPlugin.prototype, \"patches\", {\n        get: function () {\n            return [\n                {\n                    nodule: History.prototype,\n                    name: 'pushState',\n                    wrapper: this.pushState\n                },\n                {\n                    nodule: History.prototype,\n                    name: 'replaceState',\n                    wrapper: this.replaceState\n                }\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PageViewPlugin.prototype.addListener = function () {\n        // popstate will fire under the following conditions:\n        // (1) The history back, forward or go APIs are used\n        // (2) The URI's fragment (hash) changes\n        window.addEventListener('popstate', this.popstateListener);\n    };\n    PageViewPlugin.prototype.createIdForCurrentPage = function () {\n        var path = window.location.pathname;\n        var hash = window.location.hash;\n        switch (this.context.config.pageIdFormat) {\n            case PageIdFormatEnum.PathAndHash:\n                if (path && hash) {\n                    return path + hash;\n                }\n                else if (path) {\n                    return path;\n                }\n                else if (hash) {\n                    return hash;\n                }\n                return '';\n            case PageIdFormatEnum.Hash:\n                return hash ? hash : '';\n            case PageIdFormatEnum.Path:\n            default:\n                return path ? path : '';\n        }\n    };\n    return PageViewPlugin;\n}(MonkeyPatched));\nexport { PageViewPlugin };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar fetchRemoteConfig = function (remoteUrl) { return __awaiter(void 0, void 0, void 0, function () {\n    var response, err_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 3, , 4]);\n                return [4 /*yield*/, fetch(remoteUrl, {\n                        mode: 'cors',\n                        method: 'GET',\n                        headers: {\n                            Accept: 'application/json',\n                            'Content-Type': 'application/json'\n                        }\n                    })];\n            case 1:\n                response = _a.sent();\n                return [4 /*yield*/, response.json()];\n            case 2: return [2 /*return*/, _a.sent()];\n            case 3:\n                err_1 = _a.sent();\n                throw new Error(\"CWR: Failed to load remote config: \".concat(err_1));\n            case 4: return [2 /*return*/];\n        }\n    });\n}); };\nexport var getRemoteConfig = function (awsRum) { return __awaiter(void 0, void 0, void 0, function () {\n    var config, jsonConfig;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                config = {};\n                jsonConfig = {};\n                if (!(awsRum.u !== undefined)) return [3 /*break*/, 2];\n                return [4 /*yield*/, fetchRemoteConfig(awsRum.u)];\n            case 1:\n                jsonConfig = _a.sent();\n                // When a config option is in both the snippet config and the remote\n                // config, use the value in the snippet.\n                config = __assign(__assign({}, jsonConfig.clientConfig), awsRum.c);\n                return [3 /*break*/, 3];\n            case 2:\n                if (awsRum.c !== undefined) {\n                    config = awsRum.c;\n                }\n                _a.label = 3;\n            case 3: return [2 /*return*/, config];\n        }\n    });\n}); };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Orchestration } from './orchestration/Orchestration';\nimport { getRemoteConfig } from './remote-config/remote-config';\n/**\n * A utility for collecting telemetry from JavaScript applications.\n *\n * For example:\n * - Pages visited (user workflow)\n * - Page load time\n * - DOM events\n */\nvar CommandQueue = /** @class */ (function () {\n    function CommandQueue() {\n        var _this = this;\n        this.commandHandlerMap = {\n            setAwsCredentials: function (payload) {\n                _this.orchestration.setAwsCredentials(payload);\n            },\n            addSessionAttributes: function (payload) {\n                _this.orchestration.addSessionAttributes(payload);\n            },\n            recordPageView: function (payload) {\n                _this.orchestration.recordPageView(payload);\n            },\n            recordError: function (payload) {\n                _this.orchestration.recordError(payload);\n            },\n            registerDomEvents: function (payload) {\n                _this.orchestration.registerDomEvents(payload);\n            },\n            dispatch: function () {\n                _this.orchestration.dispatch();\n            },\n            dispatchBeacon: function () {\n                _this.orchestration.dispatchBeacon();\n            },\n            enable: function () {\n                _this.orchestration.enable();\n            },\n            disable: function () {\n                _this.orchestration.disable();\n            },\n            allowCookies: function (allow) {\n                if (typeof allow === 'boolean') {\n                    _this.orchestration.allowCookies(allow);\n                }\n                else {\n                    throw new Error('IncorrectParametersException');\n                }\n            }\n        };\n    }\n    /**\n     * Initialize CWR and execute commands which were queued before initialization.\n     *\n     * If a URL for a remote config file has been provided, the remote config\n     * will first be fetched. If this attempt fails, an exception will be thrown\n     * and CWR will not be initialized.\n     *\n     * @param awsRum The CWR application information and configuration options.\n     */\n    CommandQueue.prototype.init = function (awsRum) {\n        return __awaiter(this, void 0, void 0, function () {\n            var config;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(awsRum.u !== undefined)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, getRemoteConfig(awsRum)];\n                    case 1:\n                        config = _a.sent();\n                        awsRum.c = config;\n                        this.initCwr(awsRum);\n                        return [3 /*break*/, 3];\n                    case 2:\n                        // Ther is no remote config file -- initialize CWR immediately.\n                        this.initCwr(awsRum);\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Add a command to the command queue.\n     */\n    CommandQueue.prototype.push = function (command) {\n        return __awaiter(this, void 0, void 0, function () {\n            var commandHandler;\n            return __generator(this, function (_a) {\n                commandHandler = this.commandHandlerMap[command.c];\n                if (commandHandler) {\n                    commandHandler(command.p);\n                }\n                else {\n                    throw new Error(\"CWR: UnsupportedOperationException: \".concat(command.c));\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    CommandQueue.prototype.initCwr = function (awsRum) {\n        var _this = this;\n        this.orchestration = new Orchestration(awsRum.i, awsRum.v, awsRum.r, awsRum.c);\n        // Overwrite the global API to use CommandQueue\n        window[awsRum.n] = function (c, p) {\n            _this.push({ c: c, p: p });\n        };\n        // Execute any queued commands\n        awsRum.q.forEach(function (command) {\n            _this.push(command);\n        });\n        // Release the original queue\n        awsRum.q = [];\n    };\n    return CommandQueue;\n}());\nexport { CommandQueue };\n","import { CommandQueue } from './CommandQueue';\nif (!window.AwsRumClient && window.AwsNexusTelemetry) {\n    window.AwsRumClient = window.AwsNexusTelemetry;\n}\nif (typeof fetch === 'function' && typeof navigator.sendBeacon === 'function') {\n    new CommandQueue().init(window.AwsRumClient);\n}\nelse {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    window[window.AwsRumClient.n] = function () { };\n}\n"],"names":["Object","defineProperty","exports","value","RawSha256","constants_1","this","state","Int32Array","from","INIT","temp","buffer","Uint8Array","bufferLength","bytesHashed","finished","prototype","update","data","Error","position","byteLength","MAX_HASHABLE_LENGTH","BLOCK_SIZE","hashBuffer","digest","bitsHashed","bufferView","DataView","byteOffset","undecoratedLength","setUint8","i","setUint32","Math","floor","out","DIGEST_LENGTH","state0","state1","state2","state3","state4","state5","state6","state7","u","t1_1","t2_1","t1","KEY","t2","Uint32Array","pow","__exportStar","Sha256","tslib_1","RawSha256_1","util_1","secret","hash","outer","inner","input","convertToBuffer","bufferHash","set","bufferFromSecret","toHash","isEmptyData","error","e","digestSync","__awaiter","__generator","_a","util_utf8_browser_1","fromUtf8","Buffer","ArrayBuffer","isView","BYTES_PER_ELEMENT","uint32ArrayFrom","numToUint8","convertToBuffer_1","enumerable","get","isEmptyData_1","numToUint8_1","uint32ArrayFrom_1","length","num","a_lookUpTable","return_array","a_index","TextEncoder","encode","bytes","len","charCodeAt","push","surrogatePair","TextDecoder","decode","decoded","byte","String","fromCharCode","nextByte","encoded","map","byteValue","toString","join","decodeURIComponent","isFunction","funktion","logger","console","bind","obj","name","propertyIsEnumerable","configurable","writable","shimmer","options","wrap","nodule","wrapper","stack","original","wrapped","unwrap","__unwrap","massWrap","nodules","names","Array","isArray","forEach","massUnwrap","module","extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","__assign","assign","t","s","n","arguments","call","apply","__rest","indexOf","getOwnPropertySymbols","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","__createBinding","o","m","k","k2","undefined","__values","__read","ar","__spread","concat","__spreadArrays","il","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault","__classPrivateFieldGet","receiver","privateMap","has","__classPrivateFieldSet","window","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","util","extend","regexes","extensions","mergedRegexes","str1","str2","toLowerCase","lowerize","str","major","version","replace","split","trim","substring","mapper","rgx","ua","arrays","matches","match","regex","props","exec","test","maps","browser","oldSafari","oldEdge","os","windows","cpu","device","engine","UAParser","getResult","_ua","navigator","userAgent","_rgxmap","getBrowser","_browser","getCPU","_cpu","architecture","getDevice","_device","vendor","model","type","getEngine","_engine","getOS","_os","getUA","setUA","BROWSER","MAJOR","CPU","DEVICE","ENGINE","OS","$","jQuery","Zepto","parser","uastring","prop","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","toStringTag","HttpRequest","method","hostname","port","query","headers","protocol","slice","path","charAt","isInstance","request","req","clone","cloned","keys","reduce","carry","paramName","param","to","pack","l","__spreadArray","HttpResponse","statusCode","response","resp","CognitoIdentityClient","config","_this","getId","requestPayload","idRequest","JSON","stringify","getHttpRequest","fetchRequestHandler","handle","getReader","read","parse","catch","getOpenIdToken","tokenRequest","getCredentialsForIdentity","identityId","credentialRequest","IdentityId","_b","Credentials","AccessKeyId","Expiration","accessKeyId","secretAccessKey","SecretAccessKey","sessionToken","SessionToken","expiration","Date","payload","region","escapeUri","uri","encodeURIComponent","hexEncode","toUpperCase","buildQueryString","e_1","parts","sort","_c","iLen","qsEntry","e_1_1","return","FetchHttpHandler","configProvider","opts","destroy","abortSignal","requestTimeoutInMs","abortError","queryString","url","requestOptions","fetchRequest","raceOfPromises","_d","requestTimeout","aborted","Headers","AbortController","Request","fetch","fetchHeaders","transformedHeaders","entries","pair","status","blob","timeoutInMs","setTimeout","timeoutError","onabort","race","alphabetByEncoding","alphabetByValue","start","limit","index","StsClient","assumeRoleWithWebIdentity","requestObject","encodedBody","STSRequest","Action","Version","URLSearchParams","host","xmlResponse","CRED_KEY","SESSION_COOKIE_NAME","USER_COOKIE_NAME","Authentication","ChainAnonymousCredentialsProvider","AnonymousCredentialsProvider","AnonymousStorageCredentialsProvider","AnonymousCognitoCredentialsProvider","renewCredentials","credentials","localStorage","getItem","cognitoIdentityClient","IdentityPoolId","identityPoolId","getIdResponse","getOpenIdTokenResponse","stsClient","RoleArn","guestRoleArn","RoleSessionName","WebIdentityToken","Token","setItem","renewalTime","getTime","EnhancedAuthentication","params","client","credentialProvider","RUM_AMZ_PREFIX","HTTP_EVENT_TYPE","XRAY_TRACE_EVENT_TYPE","LCP_EVENT_TYPE","FID_EVENT_TYPE","CLS_EVENT_TYPE","PERFORMANCE_NAVIGATION_EVENT_TYPE","PERFORMANCE_RESOURCE_EVENT_TYPE","DOM_EVENT_TYPE","JS_ERROR_EVENT_TYPE","PAGE_VIEW_EVENT_TYPE","InternalPlugin","enabled","pluginId","generatePluginId","idPrefix","load","context","onload","getPluginId","PluginManager","plugins","Map","addPlugin","plugin","hasPlugin","updatePlugin","updateWith","getPlugin","enable","disable","Boolean","record","Function","id","DOM_EVENT_PLUGIN_ID","defaultConfig","interactionId","enableMutationObserver","events","DomEventPlugin","_super","eventListenerMap","getElementInfo","event","elementInfo","Node","nodeName","Element","document","readyState","addListeners","observeDOMMutation","addEventListener","removeListeners","observer","disconnect","domEvent","addEventHandler","removeEventHandler","getEventListener","cssLocator","eventData","element","elementId","eventType","eventListener","identifiedElementList","elementEventListenerList","querySelectorAll","identifiedElement","getElementById","elementEventListener","removeEventListener","delete","MutationObserver","observe","childList","subtree","_typeof","getRandomValues","isErrorPrimitive","errorEventToJsErrorEvent","errorEvent","stackTraceLength","rumEvent","message","filename","lineno","colno","buildBaseJsErrorEvent","isObject","appendErrorPrimitiveDetails","fileName","lineNumber","columnNumber","appendErrorObjectDetails","JS_ERROR_EVENT_PLUGIN_ID","ignore","JsErrorPlugin","eventHandler","recordJsErrorEvent","promiseRejectEventHandler","reason","ErrorEvent","storeCookie","attributes","ttl","expires","cookie","toUTCString","getExpiryDate","domain","sameSite","secure","getCookie","_i","cookies_1","rnds8","rng","crypto","msCrypto","uuid","byteToHex","substr","arr","offset","buf","rnds","random","NIL_UUID","UNKNOWN","SessionManager","appMonitorDetails","pageManager","session","sessionId","sample","eventCount","initializeUser","collectAttributes","addSessionAttributes","sessionAttributes","getSessionFromCookie","getSession","useCookies","sessionExpiry","createSession","page","getAttributes","getUserId","userId","incrementSessionEventCount","renewSession","userExpiry","setDate","getDate","userIdRetentionDays","getUserIdCookie","v4","createOrRenewUserCookie","createOrRenewSessionCookie","btoa","sessionCookieName","cookieAttributes","atob","resumeSession","pageId","interaction","storeSessionAsCookie","getPage","sessionLengthSeconds","browserLanguage","language","browserName","browserVersion","osName","osVersion","deviceType","platformType","location","cookieEnabled","allowCookies","sessionSampleRate","unique","MonkeyPatched","patch","patchAll","patches","unpatchAll","shouldPatch","VirtualPageLoadTimer","sendWrapper","self","recordXhr","endTracking","currTime","now","xhr","removeXhr","argsArray","finally","decrementFetchCounter","fetchWrapper","init","fetchCounter","isPageLoaded","latestEndTime","checkLoadStatus","ongoingRequests","size","clearInterval","periodicCheckerId","clearTimeout","timeoutCheckerId","domMutationObserver","recordRouteChangeNavigationEvent","declareTimeout","resetInterval","setInterval","routeChangeComplete","moveItemsFromBuffer","item","add","updateLatestInteractionTime","latestInteractionTime","Set","requestBuffer","XMLHttpRequest","startTiming","routeChangeTimeout","characterData","clear","virtualPageNavigationEvent","initiatorType","navigationType","startTime","duration","PageManager","TIMEOUT","resumed","recordInteraction","virtualPageLoadTimer","recordPageView","createResumedPage","createNextPage","createLandingPage","recordPageViewEvent","parentPageId","currentPage","interactionTime","customPageAttributes","title","pageTags","pageAttributes","createPageViewEvent","pageViewEvent","pageInteractionId","parentPageInteractionId","EventCache","applicationDetails","isCurrentUrlAllowed","recordEvent","sessionManager","canRecord","addRecordToCache","recordSessionInitEvent","sessionEventLimit","eventCacheSize","metaData","details","timestamp","hasEvents","getEventBatch","rumEvents","batchLimit","splice","getAppMonitorDetails","getUserDetails","exclude","pagesToExclude","some","re","pagesToInclude","SHORT_TO_HEX","HEX_TO_SHORT","encodedByte","toHex","ResourceType","normalizeProvider","promisified","AMZ_DATE_QUERY_PARAM","SIGNATURE_QUERY_PARAM","TOKEN_QUERY_PARAM","AUTH_HEADER","AMZ_DATE_HEADER","GENERATED_HEADERS","SIGNATURE_HEADER","SHA256_HEADER","TOKEN_HEADER","ALWAYS_UNSIGNABLE_HEADERS","authorization","connection","expect","pragma","referer","te","trailer","upgrade","PROXY_HEADER_PATTERN","SEC_HEADER_PATTERN","ALGORITHM_IDENTIFIER","EVENT_ALGORITHM_IDENTIFIER","KEY_TYPE_IDENTIFIER","signingKeyCache","cacheQueue","createScope","shortDate","service","hmac","ctor","getCanonicalHeaders","unsignableHeaders","signableHeaders","canonical","headerName","canonicalHeaderName","getPayloadHash","hashConstructor","hashCtor","_e","_f","arg","cloneRequest","rest","prepareRequest","toDate","time","Number","SignatureV4","applyChecksum","sha256","uriEscapePath","regionProvider","presign","originalRequest","signingDate","expiresIn","unhoistableHeaders","signingRegion","signingService","longDate","scope","canonicalHeaders","_g","_h","_j","_k","_l","validateResolvedCredentials","formatDate","name_1","lname","moveHeadersToQuery","getCanonicalHeaderList","getSignature","getSigningKey","createCanonicalRequest","sign","toSign","signString","signEvent","signRequest","priorSignature","hashedPayload","hashedHeaders","stringToSign","requestToSign","payloadHash","signature","soughtHeader","hasHeader","sortedHeaders","getCanonicalPath","serialized","_loop_1","filter","getCanonicalQuery","createStringToSign","credentialScope","canonicalRequest","hashedRequest","normalizedPathSegments","pathSegment","normalizedPath","startsWith","endsWith","keyPromise","sha256Constructor","credsHash","cacheKey","signable","toISOString","METHOD","REQUEST_PRESIGN_ARGS","DataPlaneClient","sendFetch","putRumEventsRequest","serializedRequest","signedRequest","serializeRequest","endpoint","pathname","hashAndEncode","AppMonitorDetails","awsSigV4","sendBeacon","preSignedRequest","beaconRequestHandler","serializedRumEvents","RumEvents","serializeEvent","BatchId","UserDetails","round","BeaconHttpHandler","queued","fetchFunction","signal","RetryHttpHandler","handler","retries","backoff","isStatusCode2xx","retriesLeft","sleep","milliseconds","NO_CRED_MSG","Dispatch","eventCache","dispatchFetch","doRequest","rum","createRequest","handleReject","dispatchBeacon","request_1","dispatchFetchFailSilent","dispatchBeaconFailSilent","defaultClientBuilder","buildClient","clientBuilder","startDispatchTimer","stopDispatchTimer","setAwsCredentials","useBeacon","dispatchInterval","dispatchTimerId","NAVIGATION","LOAD","NavigationPlugin","performance","getEntriesByType","performanceNavigationEventHandlerTimingLevel1","PerformanceObserver","list","getEntries","entryType","performanceNavigationEventHandlerTimingLevel2","entryTypes","entryData","timing","origin","navigationStart","eventDataNavigationTimingLevel1","unloadEventStart","promptForUnload","unloadEventEnd","redirectStart","redirectTime","redirectEnd","fetchStart","domainLookupStart","dns","domainLookupEnd","connectStart","connect","connectEnd","secureConnectionStart","tlsTime","requestStart","timeToFirstByte","responseStart","responseTime","responseEnd","domInteractive","domContentLoadedEventStart","domContentLoaded","domContentLoadedEventEnd","domComplete","domProcessingTime","loadEventStart","loadEventTime","loadEventEnd","navigationTimingLevel","eventDataNavigationTimingLevel2","redirectCount","workerStart","workerTime","nextHopProtocol","headerSize","transferSize","encodedBodySize","compressionRatio","decodedBodySize","hasTheWindowLoadEventFired","navData","STYLESHEET","DOCUMENT","SCRIPT","IMAGE","FONT","shuffle","getResourceFileType","lastIndexOf","extension","ext","OTHER","RESOURCE","eventLimit","recordAllTypes","sampleTypes","ResourcePlugin","resourceEventListener","recordAll","resourceObserver","includes","recordResourceEvent","URL","endpointUrl","fileType","recordResourceUrl","targetUrl","persisted","timeStamp","activationStart","prerendering","rating","delta","supportedEntryTypes","buffered","visibilityState","h","firstHiddenTime","getEntriesByName","reportAllChanges","requestAnimationFrame","T","w","passive","capture","C","L","A","S","cancelable","processingStart","WebVitalsPlugin","configure","getWebVitalData","webVitalData","webVitalEvent","takeRecords","once","getLCP","getFID","hadRecentInput","getCLS","holder","TelemetryEnum","PageIdFormatEnum","X_AMZN_TRACE_ID","logicalServiceName","urlsToInclude","urlsToExclude","recordAllRequests","addXRayTraceIdHeader","is4xx","is5xx","is429","isUrlAllowed","include","urlPattern","epochTime","createXRayTraceEvent","http","traceEvent","generateSegmentId","start_time","trace_id","generateTraceId","end_time","subsegments","in_progress","createXRaySubsegment","subsegment","namespace","requestInfoToHostname","getAmznTraceIdHeaderValue","traceId","segmentId","resourceToUrlString","resource","hexTime","guid","randomBytes","uint8ArrayToHexString","hexString","XhrError","XhrPlugin","isTracingEnabled","enableXRay","isSessionRecorded","handleXhrLoadEvent","xhrDetails","xhrMap","endTimee","trace","throttle","fault","clStr","getResponseHeader","cl","parseInt","NaN","isNaN","content_length","recordTraceEvent","recordHttpEventWithResponse","handleXhrErrorEvent","errorMessage","statusText","endTime","cause","exceptions","recordHttpEventWithError","handleXhrAbortEvent","handleXhrDetailsOnError","handleXhrTimeoutEvent","initializeTrace","traced","setRequestHeader","openWrapper","async","errorName","statusOk","httpEvent","FetchPlugin","beginTrace","createXRayTraceEventHttp","xRayTraceEvent","addAmznTraceIdHeaderToInit","endTrace","appendErrorCauseFromObject","appendErrorCauseFromPrimitive","createHttpEvent","ok","PageViewPlugin","pushState","retVal","replaceState","popstateListener","createIdForCurrentPage","addListener","History","pageIdFormat","PathAndHash","Hash","Path","DEFAULT_REGION","DEFAULT_ENDPOINT","Orchestration","applicationId","applicationVersion","configCookieAttributes","partialConfig","disableAutoPageView","enableRumClient","eventPluginsToLoad","telemetries","getDataPlaneEndpoint","initEventCache","dispatchManager","initDispatch","pluginManager","initPluginManager","dispatch","allow","recordError","registerDomEvents","BUILTIN_PLUGINS","constructBuiltinPlugins","PLUGINS","pluginContext","functor","telemetryFunctor","Errors","Performance","Interaction","Http","getRemoteConfig","awsRum","jsonConfig","remoteUrl","err_1","mode","Accept","json","clientConfig","CommandQueue","commandHandlerMap","orchestration","initCwr","command","commandHandler","AwsRumClient","AwsNexusTelemetry"],"sourceRoot":""}